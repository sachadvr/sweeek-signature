import{S as Y,i as Z,s as ee,k,q as N,a as I,e as M,l as D,m as T,r as P,h,c as S,n as H,b as j,E as s,I as z,a2 as $,u as F}from"../chunks/index.bd211c6d.js";import{s as G}from"../chunks/supabaseClient.0fc23a70.js";function J(o,e,a){const n=o.slice();return n[2]=e[a][0],n[3]=e[a][1],n}function K(o,e,a){const n=o.slice();return n[6]=e[a],n}function Q(o,e,a){const n=o.slice();return n[9]=e[a],n}function U(o){let e,a,n,c=o[9].user_id+"",p,v,i,u,d=O(o[9].avg)+"",w,y;return{c(){e=k("tr"),a=k("td"),n=k("div"),p=N(c),v=I(),i=k("td"),u=k("div"),w=N(d),y=I(),this.h()},l(E){e=D(E,"TR",{});var f=T(e);a=D(f,"TD",{class:!0});var b=T(a);n=D(b,"DIV",{});var _=T(n);p=P(_,c),_.forEach(h),b.forEach(h),v=S(f),i=D(f,"TD",{class:!0});var m=T(i);u=D(m,"DIV",{});var l=T(u);w=P(l,d),l.forEach(h),m.forEach(h),y=S(f),f.forEach(h),this.h()},h(){H(a,"class","border border-black min-w-[150px] text-center"),H(i,"class","border border-black min-w-[150px] text-center")},m(E,f){j(E,e,f),s(e,a),s(a,n),s(n,p),s(e,v),s(e,i),s(i,u),s(u,w),s(e,y)},p(E,f){f&2&&c!==(c=E[9].user_id+"")&&F(p,c),f&2&&d!==(d=O(E[9].avg)+"")&&F(w,d)},d(E){E&&h(e)}}}function W(o){let e,a,n,c=o[6].user_id+"",p,v,i,u,d=O(o[6].feel)+"",w,y,E,f,b=new Date(o[6].date).toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric"})+"",_;return{c(){e=k("tr"),a=k("td"),n=k("div"),p=N(c),v=I(),i=k("td"),u=k("div"),w=N(d),y=I(),E=k("td"),f=k("div"),_=N(b),this.h()},l(m){e=D(m,"TR",{});var l=T(e);a=D(l,"TD",{class:!0});var g=T(a);n=D(g,"DIV",{});var L=T(n);p=P(L,c),L.forEach(h),g.forEach(h),v=S(l),i=D(l,"TD",{class:!0});var x=T(i);u=D(x,"DIV",{});var t=T(u);w=P(t,d),t.forEach(h),x.forEach(h),y=S(l),E=D(l,"TD",{class:!0});var R=T(E);f=D(R,"DIV",{});var r=T(f);_=P(r,b),r.forEach(h),R.forEach(h),l.forEach(h),this.h()},h(){H(a,"class","border border-black min-w-[150px] text-center"),H(i,"class","border border-black min-w-[150px] text-center"),H(E,"class","border border-black min-w-[150px] text-center")},m(m,l){j(m,e,l),s(e,a),s(a,n),s(n,p),s(e,v),s(e,i),s(i,u),s(u,w),s(e,y),s(e,E),s(E,f),s(f,_)},p(m,l){l&1&&c!==(c=m[6].user_id+"")&&F(p,c),l&1&&d!==(d=O(m[6].feel)+"")&&F(w,d),l&1&&b!==(b=new Date(m[6].date).toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric"})+"")&&F(_,b)},d(m){m&&h(e)}}}function X(o){let e,a,n,c,p,v,i,u,d,w,y,E,f=o[3],b=[];for(let _=0;_<f.length;_+=1)b[_]=W(K(o,f,_));return{c(){e=k("table"),a=k("tr"),n=k("th"),c=N("Nom"),p=I(),v=k("th"),i=N("Ressentis"),u=I(),d=k("th"),w=N("Date"),y=I();for(let _=0;_<b.length;_+=1)b[_].c();E=I(),this.h()},l(_){e=D(_,"TABLE",{class:!0});var m=T(e);a=D(m,"TR",{});var l=T(a);n=D(l,"TH",{class:!0});var g=T(n);c=P(g,"Nom"),g.forEach(h),p=S(l),v=D(l,"TH",{class:!0});var L=T(v);i=P(L,"Ressentis"),L.forEach(h),u=S(l),d=D(l,"TH",{class:!0});var x=T(d);w=P(x,"Date"),x.forEach(h),l.forEach(h),y=S(m);for(let t=0;t<b.length;t+=1)b[t].l(m);E=S(m),m.forEach(h),this.h()},h(){H(n,"class","border border-black min-w-[150px] text-center bg-gray-300"),H(v,"class","border border-black min-w-[150px] text-center bg-gray-300"),H(d,"class","border border-black min-w-[150px] text-center bg-gray-300"),H(e,"class","border border-black m-5")},m(_,m){j(_,e,m),s(e,a),s(a,n),s(n,c),s(a,p),s(a,v),s(v,i),s(a,u),s(a,d),s(d,w),s(e,y);for(let l=0;l<b.length;l+=1)b[l]&&b[l].m(e,null);s(e,E)},p(_,m){if(m&1){f=_[3];let l;for(l=0;l<f.length;l+=1){const g=K(_,f,l);b[l]?b[l].p(g,m):(b[l]=W(g),b[l].c(),b[l].m(e,E))}for(;l<b.length;l+=1)b[l].d(1);b.length=f.length}},d(_){_&&h(e),$(b,_)}}}function te(o){let e,a,n,c,p,v,i,u,d,w,y,E,f,b,_,m,l=o[1],g=[];for(let t=0;t<l.length;t+=1)g[t]=U(Q(o,l,t));let L=Object.entries(o[0]),x=[];for(let t=0;t<L.length;t+=1)x[t]=X(J(o,L,t));return{c(){e=k("h1"),a=N("Pourcentage Actuels"),n=I(),c=k("table"),p=k("tr"),v=k("th"),i=N("Nom"),u=I(),d=k("th"),w=N("Pourcentage"),y=I();for(let t=0;t<g.length;t+=1)g[t].c();E=I(),f=k("h1"),b=N("Ressentis"),_=I();for(let t=0;t<x.length;t+=1)x[t].c();m=M(),this.h()},l(t){e=D(t,"H1",{class:!0});var R=T(e);a=P(R,"Pourcentage Actuels"),R.forEach(h),n=S(t),c=D(t,"TABLE",{class:!0});var r=T(c);p=D(r,"TR",{});var V=T(p);v=D(V,"TH",{class:!0});var q=T(v);i=P(q,"Nom"),q.forEach(h),u=S(V),d=D(V,"TH",{class:!0});var B=T(d);w=P(B,"Pourcentage"),B.forEach(h),V.forEach(h),y=S(r);for(let A=0;A<g.length;A+=1)g[A].l(r);r.forEach(h),E=S(t),f=D(t,"H1",{class:!0});var C=T(f);b=P(C,"Ressentis"),C.forEach(h),_=S(t);for(let A=0;A<x.length;A+=1)x[A].l(t);m=M(),this.h()},h(){H(e,"class","text-4xl font-bold ml-6 mt-8"),H(v,"class","border border-black min-w-[150px] text-center bg-gray-300"),H(d,"class","border border-black min-w-[150px] text-center bg-gray-300"),H(c,"class","border border-black m-5"),H(f,"class","text-4xl font-bold ml-6 mt-8 ")},m(t,R){j(t,e,R),s(e,a),j(t,n,R),j(t,c,R),s(c,p),s(p,v),s(v,i),s(p,u),s(p,d),s(d,w),s(c,y);for(let r=0;r<g.length;r+=1)g[r]&&g[r].m(c,null);j(t,E,R),j(t,f,R),s(f,b),j(t,_,R);for(let r=0;r<x.length;r+=1)x[r]&&x[r].m(t,R);j(t,m,R)},p(t,[R]){if(R&2){l=t[1];let r;for(r=0;r<l.length;r+=1){const V=Q(t,l,r);g[r]?g[r].p(V,R):(g[r]=U(V),g[r].c(),g[r].m(c,null))}for(;r<g.length;r+=1)g[r].d(1);g.length=l.length}if(R&1){L=Object.entries(t[0]);let r;for(r=0;r<L.length;r+=1){const V=J(t,L,r);x[r]?x[r].p(V,R):(x[r]=X(V),x[r].c(),x[r].m(m.parentNode,m))}for(;r<x.length;r+=1)x[r].d(1);x.length=L.length}},i:z,o:z,d(t){t&&h(e),t&&h(n),t&&h(c),$(g,t),t&&h(E),t&&h(f),t&&h(_),$(x,t),t&&h(m)}}}function O(o){let e=Math.round(o*5);return o>=0&&o<=.2?`😔 (${e}/5)`:o>.2&&o<=.4?`😐 (${e}/5)`:o>.4&&o<=.6?`🙂 (${e}/5)`:o>.6&&o<=.8?`😊 (${e}/5)`:o>.8&&o<=1?`😄 (${e}/5)`:"Invalid score"}function le(o,e,a){let n=[];G.from("feelings").select("*").then(({data:p,error:v})=>{v&&console.log(v),a(0,n=p.reduce((i,u)=>{const d=new Date(u.date).toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric"});return i[d]||(i[d]=[]),i[d].push(u),i},{}))});let c=[];return G.from("feelings").select("*").then(({data:p,error:v})=>{v&&console.log(v),a(1,c=p),a(1,c=c.reduce((i,u)=>(i[u.user_id]||(i[u.user_id]=[]),i[u.user_id].push(u),i),{})),a(1,c=Object.entries(c).map(([i,u])=>{const d=u.reduce((w,y)=>w+y.feel,0)/u.length;return{user_id:i,avg:d}}))}),[n,c]}class se extends Y{constructor(e){super(),Z(this,e,le,te,ee,{})}}export{se as component};
