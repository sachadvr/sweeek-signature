var ta=Object.defineProperty;var na=(n,e,t)=>e in n?ta(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var _e=(n,e,t)=>(na(n,typeof e!="symbol"?e+"":e,t),t),ra=(n,e,t)=>{if(!e.has(n))throw TypeError("Cannot "+t)};var ur=(n,e,t)=>{if(e.has(n))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(n):e.set(n,t)};var Tn=(n,e,t)=>(ra(n,e,"access private method"),t);import{S as er,i as tr,s as nr,k as q,y as Oe,a as ie,q as xe,l as M,m as H,z as Pe,h as I,c as se,r as Ee,n as C,p as at,b as Te,E as A,A as Be,O as He,Y as yr,u as We,g as ne,d as oe,B as je,_ as ia,e as qn,$ as sa,a2 as tt,v as gt,f as mt,a3 as rr,a0 as fn,Q as ls,o as us,L as Qr,M as Yr,j as ei,I as aa,w as ti,Z as ni,a1 as ri}from"./index.958368b0.js";import{_ as Jt}from"./preload-helper.a4192956.js";import{F as Ze,a as oa,b as la,c as cs,d as ua,e as ca,g as ha,h as fa,i as da,f as hs,j as pa,k as ga}from"./index.5d5859ab.js";const ma=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>Jt(()=>Promise.resolve().then(()=>yn),void 0,import.meta.url).then(({default:r})=>r(...t)):e=fetch,(...t)=>e(...t)};class jr extends Error{constructor(e,t="FunctionsError",r){super(e),this.name=t,this.context=r}}class _a extends jr{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class va extends jr{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class wa extends jr{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var br;(function(n){n.Any="any",n.ApNortheast1="ap-northeast-1",n.ApNortheast2="ap-northeast-2",n.ApSouth1="ap-south-1",n.ApSoutheast1="ap-southeast-1",n.ApSoutheast2="ap-southeast-2",n.CaCentral1="ca-central-1",n.EuCentral1="eu-central-1",n.EuWest1="eu-west-1",n.EuWest2="eu-west-2",n.EuWest3="eu-west-3",n.SaEast1="sa-east-1",n.UsEast1="us-east-1",n.UsWest1="us-west-1",n.UsWest2="us-west-2"})(br||(br={}));var ya=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function o(u){try{c(r.next(u))}catch(f){a(f)}}function l(u){try{c(r.throw(u))}catch(f){a(f)}}function c(u){u.done?s(u.value):i(u.value).then(o,l)}c((r=r.apply(n,e||[])).next())})};class ba{constructor(e,{headers:t={},customFetch:r,region:i=br.Any}={}){this.url=e,this.headers=t,this.region=i,this.fetch=ma(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,t={}){var r;return ya(this,void 0,void 0,function*(){try{const{headers:i,method:s,body:a}=t;let o={},{region:l}=t;l||(l=this.region),l&&l!=="any"&&(o["x-region"]=l);let c;a&&(i&&!Object.prototype.hasOwnProperty.call(i,"Content-Type")||!i)&&(typeof Blob<"u"&&a instanceof Blob||a instanceof ArrayBuffer?(o["Content-Type"]="application/octet-stream",c=a):typeof a=="string"?(o["Content-Type"]="text/plain",c=a):typeof FormData<"u"&&a instanceof FormData?c=a:(o["Content-Type"]="application/json",c=JSON.stringify(a)));const u=yield this.fetch(`${this.url}/${e}`,{method:s||"POST",headers:Object.assign(Object.assign(Object.assign({},o),this.headers),i),body:c}).catch(v=>{throw new _a(v)}),f=u.headers.get("x-relay-error");if(f&&f==="true")throw new va(u);if(!u.ok)throw new wa(u);let d=((r=u.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),g;return d==="application/json"?g=yield u.json():d==="application/octet-stream"?g=yield u.blob():d==="multipart/form-data"?g=yield u.formData():g=yield u.text(),{data:g,error:null}}catch(i){return{data:null,error:i}}})}}var ka=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Kt=ka();const Da=Kt.fetch,zr=Kt.fetch.bind(Kt),fs=Kt.Headers,xa=Kt.Request,Ea=Kt.Response,yn=Object.freeze(Object.defineProperty({__proto__:null,Headers:fs,Request:xa,Response:Ea,default:zr,fetch:Da},Symbol.toStringTag,{value:"Module"}));class Aa extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}}class Ca{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=zr:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}then(e,t){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const r=this.fetch;let i=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async s=>{var a,o,l;let c=null,u=null,f=null,d=s.status,g=s.statusText;if(s.ok){if(this.method!=="HEAD"){const E=await s.text();E===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?u=E:u=JSON.parse(E))}const x=(a=this.headers.Prefer)===null||a===void 0?void 0:a.match(/count=(exact|planned|estimated)/),D=(o=s.headers.get("content-range"))===null||o===void 0?void 0:o.split("/");x&&D&&D.length>1&&(f=parseInt(D[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(u)&&(u.length>1?(c={code:"PGRST116",details:`Results contain ${u.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},u=null,f=null,d=406,g="Not Acceptable"):u.length===1?u=u[0]:u=null)}else{const x=await s.text();try{c=JSON.parse(x),Array.isArray(c)&&s.status===404&&(u=[],c=null,d=200,g="OK")}catch{s.status===404&&x===""?(d=204,g="No Content"):c={message:x}}if(c&&this.isMaybeSingle&&(!((l=c==null?void 0:c.details)===null||l===void 0)&&l.includes("0 rows"))&&(c=null,d=200,g="OK"),c&&this.shouldThrowOnError)throw new Aa(c)}return{error:c,data:u,count:f,status:d,statusText:g}});return this.shouldThrowOnError||(i=i.catch(s=>{var a,o,l;return{error:{message:`${(a=s==null?void 0:s.name)!==null&&a!==void 0?a:"FetchError"}: ${s==null?void 0:s.message}`,details:`${(o=s==null?void 0:s.stack)!==null&&o!==void 0?o:""}`,hint:"",code:`${(l=s==null?void 0:s.code)!==null&&l!==void 0?l:""}`},data:null,count:null,status:0,statusText:""}})),i.then(e,t)}}class $a extends Ca{select(e){let t=!1;const r=(e??"*").split("").map(i=>/\s/.test(i)&&!t?"":(i==='"'&&(t=!t),i)).join("");return this.url.searchParams.set("select",r),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e,{ascending:t=!0,nullsFirst:r,foreignTable:i,referencedTable:s=i}={}){const a=s?`${s}.order`:"order",o=this.url.searchParams.get(a);return this.url.searchParams.set(a,`${o?`${o},`:""}${e}.${t?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:r=t}={}){const i=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(i,`${e}`),this}range(e,t,{foreignTable:r,referencedTable:i=r}={}){const s=typeof i>"u"?"offset":`${i}.offset`,a=typeof i>"u"?"limit":`${i}.limit`;return this.url.searchParams.set(s,`${e}`),this.url.searchParams.set(a,`${t-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:e=!1,verbose:t=!1,settings:r=!1,buffers:i=!1,wal:s=!1,format:a="text"}={}){var o;const l=[e?"analyze":null,t?"verbose":null,r?"settings":null,i?"buffers":null,s?"wal":null].filter(Boolean).join("|"),c=(o=this.headers.Accept)!==null&&o!==void 0?o:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${a}; for="${c}"; options=${l};`,a==="json"?this:this}rollback(){var e;return((e=this.headers.Prefer)!==null&&e!==void 0?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}}class Ut extends $a{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}in(e,t){const r=Array.from(new Set(t)).map(i=>typeof i=="string"&&new RegExp("[,()]").test(i)?`"${i}"`:`${i}`).join(",");return this.url.searchParams.append(e,`in.(${r})`),this}contains(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return typeof t=="string"?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:r,type:i}={}){let s="";i==="plain"?s="pl":i==="phrase"?s="ph":i==="websearch"&&(s="w");const a=r===void 0?"":`(${r})`;return this.url.searchParams.append(e,`${s}fts${a}.${t}`),this}match(e){return Object.entries(e).forEach(([t,r])=>{this.url.searchParams.append(t,`eq.${r}`)}),this}not(e,t,r){return this.url.searchParams.append(e,`not.${t}.${r}`),this}or(e,{foreignTable:t,referencedTable:r=t}={}){const i=r?`${r}.or`:"or";return this.url.searchParams.append(i,`(${e})`),this}filter(e,t,r){return this.url.searchParams.append(e,`${t}.${r}`),this}}class Ta{constructor(e,{headers:t={},schema:r,fetch:i}){this.url=e,this.headers=t,this.schema=r,this.fetch=i}select(e,{head:t=!1,count:r}={}){const i=t?"HEAD":"GET";let s=!1;const a=(e??"*").split("").map(o=>/\s/.test(o)&&!s?"":(o==='"'&&(s=!s),o)).join("");return this.url.searchParams.set("select",a),r&&(this.headers.Prefer=`count=${r}`),new Ut({method:i,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e,{count:t,defaultToNull:r=!0}={}){const i="POST",s=[];if(this.headers.Prefer&&s.push(this.headers.Prefer),t&&s.push(`count=${t}`),r||s.push("missing=default"),this.headers.Prefer=s.join(","),Array.isArray(e)){const a=e.reduce((o,l)=>o.concat(Object.keys(l)),[]);if(a.length>0){const o=[...new Set(a)].map(l=>`"${l}"`);this.url.searchParams.set("columns",o.join(","))}}return new Ut({method:i,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e,{onConflict:t,ignoreDuplicates:r=!1,count:i,defaultToNull:s=!0}={}){const a="POST",o=[`resolution=${r?"ignore":"merge"}-duplicates`];if(t!==void 0&&this.url.searchParams.set("on_conflict",t),this.headers.Prefer&&o.push(this.headers.Prefer),i&&o.push(`count=${i}`),s||o.push("missing=default"),this.headers.Prefer=o.join(","),Array.isArray(e)){const l=e.reduce((c,u)=>c.concat(Object.keys(u)),[]);if(l.length>0){const c=[...new Set(l)].map(u=>`"${u}"`);this.url.searchParams.set("columns",c.join(","))}}return new Ut({method:a,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e,{count:t}={}){const r="PATCH",i=[];return this.headers.Prefer&&i.push(this.headers.Prefer),t&&i.push(`count=${t}`),this.headers.Prefer=i.join(","),new Ut({method:r,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete({count:e}={}){const t="DELETE",r=[];return e&&r.push(`count=${e}`),this.headers.Prefer&&r.unshift(this.headers.Prefer),this.headers.Prefer=r.join(","),new Ut({method:t,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}}const Sa="1.11.0",Fa={"X-Client-Info":`postgrest-js/${Sa}`};class Lr{constructor(e,{headers:t={},schema:r,fetch:i}={}){this.url=e,this.headers=Object.assign(Object.assign({},Fa),t),this.schemaName=r,this.fetch=i}from(e){const t=new URL(`${this.url}/${e}`);return new Ta(t,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new Lr(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,t={},{head:r=!1,count:i}={}){let s;const a=new URL(`${this.url}/rpc/${e}`);let o;r?(s="HEAD",Object.entries(t).forEach(([c,u])=>{a.searchParams.append(c,`${u}`)})):(s="POST",o=t);const l=Object.assign({},this.headers);return i&&(l.Prefer=`count=${i}`),new Ut({method:s,url:a,headers:l,schema:this.schemaName,body:o,fetch:this.fetch,allowEmpty:!1})}}const Ra="2.9.3",Ia={"X-Client-Info":`realtime-js/${Ra}`},Oa="1.0.0",ds=1e4,Pa=1e3;var Vt;(function(n){n[n.connecting=0]="connecting",n[n.open=1]="open",n[n.closing=2]="closing",n[n.closed=3]="closed"})(Vt||(Vt={}));var Ke;(function(n){n.closed="closed",n.errored="errored",n.joined="joined",n.joining="joining",n.leaving="leaving"})(Ke||(Ke={}));var it;(function(n){n.close="phx_close",n.error="phx_error",n.join="phx_join",n.reply="phx_reply",n.leave="phx_leave",n.access_token="access_token"})(it||(it={}));var kr;(function(n){n.websocket="websocket"})(kr||(kr={}));var Ct;(function(n){n.Connecting="connecting",n.Open="open",n.Closing="closing",n.Closed="closed"})(Ct||(Ct={}));let ps=class{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}};class Ba{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,t,r)}_decodeBroadcast(e,t,r){const i=t.getUint8(1),s=t.getUint8(2);let a=this.HEADER_LENGTH+2;const o=r.decode(e.slice(a,a+i));a=a+i;const l=r.decode(e.slice(a,a+s));a=a+s;const c=JSON.parse(r.decode(e.slice(a,e.byteLength)));return{ref:null,topic:o,event:l,payload:c}}}class cr{constructor(e,t,r={},i=ds){this.channel=e,this.event=t,this.payload=r,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var r;return this._hasReceived(e)&&t((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=t=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=t,this._matchReceive(t)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var ii;(function(n){n.SYNC="sync",n.JOIN="join",n.LEAVE="leave"})(ii||(ii={}));class un{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(t==null?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},i=>{const{onJoin:s,onLeave:a,onSync:o}=this.caller;this.joinRef=this.channel._joinRef(),this.state=un.syncState(this.state,i,s,a),this.pendingDiffs.forEach(l=>{this.state=un.syncDiff(this.state,l,s,a)}),this.pendingDiffs=[],o()}),this.channel._on(r.diff,{},i=>{const{onJoin:s,onLeave:a,onSync:o}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=un.syncDiff(this.state,i,s,a),o())}),this.onJoin((i,s,a)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:s,newPresences:a})}),this.onLeave((i,s,a)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:s,leftPresences:a})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,r,i){const s=this.cloneDeep(e),a=this.transformState(t),o={},l={};return this.map(s,(c,u)=>{a[c]||(l[c]=u)}),this.map(a,(c,u)=>{const f=s[c];if(f){const d=u.map(D=>D.presence_ref),g=f.map(D=>D.presence_ref),v=u.filter(D=>g.indexOf(D.presence_ref)<0),x=f.filter(D=>d.indexOf(D.presence_ref)<0);v.length>0&&(o[c]=v),x.length>0&&(l[c]=x)}else o[c]=u}),this.syncDiff(s,{joins:o,leaves:l},r,i)}static syncDiff(e,t,r,i){const{joins:s,leaves:a}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return r||(r=()=>{}),i||(i=()=>{}),this.map(s,(o,l)=>{var c;const u=(c=e[o])!==null&&c!==void 0?c:[];if(e[o]=this.cloneDeep(l),u.length>0){const f=e[o].map(g=>g.presence_ref),d=u.filter(g=>f.indexOf(g.presence_ref)<0);e[o].unshift(...d)}r(o,u,l)}),this.map(a,(o,l)=>{let c=e[o];if(!c)return;const u=l.map(f=>f.presence_ref);c=c.filter(f=>u.indexOf(f.presence_ref)<0),e[o]=c,i(o,c,l),c.length===0&&delete e[o]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(r=>t(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,r)=>{const i=e[r];return"metas"in i?t[r]=i.metas.map(s=>(s.presence_ref=s.phx_ref,delete s.phx_ref,delete s.phx_ref_prev,s)):t[r]=i,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var we;(function(n){n.abstime="abstime",n.bool="bool",n.date="date",n.daterange="daterange",n.float4="float4",n.float8="float8",n.int2="int2",n.int4="int4",n.int4range="int4range",n.int8="int8",n.int8range="int8range",n.json="json",n.jsonb="jsonb",n.money="money",n.numeric="numeric",n.oid="oid",n.reltime="reltime",n.text="text",n.time="time",n.timestamp="timestamp",n.timestamptz="timestamptz",n.timetz="timetz",n.tsrange="tsrange",n.tstzrange="tstzrange"})(we||(we={}));const si=(n,e,t={})=>{var r;const i=(r=t.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(e).reduce((s,a)=>(s[a]=ja(a,n,e,i),s),{})},ja=(n,e,t,r)=>{const i=e.find(o=>o.name===n),s=i==null?void 0:i.type,a=t[n];return s&&!r.includes(s)?gs(s,a):Dr(a)},gs=(n,e)=>{if(n.charAt(0)==="_"){const t=n.slice(1,n.length);return Ua(e,t)}switch(n){case we.bool:return za(e);case we.float4:case we.float8:case we.int2:case we.int4:case we.int8:case we.numeric:case we.oid:return La(e);case we.json:case we.jsonb:return Na(e);case we.timestamp:return qa(e);case we.abstime:case we.date:case we.daterange:case we.int4range:case we.int8range:case we.money:case we.reltime:case we.text:case we.time:case we.timestamptz:case we.timetz:case we.tsrange:case we.tstzrange:return Dr(e);default:return Dr(e)}},Dr=n=>n,za=n=>{switch(n){case"t":return!0;case"f":return!1;default:return n}},La=n=>{if(typeof n=="string"){const e=parseFloat(n);if(!Number.isNaN(e))return e}return n},Na=n=>{if(typeof n=="string")try{return JSON.parse(n)}catch(e){return console.log(`JSON parse error: ${e}`),n}return n},Ua=(n,e)=>{if(typeof n!="string")return n;const t=n.length-1,r=n[t];if(n[0]==="{"&&r==="}"){let s;const a=n.slice(1,t);try{s=JSON.parse("["+a+"]")}catch{s=a?a.split(","):[]}return s.map(o=>gs(e,o))}return n},qa=n=>typeof n=="string"?n.replace(" ","T"):n;var ai;(function(n){n.ALL="*",n.INSERT="INSERT",n.UPDATE="UPDATE",n.DELETE="DELETE"})(ai||(ai={}));var oi;(function(n){n.BROADCAST="broadcast",n.PRESENCE="presence",n.POSTGRES_CHANGES="postgres_changes"})(oi||(oi={}));var li;(function(n){n.SUBSCRIBED="SUBSCRIBED",n.TIMED_OUT="TIMED_OUT",n.CLOSED="CLOSED",n.CHANNEL_ERROR="CHANNEL_ERROR"})(li||(li={}));class Nr{constructor(e,t={config:{}},r){this.topic=e,this.params=t,this.socket=r,this.bindings={},this.state=Ke.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""}},t.config),this.timeout=this.socket.timeout,this.joinPush=new cr(this,it.join,this.params,this.timeout),this.rejoinTimer=new ps(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Ke.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(i=>i.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Ke.closed,this.socket._remove(this)}),this._onError(i=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,i),this.state=Ke.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Ke.errored,this.rejoinTimer.scheduleTimeout())}),this._on(it.reply,{},(i,s)=>{this._trigger(this._replyEventName(s),i)}),this.presence=new un(this),this.broadcastEndpointURL=this._broadcastEndpointURL()}subscribe(e,t=this.timeout){var r,i;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:s,presence:a}}=this.params;this._onError(c=>e&&e("CHANNEL_ERROR",c)),this._onClose(()=>e&&e("CLOSED"));const o={},l={broadcast:s,presence:a,postgres_changes:(i=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(c=>c.filter))!==null&&i!==void 0?i:[]};this.socket.accessToken&&(o.access_token=this.socket.accessToken),this.updateJoinPayload(Object.assign({config:l},o)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",({postgres_changes:c})=>{var u;if(this.socket.accessToken&&this.socket.setAuth(this.socket.accessToken),c===void 0){e&&e("SUBSCRIBED");return}else{const f=this.bindings.postgres_changes,d=(u=f==null?void 0:f.length)!==null&&u!==void 0?u:0,g=[];for(let v=0;v<d;v++){const x=f[v],{filter:{event:D,schema:E,table:S,filter:F}}=x,$=c&&c[v];if($&&$.event===D&&$.schema===E&&$.table===S&&$.filter===F)g.push(Object.assign(Object.assign({},x),{id:$.id}));else{this.unsubscribe(),e&&e("CHANNEL_ERROR",new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=g,e&&e("SUBSCRIBED");return}}).receive("error",c=>{e&&e("CHANNEL_ERROR",new Error(JSON.stringify(Object.values(c).join(", ")||"error")))}).receive("timeout",()=>{e&&e("TIMED_OUT")})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,r){return this._on(e,t,r)}async send(e,t={}){var r,i;if(!this._canPush()&&e.type==="broadcast"){const{event:s,payload:a}=e,o={method:"POST",headers:{apikey:(r=this.socket.apiKey)!==null&&r!==void 0?r:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:s,payload:a}]})};try{return(await this._fetchWithTimeout(this.broadcastEndpointURL,o,(i=t.timeout)!==null&&i!==void 0?i:this.timeout)).ok?"ok":"error"}catch(l){return l.name==="AbortError"?"timed out":"error"}}else return new Promise(s=>{var a,o,l;const c=this._push(e.type,e,t.timeout||this.timeout);e.type==="broadcast"&&!(!((l=(o=(a=this.params)===null||a===void 0?void 0:a.config)===null||o===void 0?void 0:o.broadcast)===null||l===void 0)&&l.ack)&&s("ok"),c.receive("ok",()=>s("ok")),c.receive("timeout",()=>s("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Ke.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(it.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise(r=>{const i=new cr(this,it.leave,{},e);i.receive("ok",()=>{t(),r("ok")}).receive("timeout",()=>{t(),r("timed out")}).receive("error",()=>{r("error")}),i.send(),this._canPush()||i.trigger("ok",{})})}_broadcastEndpointURL(){let e=this.socket.endPoint;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")+"/api/broadcast"}async _fetchWithTimeout(e,t,r){const i=new AbortController,s=setTimeout(()=>i.abort(),r),a=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:i.signal}));return clearTimeout(s),a}_push(e,t,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new cr(this,e,t,r);return this._canPush()?i.send():(i.startTimeout(),this.pushBuffer.push(i)),i}_onMessage(e,t,r){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,r){var i,s;const a=e.toLocaleLowerCase(),{close:o,error:l,leave:c,join:u}=it;if(r&&[o,l,c,u].indexOf(a)>=0&&r!==this._joinRef())return;let d=this._onMessage(a,t,r);if(t&&!d)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(a)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(g=>{var v,x,D;return((v=g.filter)===null||v===void 0?void 0:v.event)==="*"||((D=(x=g.filter)===null||x===void 0?void 0:x.event)===null||D===void 0?void 0:D.toLocaleLowerCase())===a}).map(g=>g.callback(d,r)):(s=this.bindings[a])===null||s===void 0||s.filter(g=>{var v,x,D,E,S,F;if(["broadcast","presence","postgres_changes"].includes(a))if("id"in g){const $=g.id,T=(v=g.filter)===null||v===void 0?void 0:v.event;return $&&((x=t.ids)===null||x===void 0?void 0:x.includes($))&&(T==="*"||(T==null?void 0:T.toLocaleLowerCase())===((D=t.data)===null||D===void 0?void 0:D.type.toLocaleLowerCase()))}else{const $=(S=(E=g==null?void 0:g.filter)===null||E===void 0?void 0:E.event)===null||S===void 0?void 0:S.toLocaleLowerCase();return $==="*"||$===((F=t==null?void 0:t.event)===null||F===void 0?void 0:F.toLocaleLowerCase())}else return g.type.toLocaleLowerCase()===a}).map(g=>{if(typeof d=="object"&&"ids"in d){const v=d.data,{schema:x,table:D,commit_timestamp:E,type:S,errors:F}=v;d=Object.assign(Object.assign({},{schema:x,table:D,commit_timestamp:E,eventType:S,new:{},old:{},errors:F}),this._getPayloadRecords(v))}g.callback(d,r)})}_isClosed(){return this.state===Ke.closed}_isJoined(){return this.state===Ke.joined}_isJoining(){return this.state===Ke.joining}_isLeaving(){return this.state===Ke.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,r){const i=e.toLocaleLowerCase(),s={type:i,filter:t,callback:r};return this.bindings[i]?this.bindings[i].push(s):this.bindings[i]=[s],this}_off(e,t){const r=e.toLocaleLowerCase();return this.bindings[r]=this.bindings[r].filter(i=>{var s;return!(((s=i.type)===null||s===void 0?void 0:s.toLocaleLowerCase())===r&&Nr.isEqual(i.filter,t))}),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(e[r]!==t[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(it.close,{},e)}_onError(e){this._on(it.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Ke.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(t.new=si(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(t.old=si(e.columns,e.old_record)),t}}const Ma=()=>{},Va=typeof WebSocket<"u";class Ha{constructor(e,t){var r;this.accessToken=null,this.apiKey=null,this.channels=[],this.endPoint="",this.headers=Ia,this.params={},this.timeout=ds,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=Ma,this.conn=null,this.sendBuffer=[],this.serializer=new Ba,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this._resolveFetch=s=>{let a;return s?a=s:typeof fetch>"u"?a=(...o)=>Jt(()=>Promise.resolve().then(()=>yn),void 0,import.meta.url).then(({default:l})=>l(...o)):a=fetch,(...o)=>a(...o)},this.endPoint=`${e}/${kr.websocket}`,t!=null&&t.transport?this.transport=t.transport:this.transport=null,t!=null&&t.params&&(this.params=t.params),t!=null&&t.headers&&(this.headers=Object.assign(Object.assign({},this.headers),t.headers)),t!=null&&t.timeout&&(this.timeout=t.timeout),t!=null&&t.logger&&(this.logger=t.logger),t!=null&&t.heartbeatIntervalMs&&(this.heartbeatIntervalMs=t.heartbeatIntervalMs);const i=(r=t==null?void 0:t.params)===null||r===void 0?void 0:r.apikey;i&&(this.accessToken=i,this.apiKey=i),this.reconnectAfterMs=t!=null&&t.reconnectAfterMs?t.reconnectAfterMs:s=>[1e3,2e3,5e3,1e4][s-1]||1e4,this.encode=t!=null&&t.encode?t.encode:(s,a)=>a(JSON.stringify(s)),this.decode=t!=null&&t.decode?t.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new ps(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(t==null?void 0:t.fetch)}connect(){if(!this.conn){if(this.transport){this.conn=new this.transport(this._endPointURL(),void 0,{headers:this.headers});return}if(Va){this.conn=new WebSocket(this._endPointURL()),this.setupConnection();return}this.conn=new Ja(this._endPointURL(),void 0,{close:()=>{this.conn=null}}),Jt(()=>import("./browser.33fe4894.js").then(e=>e.b),[],import.meta.url).then(({default:e})=>{this.conn=new e(this._endPointURL(),void 0,{headers:this.headers}),this.setupConnection()})}}disconnect(e,t){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,t??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(t=>t.unsubscribe()));return this.disconnect(),e}log(e,t,r){this.logger(e,t,r)}connectionState(){switch(this.conn&&this.conn.readyState){case Vt.connecting:return Ct.Connecting;case Vt.open:return Ct.Open;case Vt.closing:return Ct.Closing;default:return Ct.Closed}}isConnected(){return this.connectionState()===Ct.Open}channel(e,t={config:{}}){const r=new Nr(`realtime:${e}`,t,this);return this.channels.push(r),r}push(e){const{topic:t,event:r,payload:i,ref:s}=e,a=()=>{this.encode(e,o=>{var l;(l=this.conn)===null||l===void 0||l.send(o)})};this.log("push",`${t} ${r} (${s})`,i),this.isConnected()?a():this.sendBuffer.push(a)}setAuth(e){this.accessToken=e,this.channels.forEach(t=>{e&&t.updateJoinPayload({access_token:e}),t.joinedOnce&&t._isJoined()&&t._push(it.access_token,{access_token:e})})}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t._joinRef()!==e._joinRef())}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_endPointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:Oa}))}_onConnMessage(e){this.decode(e.data,t=>{let{topic:r,event:i,payload:s,ref:a}=t;(a&&a===this.pendingHeartbeatRef||i===(s==null?void 0:s.type))&&(this.pendingHeartbeatRef=null),this.log("receive",`${s.status||""} ${r} ${i} ${a&&"("+a+")"||""}`,s),this.channels.filter(o=>o._isMember(r)).forEach(o=>o._trigger(i,s,a)),this.stateChangeCallbacks.message.forEach(o=>o(t))})}_onConnOpen(){this.log("transport",`connected to ${this._endPointURL()}`),this._flushSendBuffer(),this.reconnectTimer.reset(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this._sendHeartbeat(),this.heartbeatIntervalMs),this.stateChangeCallbacks.open.forEach(e=>e())}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(t=>t(e))}_onConnError(e){this.log("transport",e.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(t=>t(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(it.error))}_appendParams(e,t){if(Object.keys(t).length===0)return e;const r=e.match(/\?/)?"&":"?",i=new URLSearchParams(t);return`${e}${r}${i}`}_flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_sendHeartbeat(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),(e=this.conn)===null||e===void 0||e.close(Pa,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth(this.accessToken)}}}class Ja{constructor(e,t,r){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=Vt.connecting,this.send=()=>{},this.url=null,this.url=e,this.close=r.close}}class Ur extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function Ue(n){return typeof n=="object"&&n!==null&&"__isStorageError"in n}class Ka extends Ur{constructor(e,t){super(e),this.name="StorageApiError",this.status=t}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class ui extends Ur{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}var Ga=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function o(u){try{c(r.next(u))}catch(f){a(f)}}function l(u){try{c(r.throw(u))}catch(f){a(f)}}function c(u){u.done?s(u.value):i(u.value).then(o,l)}c((r=r.apply(n,e||[])).next())})};const ms=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>Jt(()=>Promise.resolve().then(()=>yn),void 0,import.meta.url).then(({default:r})=>r(...t)):e=fetch,(...t)=>e(...t)},Za=()=>Ga(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Jt(()=>Promise.resolve().then(()=>yn),void 0,import.meta.url)).Response:Response});var Wt=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function o(u){try{c(r.next(u))}catch(f){a(f)}}function l(u){try{c(r.throw(u))}catch(f){a(f)}}function c(u){u.done?s(u.value):i(u.value).then(o,l)}c((r=r.apply(n,e||[])).next())})};const hr=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),Wa=(n,e)=>Wt(void 0,void 0,void 0,function*(){const t=yield Za();n instanceof t?n.json().then(r=>{e(new Ka(hr(r),n.status||500))}).catch(r=>{e(new ui(hr(r),r))}):e(new ui(hr(n),n))}),Xa=(n,e,t,r)=>{const i={method:n,headers:(e==null?void 0:e.headers)||{}};return n==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),i.body=JSON.stringify(r),Object.assign(Object.assign({},i),t))};function ir(n,e,t,r,i,s){return Wt(this,void 0,void 0,function*(){return new Promise((a,o)=>{n(t,Xa(e,r,i,s)).then(l=>{if(!l.ok)throw l;return r!=null&&r.noResolveJson?l:l.json()}).then(l=>a(l)).catch(l=>Wa(l,o))})})}function xr(n,e,t,r){return Wt(this,void 0,void 0,function*(){return ir(n,"GET",e,t,r)})}function wt(n,e,t,r,i){return Wt(this,void 0,void 0,function*(){return ir(n,"POST",e,r,i,t)})}function Qa(n,e,t,r,i){return Wt(this,void 0,void 0,function*(){return ir(n,"PUT",e,r,i,t)})}function _s(n,e,t,r,i){return Wt(this,void 0,void 0,function*(){return ir(n,"DELETE",e,r,i,t)})}var nt=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function o(u){try{c(r.next(u))}catch(f){a(f)}}function l(u){try{c(r.throw(u))}catch(f){a(f)}}function c(u){u.done?s(u.value):i(u.value).then(o,l)}c((r=r.apply(n,e||[])).next())})};const Ya={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},ci={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class eo{constructor(e,t={},r,i){this.url=e,this.headers=t,this.bucketId=r,this.fetch=ms(i)}uploadOrUpdate(e,t,r,i){return nt(this,void 0,void 0,function*(){try{let s;const a=Object.assign(Object.assign({},ci),i),o=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(a.upsert)});typeof Blob<"u"&&r instanceof Blob?(s=new FormData,s.append("cacheControl",a.cacheControl),s.append("",r)):typeof FormData<"u"&&r instanceof FormData?(s=r,s.append("cacheControl",a.cacheControl)):(s=r,o["cache-control"]=`max-age=${a.cacheControl}`,o["content-type"]=a.contentType);const l=this._removeEmptyFolders(t),c=this._getFinalPath(l),u=yield this.fetch(`${this.url}/object/${c}`,Object.assign({method:e,body:s,headers:o},a!=null&&a.duplex?{duplex:a.duplex}:{})),f=yield u.json();return u.ok?{data:{path:l,id:f.Id,fullPath:f.Key},error:null}:{data:null,error:f}}catch(s){if(Ue(s))return{data:null,error:s};throw s}})}upload(e,t,r){return nt(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,r)})}uploadToSignedUrl(e,t,r,i){return nt(this,void 0,void 0,function*(){const s=this._removeEmptyFolders(e),a=this._getFinalPath(s),o=new URL(this.url+`/object/upload/sign/${a}`);o.searchParams.set("token",t);try{let l;const c=Object.assign({upsert:ci.upsert},i),u=Object.assign(Object.assign({},this.headers),{"x-upsert":String(c.upsert)});typeof Blob<"u"&&r instanceof Blob?(l=new FormData,l.append("cacheControl",c.cacheControl),l.append("",r)):typeof FormData<"u"&&r instanceof FormData?(l=r,l.append("cacheControl",c.cacheControl)):(l=r,u["cache-control"]=`max-age=${c.cacheControl}`,u["content-type"]=c.contentType);const f=yield this.fetch(o.toString(),{method:"PUT",body:l,headers:u}),d=yield f.json();return f.ok?{data:{path:s,fullPath:d.Key},error:null}:{data:null,error:d}}catch(l){if(Ue(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(e){return nt(this,void 0,void 0,function*(){try{let t=this._getFinalPath(e);const r=yield wt(this.fetch,`${this.url}/object/upload/sign/${t}`,{},{headers:this.headers}),i=new URL(this.url+r.url),s=i.searchParams.get("token");if(!s)throw new Ur("No token returned by API");return{data:{signedUrl:i.toString(),path:e,token:s},error:null}}catch(t){if(Ue(t))return{data:null,error:t};throw t}})}update(e,t,r){return nt(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,r)})}move(e,t){return nt(this,void 0,void 0,function*(){try{return{data:yield wt(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t},{headers:this.headers}),error:null}}catch(r){if(Ue(r))return{data:null,error:r};throw r}})}copy(e,t){return nt(this,void 0,void 0,function*(){try{return{data:{path:(yield wt(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t},{headers:this.headers})).Key},error:null}}catch(r){if(Ue(r))return{data:null,error:r};throw r}})}createSignedUrl(e,t,r){return nt(this,void 0,void 0,function*(){try{let i=this._getFinalPath(e),s=yield wt(this.fetch,`${this.url}/object/sign/${i}`,Object.assign({expiresIn:t},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const a=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return s={signedUrl:encodeURI(`${this.url}${s.signedURL}${a}`)},{data:s,error:null}}catch(i){if(Ue(i))return{data:null,error:i};throw i}})}createSignedUrls(e,t,r){return nt(this,void 0,void 0,function*(){try{const i=yield wt(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),s=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:i.map(a=>Object.assign(Object.assign({},a),{signedUrl:a.signedURL?encodeURI(`${this.url}${a.signedURL}${s}`):null})),error:null}}catch(i){if(Ue(i))return{data:null,error:i};throw i}})}download(e,t){return nt(this,void 0,void 0,function*(){const i=typeof(t==null?void 0:t.transform)<"u"?"render/image/authenticated":"object",s=this.transformOptsToQueryString((t==null?void 0:t.transform)||{}),a=s?`?${s}`:"";try{const o=this._getFinalPath(e);return{data:yield(yield xr(this.fetch,`${this.url}/${i}/${o}${a}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(o){if(Ue(o))return{data:null,error:o};throw o}})}getPublicUrl(e,t){const r=this._getFinalPath(e),i=[],s=t!=null&&t.download?`download=${t.download===!0?"":t.download}`:"";s!==""&&i.push(s);const o=typeof(t==null?void 0:t.transform)<"u"?"render/image":"object",l=this.transformOptsToQueryString((t==null?void 0:t.transform)||{});l!==""&&i.push(l);let c=i.join("&");return c!==""&&(c=`?${c}`),{data:{publicUrl:encodeURI(`${this.url}/${o}/public/${r}${c}`)}}}remove(e){return nt(this,void 0,void 0,function*(){try{return{data:yield _s(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(Ue(t))return{data:null,error:t};throw t}})}list(e,t,r){return nt(this,void 0,void 0,function*(){try{const i=Object.assign(Object.assign(Object.assign({},Ya),t),{prefix:e||""});return{data:yield wt(this.fetch,`${this.url}/object/list/${this.bucketId}`,i,{headers:this.headers},r),error:null}}catch(i){if(Ue(i))return{data:null,error:i};throw i}})}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const to="2.5.5",no={"X-Client-Info":`storage-js/${to}`};var Bt=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function o(u){try{c(r.next(u))}catch(f){a(f)}}function l(u){try{c(r.throw(u))}catch(f){a(f)}}function c(u){u.done?s(u.value):i(u.value).then(o,l)}c((r=r.apply(n,e||[])).next())})};class ro{constructor(e,t={},r){this.url=e,this.headers=Object.assign(Object.assign({},no),t),this.fetch=ms(r)}listBuckets(){return Bt(this,void 0,void 0,function*(){try{return{data:yield xr(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(Ue(e))return{data:null,error:e};throw e}})}getBucket(e){return Bt(this,void 0,void 0,function*(){try{return{data:yield xr(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(Ue(t))return{data:null,error:t};throw t}})}createBucket(e,t={public:!1}){return Bt(this,void 0,void 0,function*(){try{return{data:yield wt(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(Ue(r))return{data:null,error:r};throw r}})}updateBucket(e,t){return Bt(this,void 0,void 0,function*(){try{return{data:yield Qa(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(Ue(r))return{data:null,error:r};throw r}})}emptyBucket(e){return Bt(this,void 0,void 0,function*(){try{return{data:yield wt(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(Ue(t))return{data:null,error:t};throw t}})}deleteBucket(e){return Bt(this,void 0,void 0,function*(){try{return{data:yield _s(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(Ue(t))return{data:null,error:t};throw t}})}}class io extends ro{constructor(e,t={},r){super(e,t,r)}from(e){return new eo(this.url,this.headers,e,this.fetch)}}const so="2.39.3";let sn="";typeof Deno<"u"?sn="deno":typeof document<"u"?sn="web":typeof navigator<"u"&&navigator.product==="ReactNative"?sn="react-native":sn="node";const ao={"X-Client-Info":`supabase-js-${sn}/${so}`};var oo=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function o(u){try{c(r.next(u))}catch(f){a(f)}}function l(u){try{c(r.throw(u))}catch(f){a(f)}}function c(u){u.done?s(u.value):i(u.value).then(o,l)}c((r=r.apply(n,e||[])).next())})};const lo=n=>{let e;return n?e=n:typeof fetch>"u"?e=zr:e=fetch,(...t)=>e(...t)},uo=()=>typeof Headers>"u"?fs:Headers,co=(n,e,t)=>{const r=lo(t),i=uo();return(s,a)=>oo(void 0,void 0,void 0,function*(){var o;const l=(o=yield e())!==null&&o!==void 0?o:n;let c=new i(a==null?void 0:a.headers);return c.has("apikey")||c.set("apikey",n),c.has("Authorization")||c.set("Authorization",`Bearer ${l}`),r(s,Object.assign(Object.assign({},a),{headers:c}))})};function ho(n){return n.replace(/\/$/,"")}function fo(n,e){const{db:t,auth:r,realtime:i,global:s}=n,{db:a,auth:o,realtime:l,global:c}=e;return{db:Object.assign(Object.assign({},a),t),auth:Object.assign(Object.assign({},o),r),realtime:Object.assign(Object.assign({},l),i),global:Object.assign(Object.assign({},c),s)}}function po(n){return Math.round(Date.now()/1e3)+n}function go(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){const e=Math.random()*16|0;return(n=="x"?e:e&3|8).toString(16)})}const rt=()=>typeof document<"u",kt={tested:!1,writable:!1},cn=()=>{if(!rt())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(kt.tested)return kt.writable;const n=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(n,n),globalThis.localStorage.removeItem(n),kt.tested=!0,kt.writable=!0}catch{kt.tested=!0,kt.writable=!1}return kt.writable};function fr(n){const e={},t=new URL(n);if(t.hash&&t.hash[0]==="#")try{new URLSearchParams(t.hash.substring(1)).forEach((i,s)=>{e[s]=i})}catch{}return t.searchParams.forEach((r,i)=>{e[i]=r}),e}const vs=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>Jt(()=>Promise.resolve().then(()=>yn),void 0,import.meta.url).then(({default:r})=>r(...t)):e=fetch,(...t)=>e(...t)},mo=n=>typeof n=="object"&&n!==null&&"status"in n&&"ok"in n&&"json"in n&&typeof n.json=="function",Dt=async(n,e,t)=>{await n.setItem(e,JSON.stringify(t))},Sn=async(n,e)=>{const t=await n.getItem(e);if(!t)return null;try{return JSON.parse(t)}catch{return t}},dr=async(n,e)=>{await n.removeItem(e)};function _o(n){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let t="",r,i,s,a,o,l,c,u=0;for(n=n.replace("-","+").replace("_","/");u<n.length;)a=e.indexOf(n.charAt(u++)),o=e.indexOf(n.charAt(u++)),l=e.indexOf(n.charAt(u++)),c=e.indexOf(n.charAt(u++)),r=a<<2|o>>4,i=(o&15)<<4|l>>2,s=(l&3)<<6|c,t=t+String.fromCharCode(r),l!=64&&i!=0&&(t=t+String.fromCharCode(i)),c!=64&&s!=0&&(t=t+String.fromCharCode(s));return t}class sr{constructor(){this.promise=new sr.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}sr.promiseConstructor=Promise;function hi(n){const e=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}=?$|[a-z0-9_-]{2}(==)?$)$/i,t=n.split(".");if(t.length!==3)throw new Error("JWT is not valid: not a JWT structure");if(!e.test(t[1]))throw new Error("JWT is not valid: payload is not in base64url format");const r=t[1];return JSON.parse(_o(r))}async function vo(n){return await new Promise(e=>{setTimeout(()=>e(null),n)})}function wo(n,e){return new Promise((r,i)=>{(async()=>{for(let s=0;s<1/0;s++)try{const a=await n(s);if(!e(s,null,a)){r(a);return}}catch(a){if(!e(s,a)){i(a);return}}})()})}function yo(n){return("0"+n.toString(16)).substr(-2)}function jt(){const e=new Uint32Array(56);if(typeof crypto>"u"){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=t.length;let i="";for(let s=0;s<56;s++)i+=t.charAt(Math.floor(Math.random()*r));return i}return crypto.getRandomValues(e),Array.from(e,yo).join("")}async function bo(n){const t=new TextEncoder().encode(n),r=await crypto.subtle.digest("SHA-256",t),i=new Uint8Array(r);return Array.from(i).map(s=>String.fromCharCode(s)).join("")}function ko(n){return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function zt(n){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),n;const t=await bo(n);return ko(t)}class qr extends Error{constructor(e,t){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t}}function ae(n){return typeof n=="object"&&n!==null&&"__isAuthError"in n}class Do extends qr{constructor(e,t){super(e,t),this.name="AuthApiError",this.status=t}toJSON(){return{name:this.name,message:this.message,status:this.status}}}function xo(n){return ae(n)&&n.name==="AuthApiError"}class ws extends qr{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class Rt extends qr{constructor(e,t,r){super(e),this.name=t,this.status=r}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class Lt extends Rt{constructor(){super("Auth session missing!","AuthSessionMissingError",400)}}class pr extends Rt{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500)}}class Fn extends Rt{constructor(e){super(e,"AuthInvalidCredentialsError",400)}}class Rn extends Rt{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class fi extends Rt{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Er extends Rt{constructor(e,t){super(e,"AuthRetryableFetchError",t)}}function gr(n){return ae(n)&&n.name==="AuthRetryableFetchError"}class Eo extends Rt{constructor(e,t,r){super(e,"AuthWeakPasswordError",t),this.reasons=r}}var Ao=globalThis&&globalThis.__rest||function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t};const qt=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),Co=[502,503,504];async function di(n){if(!mo(n))throw new Er(qt(n),0);if(Co.includes(n.status))throw new Er(qt(n),n.status);let e;try{e=await n.json()}catch(t){throw new ws(qt(t),t)}throw typeof e=="object"&&e&&typeof e.weak_password=="object"&&e.weak_password&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.reasons.reduce((t,r)=>t&&typeof r=="string",!0)?new Eo(qt(e),n.status,e.weak_password.reasons):new Do(qt(e),n.status||500)}const $o=(n,e,t,r)=>{const i={method:n,headers:(e==null?void 0:e.headers)||{}};return n==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),i.body=JSON.stringify(r),Object.assign(Object.assign({},i),t))};async function ue(n,e,t,r){var i;const s=Object.assign({},r==null?void 0:r.headers);r!=null&&r.jwt&&(s.Authorization=`Bearer ${r.jwt}`);const a=(i=r==null?void 0:r.query)!==null&&i!==void 0?i:{};r!=null&&r.redirectTo&&(a.redirect_to=r.redirectTo);const o=Object.keys(a).length?"?"+new URLSearchParams(a).toString():"",l=await To(n,e,t+o,{headers:s,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(l):{data:Object.assign({},l),error:null}}async function To(n,e,t,r,i,s){const a=$o(e,r,i,s);let o;try{o=await n(t,a)}catch(l){throw console.error(l),new Er(qt(l),0)}if(o.ok||await di(o),r!=null&&r.noResolveJson)return o;try{return await o.json()}catch(l){await di(l)}}function Et(n){var e;let t=null;Io(n)&&(t=Object.assign({},n),n.expires_at||(t.expires_at=po(n.expires_in)));const r=(e=n.user)!==null&&e!==void 0?e:n;return{data:{session:t,user:r},error:null}}function pi(n){const e=Et(n);return!e.error&&n.weak_password&&typeof n.weak_password=="object"&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.message&&typeof n.weak_password.message=="string"&&n.weak_password.reasons.reduce((t,r)=>t&&typeof r=="string",!0)&&(e.data.weak_password=n.weak_password),e}function bt(n){var e;return{data:{user:(e=n.user)!==null&&e!==void 0?e:n},error:null}}function So(n){return{data:n,error:null}}function Fo(n){const{action_link:e,email_otp:t,hashed_token:r,redirect_to:i,verification_type:s}=n,a=Ao(n,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),o={action_link:e,email_otp:t,hashed_token:r,redirect_to:i,verification_type:s},l=Object.assign({},a);return{data:{properties:o,user:l},error:null}}function Ro(n){return n}function Io(n){return n.access_token&&n.refresh_token&&n.expires_in}var Oo=globalThis&&globalThis.__rest||function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t};class Po{constructor({url:e="",headers:t={},fetch:r}){this.url=e,this.headers=t,this.fetch=vs(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,t="global"){try{return await ue(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(ae(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,t={}){try{return await ue(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:bt})}catch(r){if(ae(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:t}=e,r=Oo(e,["options"]),i=Object.assign(Object.assign({},r),t);return"newEmail"in r&&(i.new_email=r==null?void 0:r.newEmail,delete i.newEmail),await ue(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:Fo,redirectTo:t==null?void 0:t.redirectTo})}catch(t){if(ae(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await ue(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:bt})}catch(t){if(ae(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,r,i,s,a,o,l;try{const c={nextPage:null,lastPage:0,total:0},u=await ue(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(t=e==null?void 0:e.page)===null||t===void 0?void 0:t.toString())!==null&&r!==void 0?r:"",per_page:(s=(i=e==null?void 0:e.perPage)===null||i===void 0?void 0:i.toString())!==null&&s!==void 0?s:""},xform:Ro});if(u.error)throw u.error;const f=await u.json(),d=(a=u.headers.get("x-total-count"))!==null&&a!==void 0?a:0,g=(l=(o=u.headers.get("link"))===null||o===void 0?void 0:o.split(","))!==null&&l!==void 0?l:[];return g.length>0&&(g.forEach(v=>{const x=parseInt(v.split(";")[0].split("=")[1].substring(0,1)),D=JSON.parse(v.split(";")[1].split("=")[1]);c[`${D}Page`]=x}),c.total=parseInt(d)),{data:Object.assign(Object.assign({},f),c),error:null}}catch(c){if(ae(c))return{data:{users:[]},error:c};throw c}}async getUserById(e){try{return await ue(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:bt})}catch(t){if(ae(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){try{return await ue(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:bt})}catch(r){if(ae(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,t=!1){try{return await ue(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:bt})}catch(r){if(ae(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){try{const{data:t,error:r}=await ue(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:t,error:r}}catch(t){if(ae(t))return{data:null,error:t};throw t}}async _deleteFactor(e){try{return{data:await ue(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(ae(t))return{data:null,error:t};throw t}}}const ys="0.0.0",Bo="http://localhost:9999",jo="supabase.auth.token",zo={"X-Client-Info":`gotrue-js/${ys}`},gi=10,Lo={getItem:n=>cn()?globalThis.localStorage.getItem(n):null,setItem:(n,e)=>{cn()&&globalThis.localStorage.setItem(n,e)},removeItem:n=>{cn()&&globalThis.localStorage.removeItem(n)}};function mi(n={}){return{getItem:e=>n[e]||null,setItem:(e,t)=>{n[e]=t},removeItem:e=>{delete n[e]}}}function No(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Nt={debug:!!(globalThis&&cn()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class bs extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class Uo extends bs{}async function qo(n,e,t){Nt.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",n,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),Nt.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",n)},e),await globalThis.navigator.locks.request(n,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async i=>{if(i){Nt.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",n,i.name);try{return await t()}finally{Nt.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",n,i.name)}}else{if(e===0)throw Nt.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",n),new Uo(`Acquiring an exclusive Navigator LockManager lock "${n}" immediately failed`);if(Nt.debug)try{const s=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(s,null,"  "))}catch(s){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",s)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await t()}})}No();const Mo={url:Bo,storageKey:jo,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:zo,flowType:"implicit",debug:!1},nn=30*1e3,_i=3;async function vi(n,e,t){return await t()}class dn{constructor(e){var t,r;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=dn.nextInstanceID,dn.nextInstanceID+=1,this.instanceID>0&&rt()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const i=Object.assign(Object.assign({},Mo),e);if(this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.persistSession=i.persistSession,this.storageKey=i.storageKey,this.autoRefreshToken=i.autoRefreshToken,this.admin=new Po({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=vs(i.fetch),this.lock=i.lock||vi,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,i.lock?this.lock=i.lock:rt()&&(!((t=globalThis==null?void 0:globalThis.navigator)===null||t===void 0)&&t.locks)?this.lock=qo:this.lock=vi,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?i.storage?this.storage=i.storage:cn()?this.storage=Lo:(this.memoryStorage={},this.storage=mi(this.memoryStorage)):(this.memoryStorage={},this.storage=mi(this.memoryStorage)),rt()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(s){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",s)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async s=>{this._debug("received broadcast notification from other tab or client",s),await this._notifyAllSubscribers(s.data.event,s.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${ys}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){try{const e=rt()?await this._isPKCEFlow():!1;if(this._debug("#_initialize()","begin","is PKCE flow",e),e||this.detectSessionInUrl&&this._isImplicitGrantFlow()){const{data:t,error:r}=await this._getSessionFromURL(e);if(r)return this._debug("#_initialize()","error detecting session from URL",r),(r==null?void 0:r.message)==="Identity is already linked"||(r==null?void 0:r.message)==="Identity is already linked to another user"?{error:r}:(await this._removeSession(),{error:r});const{session:i,redirectType:s}=t;return this._debug("#_initialize()","detected session in URL",i,"redirect type",s),await this._saveSession(i),setTimeout(async()=>{s==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",i):await this._notifyAllSubscribers("SIGNED_IN",i)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(e){return ae(e)?{error:e}:{error:new ws("Unexpected error during initialization",e)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signUp(e){var t,r,i;try{await this._removeSession();let s;if("email"in e){const{email:u,password:f,options:d}=e;let g=null,v=null;if(this.flowType==="pkce"){const x=jt();await Dt(this.storage,`${this.storageKey}-code-verifier`,x),g=await zt(x),v=x===g?"plain":"s256"}s=await ue(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:d==null?void 0:d.emailRedirectTo,body:{email:u,password:f,data:(t=d==null?void 0:d.data)!==null&&t!==void 0?t:{},gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken},code_challenge:g,code_challenge_method:v},xform:Et})}else if("phone"in e){const{phone:u,password:f,options:d}=e;s=await ue(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:u,password:f,data:(r=d==null?void 0:d.data)!==null&&r!==void 0?r:{},channel:(i=d==null?void 0:d.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken}},xform:Et})}else throw new Fn("You must provide either an email or phone number and a password");const{data:a,error:o}=s;if(o||!a)return{data:{user:null,session:null},error:o};const l=a.session,c=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(s){if(ae(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithPassword(e){try{await this._removeSession();let t;if("email"in e){const{email:s,password:a,options:o}=e;t=await ue(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:s,password:a,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:pi})}else if("phone"in e){const{phone:s,password:a,options:o}=e;t=await ue(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:s,password:a,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:pi})}else throw new Fn("You must provide either an email or phone number and a password");const{data:r,error:i}=t;return i?{data:{user:null,session:null},error:i}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new pr}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:i})}catch(t){if(ae(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOAuth(e){var t,r,i,s;return await this._removeSession(),await this._handleProviderSignIn(e.provider,{redirectTo:(t=e.options)===null||t===void 0?void 0:t.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(i=e.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(s=e.options)===null||s===void 0?void 0:s.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async _exchangeCodeForSession(e){const t=await Sn(this.storage,`${this.storageKey}-code-verifier`),[r,i]=(t??"").split("/"),{data:s,error:a}=await ue(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:Et});return await dr(this.storage,`${this.storageKey}-code-verifier`),a?{data:{user:null,session:null,redirectType:null},error:a}:!s||!s.session||!s.user?{data:{user:null,session:null,redirectType:null},error:new pr}:(s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:Object.assign(Object.assign({},s),{redirectType:i??null}),error:a})}async signInWithIdToken(e){await this._removeSession();try{const{options:t,provider:r,token:i,access_token:s,nonce:a}=e,o=await ue(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:i,access_token:s,nonce:a,gotrue_meta_security:{captcha_token:t==null?void 0:t.captchaToken}},xform:Et}),{data:l,error:c}=o;return c?{data:{user:null,session:null},error:c}:!l||!l.session||!l.user?{data:{user:null,session:null},error:new pr}:(l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),{data:l,error:c})}catch(t){if(ae(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOtp(e){var t,r,i,s,a;try{if(await this._removeSession(),"email"in e){const{email:o,options:l}=e;let c=null,u=null;if(this.flowType==="pkce"){const d=jt();await Dt(this.storage,`${this.storageKey}-code-verifier`,d),c=await zt(d),u=d===c?"plain":"s256"}const{error:f}=await ue(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:o,data:(t=l==null?void 0:l.data)!==null&&t!==void 0?t:{},create_user:(r=l==null?void 0:l.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:c,code_challenge_method:u},redirectTo:l==null?void 0:l.emailRedirectTo});return{data:{user:null,session:null},error:f}}if("phone"in e){const{phone:o,options:l}=e,{data:c,error:u}=await ue(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:o,data:(i=l==null?void 0:l.data)!==null&&i!==void 0?i:{},create_user:(s=l==null?void 0:l.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(a=l==null?void 0:l.channel)!==null&&a!==void 0?a:"sms"}});return{data:{user:null,session:null,messageId:c==null?void 0:c.message_id},error:u}}throw new Fn("You must provide either an email or phone number.")}catch(o){if(ae(o))return{data:{user:null,session:null},error:o};throw o}}async verifyOtp(e){var t,r;try{e.type!=="email_change"&&e.type!=="phone_change"&&await this._removeSession();let i,s;"options"in e&&(i=(t=e.options)===null||t===void 0?void 0:t.redirectTo,s=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:a,error:o}=await ue(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:s}}),redirectTo:i,xform:Et});if(o)throw o;if(!a)throw new Error("An error occurred on token verification.");const l=a.session,c=a.user;return l!=null&&l.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(i){if(ae(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithSSO(e){var t,r,i;try{await this._removeSession();let s=null,a=null;if(this.flowType==="pkce"){const o=jt();await Dt(this.storage,`${this.storageKey}-code-verifier`,o),s=await zt(o),a=o===s?"plain":"s256"}return await ue(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(t=e.options)===null||t===void 0?void 0:t.redirectTo)!==null&&r!==void 0?r:void 0}),!((i=e==null?void 0:e.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:s,code_challenge_method:a}),headers:this.headers,xform:So})}catch(s){if(ae(s))return{data:null,error:s};throw s}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:r}=e;if(r)throw r;if(!t)throw new Lt;const{error:i}=await ue(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:i}})}catch(e){if(ae(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{e.type!="email_change"&&e.type!="phone_change"&&await this._removeSession();const t=`${this.url}/resend`;if("email"in e){const{email:r,type:i,options:s}=e,{error:a}=await ue(this.fetch,"POST",t,{headers:this.headers,body:{email:r,type:i,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},redirectTo:s==null?void 0:s.emailRedirectTo});return{data:{user:null,session:null},error:a}}else if("phone"in e){const{phone:r,type:i,options:s}=e,{data:a,error:o}=await ue(this.fetch,"POST",t,{headers:this.headers,body:{phone:r,type:i,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}}});return{data:{user:null,session:null,messageId:a==null?void 0:a.message_id},error:o}}throw new Fn("You must provide either an email or phone number and a type")}catch(t){if(ae(t))return{data:{user:null,session:null},error:t};throw t}}async getSession(){return await this.initializePromise,this._acquireLock(-1,async()=>this._useSession(async e=>e))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await r,await t()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=t();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const t=await Sn(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),t!==null&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at<=Date.now()/1e3:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r)return{data:{session:e},error:null};const{session:i,error:s}=await this._callRefreshToken(e.refresh_token);return s?{data:{session:null},error:s}:{data:{session:i},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await ue(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:bt}):await this._useSession(async t=>{var r,i;const{data:s,error:a}=t;if(a)throw a;return await ue(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(r=s.session)===null||r===void 0?void 0:r.access_token)!==null&&i!==void 0?i:void 0,xform:bt})})}catch(t){if(ae(t))return{data:{user:null},error:t};throw t}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e,t={}){try{return await this._useSession(async r=>{const{data:i,error:s}=r;if(s)throw s;if(!i.session)throw new Lt;const a=i.session;let o=null,l=null;if(this.flowType==="pkce"&&e.email!=null){const f=jt();await Dt(this.storage,`${this.storageKey}-code-verifier`,f),o=await zt(f),l=f===o?"plain":"s256"}const{data:c,error:u}=await ue(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:t==null?void 0:t.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:o,code_challenge_method:l}),jwt:a.access_token,xform:bt});if(u)throw u;return a.user=c.user,await this._saveSession(a),await this._notifyAllSubscribers("USER_UPDATED",a),{data:{user:a.user},error:null}})}catch(r){if(ae(r))return{data:{user:null},error:r};throw r}}_decodeJWT(e){return hi(e)}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Lt;const t=Date.now()/1e3;let r=t,i=!0,s=null;const a=hi(e.access_token);if(a.exp&&(r=a.exp,i=r<=t),i){const{session:o,error:l}=await this._callRefreshToken(e.refresh_token);if(l)return{data:{user:null,session:null},error:l};if(!o)return{data:{user:null,session:null},error:null};s=o}else{const{data:o,error:l}=await this._getUser(e.access_token);if(l)throw l;s={access_token:e.access_token,refresh_token:e.refresh_token,user:o.user,token_type:"bearer",expires_in:r-t,expires_at:r},await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)}return{data:{user:s.user,session:s},error:null}}catch(t){if(ae(t))return{data:{session:null,user:null},error:t};throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var r;if(!e){const{data:a,error:o}=t;if(o)throw o;e=(r=a.session)!==null&&r!==void 0?r:void 0}if(!(e!=null&&e.refresh_token))throw new Lt;const{session:i,error:s}=await this._callRefreshToken(e.refresh_token);return s?{data:{user:null,session:null},error:s}:i?{data:{user:i.user,session:i},error:null}:{data:{user:null,session:null},error:null}})}catch(t){if(ae(t))return{data:{user:null,session:null},error:t};throw t}}async _getSessionFromURL(e){try{if(!rt())throw new Rn("No browser detected.");if(this.flowType==="implicit"&&!this._isImplicitGrantFlow())throw new Rn("Not a valid implicit grant flow url.");if(this.flowType=="pkce"&&!e)throw new fi("Not a valid PKCE flow url.");const t=fr(window.location.href);if(e){if(!t.code)throw new fi("No code detected.");const{data:S,error:F}=await this._exchangeCodeForSession(t.code);if(F)throw F;const $=new URL(window.location.href);return $.searchParams.delete("code"),window.history.replaceState(window.history.state,"",$.toString()),{data:{session:S.session,redirectType:null},error:null}}if(t.error||t.error_description||t.error_code)throw new Rn(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});const{provider_token:r,provider_refresh_token:i,access_token:s,refresh_token:a,expires_in:o,expires_at:l,token_type:c}=t;if(!s||!o||!a||!c)throw new Rn("No session defined in URL");const u=Math.round(Date.now()/1e3),f=parseInt(o);let d=u+f;l&&(d=parseInt(l));const g=d-u;g*1e3<=nn&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${g}s, should have been closer to ${f}s`);const v=d-f;u-v>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",v,d,u):u-v<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clok for skew",v,d,u);const{data:x,error:D}=await this._getUser(s);if(D)throw D;const E={provider_token:r,provider_refresh_token:i,access_token:s,expires_in:f,expires_at:d,refresh_token:a,token_type:c,user:x.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:E,redirectType:t.type},error:null}}catch(t){if(ae(t))return{data:{session:null,redirectType:null},error:t};throw t}}_isImplicitGrantFlow(){const e=fr(window.location.href);return!!(rt()&&(e.access_token||e.error_description))}async _isPKCEFlow(){const e=fr(window.location.href),t=await Sn(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var r;const{data:i,error:s}=t;if(s)return{error:s};const a=(r=i.session)===null||r===void 0?void 0:r.access_token;if(a){const{error:o}=await this.admin.signOut(a,e);if(o&&!(xo(o)&&(o.status===404||o.status===401)))return{error:o}}return e!=="others"&&(await this._removeSession(),await dr(this.storage,`${this.storageKey}-code-verifier`),await this._notifyAllSubscribers("SIGNED_OUT",null)),{error:null}})}onAuthStateChange(e){const t=go(),r={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async t=>{var r,i;try{const{data:{session:s},error:a}=t;if(a)throw a;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",s)),this._debug("INITIAL_SESSION","callback id",e,"session",s)}catch(s){await((i=this.stateChangeEmitters.get(e))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",s),console.error(s)}})}async resetPasswordForEmail(e,t={}){let r=null,i=null;if(this.flowType==="pkce"){const s=jt();await Dt(this.storage,`${this.storageKey}-code-verifier`,`${s}/PASSWORD_RECOVERY`),r=await zt(s),i=s===r?"plain":"s256"}try{return await ue(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:i,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(s){if(ae(s))return{data:null,error:s};throw s}}async getUserIdentities(){var e;try{const{data:t,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(e=t.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(t){if(ae(t))return{data:null,error:t};throw t}}async linkIdentity(e){var t;try{const{data:r,error:i}=await this._useSession(async s=>{var a,o,l,c,u;const{data:f,error:d}=s;if(d)throw d;const g=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(a=e.options)===null||a===void 0?void 0:a.redirectTo,scopes:(o=e.options)===null||o===void 0?void 0:o.scopes,queryParams:(l=e.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await ue(this.fetch,"GET",g,{headers:this.headers,jwt:(u=(c=f.session)===null||c===void 0?void 0:c.access_token)!==null&&u!==void 0?u:void 0})});if(i)throw i;return rt()&&!(!((t=e.options)===null||t===void 0)&&t.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:e.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(ae(r))return{data:{provider:e.provider,url:null},error:r};throw r}}async unlinkIdentity(e){try{return await this._useSession(async t=>{var r,i;const{data:s,error:a}=t;if(a)throw a;return await ue(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(i=(r=s.session)===null||r===void 0?void 0:r.access_token)!==null&&i!==void 0?i:void 0})})}catch(t){if(ae(t))return{data:null,error:t};throw t}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const r=Date.now();return await wo(async i=>(await vo(i*200),this._debug(t,"refreshing attempt",i),await ue(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Et})),(i,s,a)=>a&&a.error&&gr(a.error)&&Date.now()+(i+1)*200-r<nn)}catch(r){if(this._debug(t,"error",r),ae(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(t,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",r),rt()&&!t.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e;const t="#_recoverAndRefresh()";this._debug(t,"begin");try{const r=await Sn(this.storage,this.storageKey);if(this._debug(t,"session from storage",r),!this._isValidSession(r)){this._debug(t,"session is not valid"),r!==null&&await this._removeSession();return}const i=Math.round(Date.now()/1e3),s=((e=r.expires_at)!==null&&e!==void 0?e:1/0)<i+gi;if(this._debug(t,`session has${s?"":" not"} expired with margin of ${gi}s`),s){if(this.autoRefreshToken&&r.refresh_token){const{error:a}=await this._callRefreshToken(r.refresh_token);a&&(console.error(a),gr(a)||(this._debug(t,"refresh failed with a non-retryable error, removing the session",a),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",r)}catch(r){this._debug(t,"error",r),console.error(r);return}finally{this._debug(t,"end")}}async _callRefreshToken(e){var t,r;if(!e)throw new Lt;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new sr;const{data:s,error:a}=await this._refreshAccessToken(e);if(a)throw a;if(!s.session)throw new Lt;await this._saveSession(s.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",s.session);const o={session:s.session,error:null};return this.refreshingDeferred.resolve(o),o}catch(s){if(this._debug(i,"error",s),ae(s)){const a={session:null,error:s};return gr(s)||(await this._removeSession(),await this._notifyAllSubscribers("SIGNED_OUT",null)),(t=this.refreshingDeferred)===null||t===void 0||t.resolve(a),a}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(s),s}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(e,t,r=!0){const i=`#_notifyAllSubscribers(${e})`;this._debug(i,"begin",t,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:t});const s=[],a=Array.from(this.stateChangeEmitters.values()).map(async o=>{try{await o.callback(e,t)}catch(l){s.push(l)}});if(await Promise.all(a),s.length>0){for(let o=0;o<s.length;o+=1)console.error(s[o]);throw s[0]}}finally{this._debug(i,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),await Dt(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await dr(this.storage,this.storageKey)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&rt()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),nn);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async t=>{const{data:{session:r}}=t;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((r.expires_at*1e3-e)/nn);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${nn}ms, refresh threshold is ${_i} ticks`),i<=_i&&await this._callRefreshToken(r.refresh_token)})}catch(t){console.error("Auto refresh tick failed with error. This is likely a transient error.",t)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof bs)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!rt()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,r){const i=[`provider=${encodeURIComponent(t)}`];if(r!=null&&r.redirectTo&&i.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&i.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const s=jt();await Dt(this.storage,`${this.storageKey}-code-verifier`,s);const a=await zt(s),o=s===a?"plain":"s256";this._debug("PKCE","code verifier",`${s.substring(0,5)}...`,"code challenge",a,"method",o);const l=new URLSearchParams({code_challenge:`${encodeURIComponent(a)}`,code_challenge_method:`${encodeURIComponent(o)}`});i.push(l.toString())}if(r!=null&&r.queryParams){const s=new URLSearchParams(r.queryParams);i.push(s.toString())}return r!=null&&r.skipBrowserRedirect&&i.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${i.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var r;const{data:i,error:s}=t;return s?{data:null,error:s}:await ue(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token})})}catch(t){if(ae(t))return{data:null,error:t};throw t}}async _enroll(e){try{return await this._useSession(async t=>{var r,i;const{data:s,error:a}=t;if(a)return{data:null,error:a};const{data:o,error:l}=await ue(this.fetch,"POST",`${this.url}/factors`,{body:{friendly_name:e.friendlyName,factor_type:e.factorType,issuer:e.issuer},headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});return l?{data:null,error:l}:(!((i=o==null?void 0:o.totp)===null||i===void 0)&&i.qr_code&&(o.totp.qr_code=`data:image/svg+xml;utf-8,${o.totp.qr_code}`),{data:o,error:null})})}catch(t){if(ae(t))return{data:null,error:t};throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var r;const{data:i,error:s}=t;if(s)return{data:null,error:s};const{data:a,error:o}=await ue(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return o?{data:null,error:o}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+a.expires_in},a)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",a),{data:a,error:o})})}catch(t){if(ae(t))return{data:null,error:t};throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var r;const{data:i,error:s}=t;return s?{data:null,error:s}:await ue(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token})})}catch(t){if(ae(t))return{data:null,error:t};throw t}})}async _challengeAndVerify(e){const{data:t,error:r}=await this._challenge({factorId:e.factorId});return r?{data:null,error:r}:await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){const{data:{user:e},error:t}=await this.getUser();if(t)return{data:null,error:t};const r=(e==null?void 0:e.factors)||[],i=r.filter(s=>s.factor_type==="totp"&&s.status==="verified");return{data:{all:r,totp:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var t,r;const{data:{session:i},error:s}=e;if(s)return{data:null,error:s};if(!i)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const a=this._decodeJWT(i.access_token);let o=null;a.aal&&(o=a.aal);let l=o;((r=(t=i.user.factors)===null||t===void 0?void 0:t.filter(f=>f.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(l="aal2");const u=a.amr||[];return{data:{currentLevel:o,nextLevel:l,currentAuthenticationMethods:u},error:null}}))}}dn.nextInstanceID=0;class Vo extends dn{constructor(e){super(e)}}var Ho=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function o(u){try{c(r.next(u))}catch(f){a(f)}}function l(u){try{c(r.throw(u))}catch(f){a(f)}}function c(u){u.done?s(u.value):i(u.value).then(o,l)}c((r=r.apply(n,e||[])).next())})};const Jo={headers:ao},Ko={schema:"public"},Go={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Zo={};class Wo{constructor(e,t,r){var i,s,a,o,l,c,u,f;if(this.supabaseUrl=e,this.supabaseKey=t,this.from=D=>this.rest.from(D),this.schema=D=>this.rest.schema(D),this.rpc=(D,E={},S)=>this.rest.rpc(D,E,S),!e)throw new Error("supabaseUrl is required.");if(!t)throw new Error("supabaseKey is required.");const d=ho(e);this.realtimeUrl=`${d}/realtime/v1`.replace(/^http/i,"ws"),this.authUrl=`${d}/auth/v1`,this.storageUrl=`${d}/storage/v1`,this.functionsUrl=`${d}/functions/v1`;const g=`sb-${new URL(this.authUrl).hostname.split(".")[0]}-auth-token`,v={db:Ko,realtime:Zo,auth:Object.assign(Object.assign({},Go),{storageKey:g}),global:Jo},x=fo(r??{},v);this.storageKey=(s=(i=x.auth)===null||i===void 0?void 0:i.storageKey)!==null&&s!==void 0?s:"",this.headers=(o=(a=x.global)===null||a===void 0?void 0:a.headers)!==null&&o!==void 0?o:{},this.auth=this._initSupabaseAuthClient((l=x.auth)!==null&&l!==void 0?l:{},this.headers,(c=x.global)===null||c===void 0?void 0:c.fetch),this.fetch=co(t,this._getAccessToken.bind(this),(u=x.global)===null||u===void 0?void 0:u.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers},x.realtime)),this.rest=new Lr(`${d}/rest/v1`,{headers:this.headers,schema:(f=x.db)===null||f===void 0?void 0:f.schema,fetch:this.fetch}),this._listenForAuthEvents()}get functions(){return new ba(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new io(this.storageUrl,this.headers,this.fetch)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,t;return Ho(this,void 0,void 0,function*(){const{data:r}=yield this.auth.getSession();return(t=(e=r.session)===null||e===void 0?void 0:e.access_token)!==null&&t!==void 0?t:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:i,storageKey:s,flowType:a,debug:o},l,c){const u={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Vo({url:this.authUrl,headers:Object.assign(Object.assign({},u),l),storageKey:s,autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:i,flowType:a,debug:o,fetch:c})}_initRealtimeClient(e){return new Ha(this.realtimeUrl,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,r)=>{this._handleTokenChanged(t,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(e,t,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?(this.realtime.setAuth(r??null),this.changedAccessToken=r):e==="SIGNED_OUT"&&(this.realtime.setAuth(this.supabaseKey),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const Xo=(n,e,t)=>new Wo(n,e,t),Qo=Xo("https://osgtqsmepllndsgnjivx.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im9zZ3Rxc21lcGxsbmRzZ25qaXZ4Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3MDc2NzYwODEsImV4cCI6MjAyMzI1MjA4MX0.pirbm6q-XHLXhyGrzEaaHN_RaRW2AyS3hMRy-qFpajo");var Yo={value:()=>{}};function ks(){for(var n=0,e=arguments.length,t={},r;n<e;++n){if(!(r=arguments[n]+"")||r in t||/[\s.]/.test(r))throw new Error("illegal type: "+r);t[r]=[]}return new zn(t)}function zn(n){this._=n}function el(n,e){return n.trim().split(/^|\s+/).map(function(t){var r="",i=t.indexOf(".");if(i>=0&&(r=t.slice(i+1),t=t.slice(0,i)),t&&!e.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:r}})}zn.prototype=ks.prototype={constructor:zn,on:function(n,e){var t=this._,r=el(n+"",t),i,s=-1,a=r.length;if(arguments.length<2){for(;++s<a;)if((i=(n=r[s]).type)&&(i=tl(t[i],n.name)))return i;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++s<a;)if(i=(n=r[s]).type)t[i]=wi(t[i],n.name,e);else if(e==null)for(i in t)t[i]=wi(t[i],n.name,null);return this},copy:function(){var n={},e=this._;for(var t in e)n[t]=e[t].slice();return new zn(n)},call:function(n,e){if((i=arguments.length-2)>0)for(var t=new Array(i),r=0,i,s;r<i;++r)t[r]=arguments[r+2];if(!this._.hasOwnProperty(n))throw new Error("unknown type: "+n);for(s=this._[n],r=0,i=s.length;r<i;++r)s[r].value.apply(e,t)},apply:function(n,e,t){if(!this._.hasOwnProperty(n))throw new Error("unknown type: "+n);for(var r=this._[n],i=0,s=r.length;i<s;++i)r[i].value.apply(e,t)}};function tl(n,e){for(var t=0,r=n.length,i;t<r;++t)if((i=n[t]).name===e)return i.value}function wi(n,e,t){for(var r=0,i=n.length;r<i;++r)if(n[r].name===e){n[r]=Yo,n=n.slice(0,r).concat(n.slice(r+1));break}return t!=null&&n.push({name:e,value:t}),n}var Ar="http://www.w3.org/1999/xhtml";const yi={svg:"http://www.w3.org/2000/svg",xhtml:Ar,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function ar(n){var e=n+="",t=e.indexOf(":");return t>=0&&(e=n.slice(0,t))!=="xmlns"&&(n=n.slice(t+1)),yi.hasOwnProperty(e)?{space:yi[e],local:n}:n}function nl(n){return function(){var e=this.ownerDocument,t=this.namespaceURI;return t===Ar&&e.documentElement.namespaceURI===Ar?e.createElement(n):e.createElementNS(t,n)}}function rl(n){return function(){return this.ownerDocument.createElementNS(n.space,n.local)}}function Ds(n){var e=ar(n);return(e.local?rl:nl)(e)}function il(){}function Mr(n){return n==null?il:function(){return this.querySelector(n)}}function sl(n){typeof n!="function"&&(n=Mr(n));for(var e=this._groups,t=e.length,r=new Array(t),i=0;i<t;++i)for(var s=e[i],a=s.length,o=r[i]=new Array(a),l,c,u=0;u<a;++u)(l=s[u])&&(c=n.call(l,l.__data__,u,s))&&("__data__"in l&&(c.__data__=l.__data__),o[u]=c);return new Xe(r,this._parents)}function al(n){return n==null?[]:Array.isArray(n)?n:Array.from(n)}function ol(){return[]}function xs(n){return n==null?ol:function(){return this.querySelectorAll(n)}}function ll(n){return function(){return al(n.apply(this,arguments))}}function ul(n){typeof n=="function"?n=ll(n):n=xs(n);for(var e=this._groups,t=e.length,r=[],i=[],s=0;s<t;++s)for(var a=e[s],o=a.length,l,c=0;c<o;++c)(l=a[c])&&(r.push(n.call(l,l.__data__,c,a)),i.push(l));return new Xe(r,i)}function Es(n){return function(){return this.matches(n)}}function As(n){return function(e){return e.matches(n)}}var cl=Array.prototype.find;function hl(n){return function(){return cl.call(this.children,n)}}function fl(){return this.firstElementChild}function dl(n){return this.select(n==null?fl:hl(typeof n=="function"?n:As(n)))}var pl=Array.prototype.filter;function gl(){return Array.from(this.children)}function ml(n){return function(){return pl.call(this.children,n)}}function _l(n){return this.selectAll(n==null?gl:ml(typeof n=="function"?n:As(n)))}function vl(n){typeof n!="function"&&(n=Es(n));for(var e=this._groups,t=e.length,r=new Array(t),i=0;i<t;++i)for(var s=e[i],a=s.length,o=r[i]=[],l,c=0;c<a;++c)(l=s[c])&&n.call(l,l.__data__,c,s)&&o.push(l);return new Xe(r,this._parents)}function Cs(n){return new Array(n.length)}function wl(){return new Xe(this._enter||this._groups.map(Cs),this._parents)}function Mn(n,e){this.ownerDocument=n.ownerDocument,this.namespaceURI=n.namespaceURI,this._next=null,this._parent=n,this.__data__=e}Mn.prototype={constructor:Mn,appendChild:function(n){return this._parent.insertBefore(n,this._next)},insertBefore:function(n,e){return this._parent.insertBefore(n,e)},querySelector:function(n){return this._parent.querySelector(n)},querySelectorAll:function(n){return this._parent.querySelectorAll(n)}};function yl(n){return function(){return n}}function bl(n,e,t,r,i,s){for(var a=0,o,l=e.length,c=s.length;a<c;++a)(o=e[a])?(o.__data__=s[a],r[a]=o):t[a]=new Mn(n,s[a]);for(;a<l;++a)(o=e[a])&&(i[a]=o)}function kl(n,e,t,r,i,s,a){var o,l,c=new Map,u=e.length,f=s.length,d=new Array(u),g;for(o=0;o<u;++o)(l=e[o])&&(d[o]=g=a.call(l,l.__data__,o,e)+"",c.has(g)?i[o]=l:c.set(g,l));for(o=0;o<f;++o)g=a.call(n,s[o],o,s)+"",(l=c.get(g))?(r[o]=l,l.__data__=s[o],c.delete(g)):t[o]=new Mn(n,s[o]);for(o=0;o<u;++o)(l=e[o])&&c.get(d[o])===l&&(i[o]=l)}function Dl(n){return n.__data__}function xl(n,e){if(!arguments.length)return Array.from(this,Dl);var t=e?kl:bl,r=this._parents,i=this._groups;typeof n!="function"&&(n=yl(n));for(var s=i.length,a=new Array(s),o=new Array(s),l=new Array(s),c=0;c<s;++c){var u=r[c],f=i[c],d=f.length,g=El(n.call(u,u&&u.__data__,c,r)),v=g.length,x=o[c]=new Array(v),D=a[c]=new Array(v),E=l[c]=new Array(d);t(u,f,x,D,E,g,e);for(var S=0,F=0,$,T;S<v;++S)if($=x[S]){for(S>=F&&(F=S+1);!(T=D[F])&&++F<v;);$._next=T||null}}return a=new Xe(a,r),a._enter=o,a._exit=l,a}function El(n){return typeof n=="object"&&"length"in n?n:Array.from(n)}function Al(){return new Xe(this._exit||this._groups.map(Cs),this._parents)}function Cl(n,e,t){var r=this.enter(),i=this,s=this.exit();return typeof n=="function"?(r=n(r),r&&(r=r.selection())):r=r.append(n+""),e!=null&&(i=e(i),i&&(i=i.selection())),t==null?s.remove():t(s),r&&i?r.merge(i).order():i}function $l(n){for(var e=n.selection?n.selection():n,t=this._groups,r=e._groups,i=t.length,s=r.length,a=Math.min(i,s),o=new Array(i),l=0;l<a;++l)for(var c=t[l],u=r[l],f=c.length,d=o[l]=new Array(f),g,v=0;v<f;++v)(g=c[v]||u[v])&&(d[v]=g);for(;l<i;++l)o[l]=t[l];return new Xe(o,this._parents)}function Tl(){for(var n=this._groups,e=-1,t=n.length;++e<t;)for(var r=n[e],i=r.length-1,s=r[i],a;--i>=0;)(a=r[i])&&(s&&a.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(a,s),s=a);return this}function Sl(n){n||(n=Fl);function e(f,d){return f&&d?n(f.__data__,d.__data__):!f-!d}for(var t=this._groups,r=t.length,i=new Array(r),s=0;s<r;++s){for(var a=t[s],o=a.length,l=i[s]=new Array(o),c,u=0;u<o;++u)(c=a[u])&&(l[u]=c);l.sort(e)}return new Xe(i,this._parents).order()}function Fl(n,e){return n<e?-1:n>e?1:n>=e?0:NaN}function Rl(){var n=arguments[0];return arguments[0]=this,n.apply(null,arguments),this}function Il(){return Array.from(this)}function Ol(){for(var n=this._groups,e=0,t=n.length;e<t;++e)for(var r=n[e],i=0,s=r.length;i<s;++i){var a=r[i];if(a)return a}return null}function Pl(){let n=0;for(const e of this)++n;return n}function Bl(){return!this.node()}function jl(n){for(var e=this._groups,t=0,r=e.length;t<r;++t)for(var i=e[t],s=0,a=i.length,o;s<a;++s)(o=i[s])&&n.call(o,o.__data__,s,i);return this}function zl(n){return function(){this.removeAttribute(n)}}function Ll(n){return function(){this.removeAttributeNS(n.space,n.local)}}function Nl(n,e){return function(){this.setAttribute(n,e)}}function Ul(n,e){return function(){this.setAttributeNS(n.space,n.local,e)}}function ql(n,e){return function(){var t=e.apply(this,arguments);t==null?this.removeAttribute(n):this.setAttribute(n,t)}}function Ml(n,e){return function(){var t=e.apply(this,arguments);t==null?this.removeAttributeNS(n.space,n.local):this.setAttributeNS(n.space,n.local,t)}}function Vl(n,e){var t=ar(n);if(arguments.length<2){var r=this.node();return t.local?r.getAttributeNS(t.space,t.local):r.getAttribute(t)}return this.each((e==null?t.local?Ll:zl:typeof e=="function"?t.local?Ml:ql:t.local?Ul:Nl)(t,e))}function $s(n){return n.ownerDocument&&n.ownerDocument.defaultView||n.document&&n||n.defaultView}function Hl(n){return function(){this.style.removeProperty(n)}}function Jl(n,e,t){return function(){this.style.setProperty(n,e,t)}}function Kl(n,e,t){return function(){var r=e.apply(this,arguments);r==null?this.style.removeProperty(n):this.style.setProperty(n,r,t)}}function Gl(n,e,t){return arguments.length>1?this.each((e==null?Hl:typeof e=="function"?Kl:Jl)(n,e,t??"")):Gt(this.node(),n)}function Gt(n,e){return n.style.getPropertyValue(e)||$s(n).getComputedStyle(n,null).getPropertyValue(e)}function Zl(n){return function(){delete this[n]}}function Wl(n,e){return function(){this[n]=e}}function Xl(n,e){return function(){var t=e.apply(this,arguments);t==null?delete this[n]:this[n]=t}}function Ql(n,e){return arguments.length>1?this.each((e==null?Zl:typeof e=="function"?Xl:Wl)(n,e)):this.node()[n]}function Ts(n){return n.trim().split(/^|\s+/)}function Vr(n){return n.classList||new Ss(n)}function Ss(n){this._node=n,this._names=Ts(n.getAttribute("class")||"")}Ss.prototype={add:function(n){var e=this._names.indexOf(n);e<0&&(this._names.push(n),this._node.setAttribute("class",this._names.join(" ")))},remove:function(n){var e=this._names.indexOf(n);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(n){return this._names.indexOf(n)>=0}};function Fs(n,e){for(var t=Vr(n),r=-1,i=e.length;++r<i;)t.add(e[r])}function Rs(n,e){for(var t=Vr(n),r=-1,i=e.length;++r<i;)t.remove(e[r])}function Yl(n){return function(){Fs(this,n)}}function eu(n){return function(){Rs(this,n)}}function tu(n,e){return function(){(e.apply(this,arguments)?Fs:Rs)(this,n)}}function nu(n,e){var t=Ts(n+"");if(arguments.length<2){for(var r=Vr(this.node()),i=-1,s=t.length;++i<s;)if(!r.contains(t[i]))return!1;return!0}return this.each((typeof e=="function"?tu:e?Yl:eu)(t,e))}function ru(){this.textContent=""}function iu(n){return function(){this.textContent=n}}function su(n){return function(){var e=n.apply(this,arguments);this.textContent=e??""}}function au(n){return arguments.length?this.each(n==null?ru:(typeof n=="function"?su:iu)(n)):this.node().textContent}function ou(){this.innerHTML=""}function lu(n){return function(){this.innerHTML=n}}function uu(n){return function(){var e=n.apply(this,arguments);this.innerHTML=e??""}}function cu(n){return arguments.length?this.each(n==null?ou:(typeof n=="function"?uu:lu)(n)):this.node().innerHTML}function hu(){this.nextSibling&&this.parentNode.appendChild(this)}function fu(){return this.each(hu)}function du(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function pu(){return this.each(du)}function gu(n){var e=typeof n=="function"?n:Ds(n);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function mu(){return null}function _u(n,e){var t=typeof n=="function"?n:Ds(n),r=e==null?mu:typeof e=="function"?e:Mr(e);return this.select(function(){return this.insertBefore(t.apply(this,arguments),r.apply(this,arguments)||null)})}function vu(){var n=this.parentNode;n&&n.removeChild(this)}function wu(){return this.each(vu)}function yu(){var n=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(n,this.nextSibling):n}function bu(){var n=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(n,this.nextSibling):n}function ku(n){return this.select(n?bu:yu)}function Du(n){return arguments.length?this.property("__data__",n):this.node().__data__}function xu(n){return function(e){n.call(this,e,this.__data__)}}function Eu(n){return n.trim().split(/^|\s+/).map(function(e){var t="",r=e.indexOf(".");return r>=0&&(t=e.slice(r+1),e=e.slice(0,r)),{type:e,name:t}})}function Au(n){return function(){var e=this.__on;if(e){for(var t=0,r=-1,i=e.length,s;t<i;++t)s=e[t],(!n.type||s.type===n.type)&&s.name===n.name?this.removeEventListener(s.type,s.listener,s.options):e[++r]=s;++r?e.length=r:delete this.__on}}}function Cu(n,e,t){return function(){var r=this.__on,i,s=xu(e);if(r){for(var a=0,o=r.length;a<o;++a)if((i=r[a]).type===n.type&&i.name===n.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=s,i.options=t),i.value=e;return}}this.addEventListener(n.type,s,t),i={type:n.type,name:n.name,value:e,listener:s,options:t},r?r.push(i):this.__on=[i]}}function $u(n,e,t){var r=Eu(n+""),i,s=r.length,a;if(arguments.length<2){var o=this.node().__on;if(o){for(var l=0,c=o.length,u;l<c;++l)for(i=0,u=o[l];i<s;++i)if((a=r[i]).type===u.type&&a.name===u.name)return u.value}return}for(o=e?Cu:Au,i=0;i<s;++i)this.each(o(r[i],e,t));return this}function Is(n,e,t){var r=$s(n),i=r.CustomEvent;typeof i=="function"?i=new i(e,t):(i=r.document.createEvent("Event"),t?(i.initEvent(e,t.bubbles,t.cancelable),i.detail=t.detail):i.initEvent(e,!1,!1)),n.dispatchEvent(i)}function Tu(n,e){return function(){return Is(this,n,e)}}function Su(n,e){return function(){return Is(this,n,e.apply(this,arguments))}}function Fu(n,e){return this.each((typeof e=="function"?Su:Tu)(n,e))}function*Ru(){for(var n=this._groups,e=0,t=n.length;e<t;++e)for(var r=n[e],i=0,s=r.length,a;i<s;++i)(a=r[i])&&(yield a)}var Os=[null];function Xe(n,e){this._groups=n,this._parents=e}function bn(){return new Xe([[document.documentElement]],Os)}function Iu(){return this}Xe.prototype=bn.prototype={constructor:Xe,select:sl,selectAll:ul,selectChild:dl,selectChildren:_l,filter:vl,data:xl,enter:wl,exit:Al,join:Cl,merge:$l,selection:Iu,order:Tl,sort:Sl,call:Rl,nodes:Il,node:Ol,size:Pl,empty:Bl,each:jl,attr:Vl,style:Gl,property:Ql,classed:nu,text:au,html:cu,raise:fu,lower:pu,append:gu,insert:_u,remove:wu,clone:ku,datum:Du,on:$u,dispatch:Fu,[Symbol.iterator]:Ru};function bi(n){return typeof n=="string"?new Xe([[document.querySelector(n)]],[document.documentElement]):new Xe([[n]],Os)}function Hr(n,e,t){n.prototype=e.prototype=t,t.constructor=n}function Ps(n,e){var t=Object.create(n.prototype);for(var r in e)t[r]=e[r];return t}function kn(){}var pn=.7,Vn=1/pn,Ht="\\s*([+-]?\\d+)\\s*",gn="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",ft="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Ou=/^#([0-9a-f]{3,8})$/,Pu=new RegExp(`^rgb\\(${Ht},${Ht},${Ht}\\)$`),Bu=new RegExp(`^rgb\\(${ft},${ft},${ft}\\)$`),ju=new RegExp(`^rgba\\(${Ht},${Ht},${Ht},${gn}\\)$`),zu=new RegExp(`^rgba\\(${ft},${ft},${ft},${gn}\\)$`),Lu=new RegExp(`^hsl\\(${gn},${ft},${ft}\\)$`),Nu=new RegExp(`^hsla\\(${gn},${ft},${ft},${gn}\\)$`),ki={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Hr(kn,mn,{copy(n){return Object.assign(new this.constructor,this,n)},displayable(){return this.rgb().displayable()},hex:Di,formatHex:Di,formatHex8:Uu,formatHsl:qu,formatRgb:xi,toString:xi});function Di(){return this.rgb().formatHex()}function Uu(){return this.rgb().formatHex8()}function qu(){return Bs(this).formatHsl()}function xi(){return this.rgb().formatRgb()}function mn(n){var e,t;return n=(n+"").trim().toLowerCase(),(e=Ou.exec(n))?(t=e[1].length,e=parseInt(e[1],16),t===6?Ei(e):t===3?new Je(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):t===8?In(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):t===4?In(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=Pu.exec(n))?new Je(e[1],e[2],e[3],1):(e=Bu.exec(n))?new Je(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=ju.exec(n))?In(e[1],e[2],e[3],e[4]):(e=zu.exec(n))?In(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=Lu.exec(n))?$i(e[1],e[2]/100,e[3]/100,1):(e=Nu.exec(n))?$i(e[1],e[2]/100,e[3]/100,e[4]):ki.hasOwnProperty(n)?Ei(ki[n]):n==="transparent"?new Je(NaN,NaN,NaN,0):null}function Ei(n){return new Je(n>>16&255,n>>8&255,n&255,1)}function In(n,e,t,r){return r<=0&&(n=e=t=NaN),new Je(n,e,t,r)}function Mu(n){return n instanceof kn||(n=mn(n)),n?(n=n.rgb(),new Je(n.r,n.g,n.b,n.opacity)):new Je}function Cr(n,e,t,r){return arguments.length===1?Mu(n):new Je(n,e,t,r??1)}function Je(n,e,t,r){this.r=+n,this.g=+e,this.b=+t,this.opacity=+r}Hr(Je,Cr,Ps(kn,{brighter(n){return n=n==null?Vn:Math.pow(Vn,n),new Je(this.r*n,this.g*n,this.b*n,this.opacity)},darker(n){return n=n==null?pn:Math.pow(pn,n),new Je(this.r*n,this.g*n,this.b*n,this.opacity)},rgb(){return this},clamp(){return new Je(Tt(this.r),Tt(this.g),Tt(this.b),Hn(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Ai,formatHex:Ai,formatHex8:Vu,formatRgb:Ci,toString:Ci}));function Ai(){return`#${$t(this.r)}${$t(this.g)}${$t(this.b)}`}function Vu(){return`#${$t(this.r)}${$t(this.g)}${$t(this.b)}${$t((isNaN(this.opacity)?1:this.opacity)*255)}`}function Ci(){const n=Hn(this.opacity);return`${n===1?"rgb(":"rgba("}${Tt(this.r)}, ${Tt(this.g)}, ${Tt(this.b)}${n===1?")":`, ${n})`}`}function Hn(n){return isNaN(n)?1:Math.max(0,Math.min(1,n))}function Tt(n){return Math.max(0,Math.min(255,Math.round(n)||0))}function $t(n){return n=Tt(n),(n<16?"0":"")+n.toString(16)}function $i(n,e,t,r){return r<=0?n=e=t=NaN:t<=0||t>=1?n=e=NaN:e<=0&&(n=NaN),new st(n,e,t,r)}function Bs(n){if(n instanceof st)return new st(n.h,n.s,n.l,n.opacity);if(n instanceof kn||(n=mn(n)),!n)return new st;if(n instanceof st)return n;n=n.rgb();var e=n.r/255,t=n.g/255,r=n.b/255,i=Math.min(e,t,r),s=Math.max(e,t,r),a=NaN,o=s-i,l=(s+i)/2;return o?(e===s?a=(t-r)/o+(t<r)*6:t===s?a=(r-e)/o+2:a=(e-t)/o+4,o/=l<.5?s+i:2-s-i,a*=60):o=l>0&&l<1?0:a,new st(a,o,l,n.opacity)}function Hu(n,e,t,r){return arguments.length===1?Bs(n):new st(n,e,t,r??1)}function st(n,e,t,r){this.h=+n,this.s=+e,this.l=+t,this.opacity=+r}Hr(st,Hu,Ps(kn,{brighter(n){return n=n==null?Vn:Math.pow(Vn,n),new st(this.h,this.s,this.l*n,this.opacity)},darker(n){return n=n==null?pn:Math.pow(pn,n),new st(this.h,this.s,this.l*n,this.opacity)},rgb(){var n=this.h%360+(this.h<0)*360,e=isNaN(n)||isNaN(this.s)?0:this.s,t=this.l,r=t+(t<.5?t:1-t)*e,i=2*t-r;return new Je(mr(n>=240?n-240:n+120,i,r),mr(n,i,r),mr(n<120?n+240:n-120,i,r),this.opacity)},clamp(){return new st(Ti(this.h),On(this.s),On(this.l),Hn(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const n=Hn(this.opacity);return`${n===1?"hsl(":"hsla("}${Ti(this.h)}, ${On(this.s)*100}%, ${On(this.l)*100}%${n===1?")":`, ${n})`}`}}));function Ti(n){return n=(n||0)%360,n<0?n+360:n}function On(n){return Math.max(0,Math.min(1,n||0))}function mr(n,e,t){return(n<60?e+(t-e)*n/60:n<180?t:n<240?e+(t-e)*(240-n)/60:e)*255}const js=n=>()=>n;function Ju(n,e){return function(t){return n+t*e}}function Ku(n,e,t){return n=Math.pow(n,t),e=Math.pow(e,t)-n,t=1/t,function(r){return Math.pow(n+r*e,t)}}function Gu(n){return(n=+n)==1?zs:function(e,t){return t-e?Ku(e,t,n):js(isNaN(e)?t:e)}}function zs(n,e){var t=e-n;return t?Ju(n,t):js(isNaN(n)?e:n)}const Si=function n(e){var t=Gu(e);function r(i,s){var a=t((i=Cr(i)).r,(s=Cr(s)).r),o=t(i.g,s.g),l=t(i.b,s.b),c=zs(i.opacity,s.opacity);return function(u){return i.r=a(u),i.g=o(u),i.b=l(u),i.opacity=c(u),i+""}}return r.gamma=n,r}(1);function yt(n,e){return n=+n,e=+e,function(t){return n*(1-t)+e*t}}var $r=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,_r=new RegExp($r.source,"g");function Zu(n){return function(){return n}}function Wu(n){return function(e){return n(e)+""}}function Xu(n,e){var t=$r.lastIndex=_r.lastIndex=0,r,i,s,a=-1,o=[],l=[];for(n=n+"",e=e+"";(r=$r.exec(n))&&(i=_r.exec(e));)(s=i.index)>t&&(s=e.slice(t,s),o[a]?o[a]+=s:o[++a]=s),(r=r[0])===(i=i[0])?o[a]?o[a]+=i:o[++a]=i:(o[++a]=null,l.push({i:a,x:yt(r,i)})),t=_r.lastIndex;return t<e.length&&(s=e.slice(t),o[a]?o[a]+=s:o[++a]=s),o.length<2?l[0]?Wu(l[0].x):Zu(e):(e=l.length,function(c){for(var u=0,f;u<e;++u)o[(f=l[u]).i]=f.x(c);return o.join("")})}var Fi=180/Math.PI,Tr={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Ls(n,e,t,r,i,s){var a,o,l;return(a=Math.sqrt(n*n+e*e))&&(n/=a,e/=a),(l=n*t+e*r)&&(t-=n*l,r-=e*l),(o=Math.sqrt(t*t+r*r))&&(t/=o,r/=o,l/=o),n*r<e*t&&(n=-n,e=-e,l=-l,a=-a),{translateX:i,translateY:s,rotate:Math.atan2(e,n)*Fi,skewX:Math.atan(l)*Fi,scaleX:a,scaleY:o}}var Pn;function Qu(n){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(n+"");return e.isIdentity?Tr:Ls(e.a,e.b,e.c,e.d,e.e,e.f)}function Yu(n){return n==null||(Pn||(Pn=document.createElementNS("http://www.w3.org/2000/svg","g")),Pn.setAttribute("transform",n),!(n=Pn.transform.baseVal.consolidate()))?Tr:(n=n.matrix,Ls(n.a,n.b,n.c,n.d,n.e,n.f))}function Ns(n,e,t,r){function i(c){return c.length?c.pop()+" ":""}function s(c,u,f,d,g,v){if(c!==f||u!==d){var x=g.push("translate(",null,e,null,t);v.push({i:x-4,x:yt(c,f)},{i:x-2,x:yt(u,d)})}else(f||d)&&g.push("translate("+f+e+d+t)}function a(c,u,f,d){c!==u?(c-u>180?u+=360:u-c>180&&(c+=360),d.push({i:f.push(i(f)+"rotate(",null,r)-2,x:yt(c,u)})):u&&f.push(i(f)+"rotate("+u+r)}function o(c,u,f,d){c!==u?d.push({i:f.push(i(f)+"skewX(",null,r)-2,x:yt(c,u)}):u&&f.push(i(f)+"skewX("+u+r)}function l(c,u,f,d,g,v){if(c!==f||u!==d){var x=g.push(i(g)+"scale(",null,",",null,")");v.push({i:x-4,x:yt(c,f)},{i:x-2,x:yt(u,d)})}else(f!==1||d!==1)&&g.push(i(g)+"scale("+f+","+d+")")}return function(c,u){var f=[],d=[];return c=n(c),u=n(u),s(c.translateX,c.translateY,u.translateX,u.translateY,f,d),a(c.rotate,u.rotate,f,d),o(c.skewX,u.skewX,f,d),l(c.scaleX,c.scaleY,u.scaleX,u.scaleY,f,d),c=u=null,function(g){for(var v=-1,x=d.length,D;++v<x;)f[(D=d[v]).i]=D.x(g);return f.join("")}}}var ec=Ns(Qu,"px, ","px)","deg)"),tc=Ns(Yu,", ",")",")"),Zt=0,an=0,rn=0,Us=1e3,Jn,on,Kn=0,St=0,or=0,_n=typeof performance=="object"&&performance.now?performance:Date,qs=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(n){setTimeout(n,17)};function Jr(){return St||(qs(nc),St=_n.now()+or)}function nc(){St=0}function Gn(){this._call=this._time=this._next=null}Gn.prototype=Ms.prototype={constructor:Gn,restart:function(n,e,t){if(typeof n!="function")throw new TypeError("callback is not a function");t=(t==null?Jr():+t)+(e==null?0:+e),!this._next&&on!==this&&(on?on._next=this:Jn=this,on=this),this._call=n,this._time=t,Sr()},stop:function(){this._call&&(this._call=null,this._time=1/0,Sr())}};function Ms(n,e,t){var r=new Gn;return r.restart(n,e,t),r}function rc(){Jr(),++Zt;for(var n=Jn,e;n;)(e=St-n._time)>=0&&n._call.call(void 0,e),n=n._next;--Zt}function Ri(){St=(Kn=_n.now())+or,Zt=an=0;try{rc()}finally{Zt=0,sc(),St=0}}function ic(){var n=_n.now(),e=n-Kn;e>Us&&(or-=e,Kn=n)}function sc(){for(var n,e=Jn,t,r=1/0;e;)e._call?(r>e._time&&(r=e._time),n=e,e=e._next):(t=e._next,e._next=null,e=n?n._next=t:Jn=t);on=n,Sr(r)}function Sr(n){if(!Zt){an&&(an=clearTimeout(an));var e=n-St;e>24?(n<1/0&&(an=setTimeout(Ri,n-_n.now()-or)),rn&&(rn=clearInterval(rn))):(rn||(Kn=_n.now(),rn=setInterval(ic,Us)),Zt=1,qs(Ri))}}function Ii(n,e,t){var r=new Gn;return e=e==null?0:+e,r.restart(i=>{r.stop(),n(i+e)},e,t),r}var ac=ks("start","end","cancel","interrupt"),oc=[],Vs=0,Oi=1,Fr=2,Ln=3,Pi=4,Rr=5,Nn=6;function lr(n,e,t,r,i,s){var a=n.__transition;if(!a)n.__transition={};else if(t in a)return;lc(n,t,{name:e,index:r,group:i,on:ac,tween:oc,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:Vs})}function Kr(n,e){var t=ot(n,e);if(t.state>Vs)throw new Error("too late; already scheduled");return t}function dt(n,e){var t=ot(n,e);if(t.state>Ln)throw new Error("too late; already running");return t}function ot(n,e){var t=n.__transition;if(!t||!(t=t[e]))throw new Error("transition not found");return t}function lc(n,e,t){var r=n.__transition,i;r[e]=t,t.timer=Ms(s,0,t.time);function s(c){t.state=Oi,t.timer.restart(a,t.delay,t.time),t.delay<=c&&a(c-t.delay)}function a(c){var u,f,d,g;if(t.state!==Oi)return l();for(u in r)if(g=r[u],g.name===t.name){if(g.state===Ln)return Ii(a);g.state===Pi?(g.state=Nn,g.timer.stop(),g.on.call("interrupt",n,n.__data__,g.index,g.group),delete r[u]):+u<e&&(g.state=Nn,g.timer.stop(),g.on.call("cancel",n,n.__data__,g.index,g.group),delete r[u])}if(Ii(function(){t.state===Ln&&(t.state=Pi,t.timer.restart(o,t.delay,t.time),o(c))}),t.state=Fr,t.on.call("start",n,n.__data__,t.index,t.group),t.state===Fr){for(t.state=Ln,i=new Array(d=t.tween.length),u=0,f=-1;u<d;++u)(g=t.tween[u].value.call(n,n.__data__,t.index,t.group))&&(i[++f]=g);i.length=f+1}}function o(c){for(var u=c<t.duration?t.ease.call(null,c/t.duration):(t.timer.restart(l),t.state=Rr,1),f=-1,d=i.length;++f<d;)i[f].call(n,u);t.state===Rr&&(t.on.call("end",n,n.__data__,t.index,t.group),l())}function l(){t.state=Nn,t.timer.stop(),delete r[e];for(var c in r)return;delete n.__transition}}function uc(n,e){var t=n.__transition,r,i,s=!0,a;if(t){e=e==null?null:e+"";for(a in t){if((r=t[a]).name!==e){s=!1;continue}i=r.state>Fr&&r.state<Rr,r.state=Nn,r.timer.stop(),r.on.call(i?"interrupt":"cancel",n,n.__data__,r.index,r.group),delete t[a]}s&&delete n.__transition}}function cc(n){return this.each(function(){uc(this,n)})}function hc(n,e){var t,r;return function(){var i=dt(this,n),s=i.tween;if(s!==t){r=t=s;for(var a=0,o=r.length;a<o;++a)if(r[a].name===e){r=r.slice(),r.splice(a,1);break}}i.tween=r}}function fc(n,e,t){var r,i;if(typeof t!="function")throw new Error;return function(){var s=dt(this,n),a=s.tween;if(a!==r){i=(r=a).slice();for(var o={name:e,value:t},l=0,c=i.length;l<c;++l)if(i[l].name===e){i[l]=o;break}l===c&&i.push(o)}s.tween=i}}function dc(n,e){var t=this._id;if(n+="",arguments.length<2){for(var r=ot(this.node(),t).tween,i=0,s=r.length,a;i<s;++i)if((a=r[i]).name===n)return a.value;return null}return this.each((e==null?hc:fc)(t,n,e))}function Gr(n,e,t){var r=n._id;return n.each(function(){var i=dt(this,r);(i.value||(i.value={}))[e]=t.apply(this,arguments)}),function(i){return ot(i,r).value[e]}}function Hs(n,e){var t;return(typeof e=="number"?yt:e instanceof mn?Si:(t=mn(e))?(e=t,Si):Xu)(n,e)}function pc(n){return function(){this.removeAttribute(n)}}function gc(n){return function(){this.removeAttributeNS(n.space,n.local)}}function mc(n,e,t){var r,i=t+"",s;return function(){var a=this.getAttribute(n);return a===i?null:a===r?s:s=e(r=a,t)}}function _c(n,e,t){var r,i=t+"",s;return function(){var a=this.getAttributeNS(n.space,n.local);return a===i?null:a===r?s:s=e(r=a,t)}}function vc(n,e,t){var r,i,s;return function(){var a,o=t(this),l;return o==null?void this.removeAttribute(n):(a=this.getAttribute(n),l=o+"",a===l?null:a===r&&l===i?s:(i=l,s=e(r=a,o)))}}function wc(n,e,t){var r,i,s;return function(){var a,o=t(this),l;return o==null?void this.removeAttributeNS(n.space,n.local):(a=this.getAttributeNS(n.space,n.local),l=o+"",a===l?null:a===r&&l===i?s:(i=l,s=e(r=a,o)))}}function yc(n,e){var t=ar(n),r=t==="transform"?tc:Hs;return this.attrTween(n,typeof e=="function"?(t.local?wc:vc)(t,r,Gr(this,"attr."+n,e)):e==null?(t.local?gc:pc)(t):(t.local?_c:mc)(t,r,e))}function bc(n,e){return function(t){this.setAttribute(n,e.call(this,t))}}function kc(n,e){return function(t){this.setAttributeNS(n.space,n.local,e.call(this,t))}}function Dc(n,e){var t,r;function i(){var s=e.apply(this,arguments);return s!==r&&(t=(r=s)&&kc(n,s)),t}return i._value=e,i}function xc(n,e){var t,r;function i(){var s=e.apply(this,arguments);return s!==r&&(t=(r=s)&&bc(n,s)),t}return i._value=e,i}function Ec(n,e){var t="attr."+n;if(arguments.length<2)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;var r=ar(n);return this.tween(t,(r.local?Dc:xc)(r,e))}function Ac(n,e){return function(){Kr(this,n).delay=+e.apply(this,arguments)}}function Cc(n,e){return e=+e,function(){Kr(this,n).delay=e}}function $c(n){var e=this._id;return arguments.length?this.each((typeof n=="function"?Ac:Cc)(e,n)):ot(this.node(),e).delay}function Tc(n,e){return function(){dt(this,n).duration=+e.apply(this,arguments)}}function Sc(n,e){return e=+e,function(){dt(this,n).duration=e}}function Fc(n){var e=this._id;return arguments.length?this.each((typeof n=="function"?Tc:Sc)(e,n)):ot(this.node(),e).duration}function Rc(n,e){if(typeof e!="function")throw new Error;return function(){dt(this,n).ease=e}}function Ic(n){var e=this._id;return arguments.length?this.each(Rc(e,n)):ot(this.node(),e).ease}function Oc(n,e){return function(){var t=e.apply(this,arguments);if(typeof t!="function")throw new Error;dt(this,n).ease=t}}function Pc(n){if(typeof n!="function")throw new Error;return this.each(Oc(this._id,n))}function Bc(n){typeof n!="function"&&(n=Es(n));for(var e=this._groups,t=e.length,r=new Array(t),i=0;i<t;++i)for(var s=e[i],a=s.length,o=r[i]=[],l,c=0;c<a;++c)(l=s[c])&&n.call(l,l.__data__,c,s)&&o.push(l);return new _t(r,this._parents,this._name,this._id)}function jc(n){if(n._id!==this._id)throw new Error;for(var e=this._groups,t=n._groups,r=e.length,i=t.length,s=Math.min(r,i),a=new Array(r),o=0;o<s;++o)for(var l=e[o],c=t[o],u=l.length,f=a[o]=new Array(u),d,g=0;g<u;++g)(d=l[g]||c[g])&&(f[g]=d);for(;o<r;++o)a[o]=e[o];return new _t(a,this._parents,this._name,this._id)}function zc(n){return(n+"").trim().split(/^|\s+/).every(function(e){var t=e.indexOf(".");return t>=0&&(e=e.slice(0,t)),!e||e==="start"})}function Lc(n,e,t){var r,i,s=zc(e)?Kr:dt;return function(){var a=s(this,n),o=a.on;o!==r&&(i=(r=o).copy()).on(e,t),a.on=i}}function Nc(n,e){var t=this._id;return arguments.length<2?ot(this.node(),t).on.on(n):this.each(Lc(t,n,e))}function Uc(n){return function(){var e=this.parentNode;for(var t in this.__transition)if(+t!==n)return;e&&e.removeChild(this)}}function qc(){return this.on("end.remove",Uc(this._id))}function Mc(n){var e=this._name,t=this._id;typeof n!="function"&&(n=Mr(n));for(var r=this._groups,i=r.length,s=new Array(i),a=0;a<i;++a)for(var o=r[a],l=o.length,c=s[a]=new Array(l),u,f,d=0;d<l;++d)(u=o[d])&&(f=n.call(u,u.__data__,d,o))&&("__data__"in u&&(f.__data__=u.__data__),c[d]=f,lr(c[d],e,t,d,c,ot(u,t)));return new _t(s,this._parents,e,t)}function Vc(n){var e=this._name,t=this._id;typeof n!="function"&&(n=xs(n));for(var r=this._groups,i=r.length,s=[],a=[],o=0;o<i;++o)for(var l=r[o],c=l.length,u,f=0;f<c;++f)if(u=l[f]){for(var d=n.call(u,u.__data__,f,l),g,v=ot(u,t),x=0,D=d.length;x<D;++x)(g=d[x])&&lr(g,e,t,x,d,v);s.push(d),a.push(u)}return new _t(s,a,e,t)}var Hc=bn.prototype.constructor;function Jc(){return new Hc(this._groups,this._parents)}function Kc(n,e){var t,r,i;return function(){var s=Gt(this,n),a=(this.style.removeProperty(n),Gt(this,n));return s===a?null:s===t&&a===r?i:i=e(t=s,r=a)}}function Js(n){return function(){this.style.removeProperty(n)}}function Gc(n,e,t){var r,i=t+"",s;return function(){var a=Gt(this,n);return a===i?null:a===r?s:s=e(r=a,t)}}function Zc(n,e,t){var r,i,s;return function(){var a=Gt(this,n),o=t(this),l=o+"";return o==null&&(l=o=(this.style.removeProperty(n),Gt(this,n))),a===l?null:a===r&&l===i?s:(i=l,s=e(r=a,o))}}function Wc(n,e){var t,r,i,s="style."+e,a="end."+s,o;return function(){var l=dt(this,n),c=l.on,u=l.value[s]==null?o||(o=Js(e)):void 0;(c!==t||i!==u)&&(r=(t=c).copy()).on(a,i=u),l.on=r}}function Xc(n,e,t){var r=(n+="")=="transform"?ec:Hs;return e==null?this.styleTween(n,Kc(n,r)).on("end.style."+n,Js(n)):typeof e=="function"?this.styleTween(n,Zc(n,r,Gr(this,"style."+n,e))).each(Wc(this._id,n)):this.styleTween(n,Gc(n,r,e),t).on("end.style."+n,null)}function Qc(n,e,t){return function(r){this.style.setProperty(n,e.call(this,r),t)}}function Yc(n,e,t){var r,i;function s(){var a=e.apply(this,arguments);return a!==i&&(r=(i=a)&&Qc(n,a,t)),r}return s._value=e,s}function eh(n,e,t){var r="style."+(n+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!="function")throw new Error;return this.tween(r,Yc(n,e,t??""))}function th(n){return function(){this.textContent=n}}function nh(n){return function(){var e=n(this);this.textContent=e??""}}function rh(n){return this.tween("text",typeof n=="function"?nh(Gr(this,"text",n)):th(n==null?"":n+""))}function ih(n){return function(e){this.textContent=n.call(this,e)}}function sh(n){var e,t;function r(){var i=n.apply(this,arguments);return i!==t&&(e=(t=i)&&ih(i)),e}return r._value=n,r}function ah(n){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(n==null)return this.tween(e,null);if(typeof n!="function")throw new Error;return this.tween(e,sh(n))}function oh(){for(var n=this._name,e=this._id,t=Ks(),r=this._groups,i=r.length,s=0;s<i;++s)for(var a=r[s],o=a.length,l,c=0;c<o;++c)if(l=a[c]){var u=ot(l,e);lr(l,n,t,c,a,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new _t(r,this._parents,n,t)}function lh(){var n,e,t=this,r=t._id,i=t.size();return new Promise(function(s,a){var o={value:a},l={value:function(){--i===0&&s()}};t.each(function(){var c=dt(this,r),u=c.on;u!==n&&(e=(n=u).copy(),e._.cancel.push(o),e._.interrupt.push(o),e._.end.push(l)),c.on=e}),i===0&&s()})}var uh=0;function _t(n,e,t,r){this._groups=n,this._parents=e,this._name=t,this._id=r}function Ks(){return++uh}var pt=bn.prototype;_t.prototype={constructor:_t,select:Mc,selectAll:Vc,selectChild:pt.selectChild,selectChildren:pt.selectChildren,filter:Bc,merge:jc,selection:Jc,transition:oh,call:pt.call,nodes:pt.nodes,node:pt.node,size:pt.size,empty:pt.empty,each:pt.each,on:Nc,attr:yc,attrTween:Ec,style:Xc,styleTween:eh,text:rh,textTween:ah,remove:qc,tween:dc,delay:$c,duration:Fc,ease:Ic,easeVarying:Pc,end:lh,[Symbol.iterator]:pt[Symbol.iterator]};function ch(n){return((n*=2)<=1?n*n*n:(n-=2)*n*n+2)/2}var hh={time:null,delay:0,duration:250,ease:ch};function fh(n,e){for(var t;!(t=n.__transition)||!(t=t[e]);)if(!(n=n.parentNode))throw new Error(`transition ${e} not found`);return t}function dh(n){var e,t;n instanceof _t?(e=n._id,n=n._name):(e=Ks(),(t=hh).time=Jr(),n=n==null?null:n+"");for(var r=this._groups,i=r.length,s=0;s<i;++s)for(var a=r[s],o=a.length,l,c=0;c<o;++c)(l=a[c])&&lr(l,n,e,c,a,t||fh(l,e));return new _t(r,this._parents,n,e)}bn.prototype.interrupt=cc;bn.prototype.transition=dh;const Ir=Math.PI,Or=2*Ir,At=1e-6,ph=Or-At;function Gs(n){this._+=n[0];for(let e=1,t=n.length;e<t;++e)this._+=arguments[e]+n[e]}function gh(n){let e=Math.floor(n);if(!(e>=0))throw new Error(`invalid digits: ${n}`);if(e>15)return Gs;const t=10**e;return function(r){this._+=r[0];for(let i=1,s=r.length;i<s;++i)this._+=Math.round(arguments[i]*t)/t+r[i]}}class mh{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?Gs:gh(e)}moveTo(e,t){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+t}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,t){this._append`L${this._x1=+e},${this._y1=+t}`}quadraticCurveTo(e,t,r,i){this._append`Q${+e},${+t},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(e,t,r,i,s,a){this._append`C${+e},${+t},${+r},${+i},${this._x1=+s},${this._y1=+a}`}arcTo(e,t,r,i,s){if(e=+e,t=+t,r=+r,i=+i,s=+s,s<0)throw new Error(`negative radius: ${s}`);let a=this._x1,o=this._y1,l=r-e,c=i-t,u=a-e,f=o-t,d=u*u+f*f;if(this._x1===null)this._append`M${this._x1=e},${this._y1=t}`;else if(d>At)if(!(Math.abs(f*l-c*u)>At)||!s)this._append`L${this._x1=e},${this._y1=t}`;else{let g=r-a,v=i-o,x=l*l+c*c,D=g*g+v*v,E=Math.sqrt(x),S=Math.sqrt(d),F=s*Math.tan((Ir-Math.acos((x+d-D)/(2*E*S)))/2),$=F/S,T=F/E;Math.abs($-1)>At&&this._append`L${e+$*u},${t+$*f}`,this._append`A${s},${s},0,0,${+(f*g>u*v)},${this._x1=e+T*l},${this._y1=t+T*c}`}}arc(e,t,r,i,s,a){if(e=+e,t=+t,r=+r,a=!!a,r<0)throw new Error(`negative radius: ${r}`);let o=r*Math.cos(i),l=r*Math.sin(i),c=e+o,u=t+l,f=1^a,d=a?i-s:s-i;this._x1===null?this._append`M${c},${u}`:(Math.abs(this._x1-c)>At||Math.abs(this._y1-u)>At)&&this._append`L${c},${u}`,r&&(d<0&&(d=d%Or+Or),d>ph?this._append`A${r},${r},0,1,${f},${e-o},${t-l}A${r},${r},0,1,${f},${this._x1=c},${this._y1=u}`:d>At&&this._append`A${r},${r},0,${+(d>=Ir)},${f},${this._x1=e+r*Math.cos(s)},${this._y1=t+r*Math.sin(s)}`)}rect(e,t,r,i){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+t}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}}function Me(n){return function(){return n}}const Bi=Math.abs,Ne=Math.atan2,xt=Math.cos,_h=Math.max,vr=Math.min,ut=Math.sin,Mt=Math.sqrt,Ve=1e-12,vn=Math.PI,Zn=vn/2,Un=2*vn;function vh(n){return n>1?0:n<-1?vn:Math.acos(n)}function ji(n){return n>=1?Zn:n<=-1?-Zn:Math.asin(n)}function wh(n){let e=3;return n.digits=function(t){if(!arguments.length)return e;if(t==null)e=null;else{const r=Math.floor(t);if(!(r>=0))throw new RangeError(`invalid digits: ${t}`);e=r}return n},()=>new mh(e)}function yh(n){return n.innerRadius}function bh(n){return n.outerRadius}function kh(n){return n.startAngle}function Dh(n){return n.endAngle}function xh(n){return n&&n.padAngle}function Eh(n,e,t,r,i,s,a,o){var l=t-n,c=r-e,u=a-i,f=o-s,d=f*l-u*c;if(!(d*d<Ve))return d=(u*(e-s)-f*(n-i))/d,[n+d*l,e+d*c]}function Bn(n,e,t,r,i,s,a){var o=n-t,l=e-r,c=(a?s:-s)/Mt(o*o+l*l),u=c*l,f=-c*o,d=n+u,g=e+f,v=t+u,x=r+f,D=(d+v)/2,E=(g+x)/2,S=v-d,F=x-g,$=S*S+F*F,T=i-s,P=d*x-v*g,R=(F<0?-1:1)*Mt(_h(0,T*T*$-P*P)),z=(P*F-S*R)/$,ee=(-P*S-F*R)/$,ce=(P*F+S*R)/$,ge=(-P*S+F*R)/$,he=z-D,Z=ee-E,Q=ce-D,De=ge-E;return he*he+Z*Z>Q*Q+De*De&&(z=ce,ee=ge),{cx:z,cy:ee,x01:-u,y01:-f,x11:z*(i/T-1),y11:ee*(i/T-1)}}function Ah(){var n=yh,e=bh,t=Me(0),r=null,i=kh,s=Dh,a=xh,o=null,l=wh(c);function c(){var u,f,d=+n.apply(this,arguments),g=+e.apply(this,arguments),v=i.apply(this,arguments)-Zn,x=s.apply(this,arguments)-Zn,D=Bi(x-v),E=x>v;if(o||(o=u=l()),g<d&&(f=g,g=d,d=f),!(g>Ve))o.moveTo(0,0);else if(D>Un-Ve)o.moveTo(g*xt(v),g*ut(v)),o.arc(0,0,g,v,x,!E),d>Ve&&(o.moveTo(d*xt(x),d*ut(x)),o.arc(0,0,d,x,v,E));else{var S=v,F=x,$=v,T=x,P=D,R=D,z=a.apply(this,arguments)/2,ee=z>Ve&&(r?+r.apply(this,arguments):Mt(d*d+g*g)),ce=vr(Bi(g-d)/2,+t.apply(this,arguments)),ge=ce,he=ce,Z,Q;if(ee>Ve){var De=ji(ee/d*ut(z)),ye=ji(ee/g*ut(z));(P-=De*2)>Ve?(De*=E?1:-1,$+=De,T-=De):(P=0,$=T=(v+x)/2),(R-=ye*2)>Ve?(ye*=E?1:-1,S+=ye,F-=ye):(R=0,S=F=(v+x)/2)}var Se=g*xt(S),Re=g*ut(S),Ae=d*xt(T),Fe=d*ut(T);if(ce>Ve){var Qe=g*xt(F),Ce=g*ut(F),J=d*xt($),B=d*ut($),$e;if(D<vn)if($e=Eh(Se,Re,J,B,Qe,Ce,Ae,Fe)){var Ye=Se-$e[0],qe=Re-$e[1],re=Qe-$e[0],be=Ce-$e[1],ve=1/ut(vh((Ye*re+qe*be)/(Mt(Ye*Ye+qe*qe)*Mt(re*re+be*be)))/2),te=Mt($e[0]*$e[0]+$e[1]*$e[1]);ge=vr(ce,(d-te)/(ve-1)),he=vr(ce,(g-te)/(ve+1))}else ge=he=0}R>Ve?he>Ve?(Z=Bn(J,B,Se,Re,g,he,E),Q=Bn(Qe,Ce,Ae,Fe,g,he,E),o.moveTo(Z.cx+Z.x01,Z.cy+Z.y01),he<ce?o.arc(Z.cx,Z.cy,he,Ne(Z.y01,Z.x01),Ne(Q.y01,Q.x01),!E):(o.arc(Z.cx,Z.cy,he,Ne(Z.y01,Z.x01),Ne(Z.y11,Z.x11),!E),o.arc(0,0,g,Ne(Z.cy+Z.y11,Z.cx+Z.x11),Ne(Q.cy+Q.y11,Q.cx+Q.x11),!E),o.arc(Q.cx,Q.cy,he,Ne(Q.y11,Q.x11),Ne(Q.y01,Q.x01),!E))):(o.moveTo(Se,Re),o.arc(0,0,g,S,F,!E)):o.moveTo(Se,Re),!(d>Ve)||!(P>Ve)?o.lineTo(Ae,Fe):ge>Ve?(Z=Bn(Ae,Fe,Qe,Ce,d,-ge,E),Q=Bn(Se,Re,J,B,d,-ge,E),o.lineTo(Z.cx+Z.x01,Z.cy+Z.y01),ge<ce?o.arc(Z.cx,Z.cy,ge,Ne(Z.y01,Z.x01),Ne(Q.y01,Q.x01),!E):(o.arc(Z.cx,Z.cy,ge,Ne(Z.y01,Z.x01),Ne(Z.y11,Z.x11),!E),o.arc(0,0,d,Ne(Z.cy+Z.y11,Z.cx+Z.x11),Ne(Q.cy+Q.y11,Q.cx+Q.x11),E),o.arc(Q.cx,Q.cy,ge,Ne(Q.y11,Q.x11),Ne(Q.y01,Q.x01),!E))):o.arc(0,0,d,T,$,E)}if(o.closePath(),u)return o=null,u+""||null}return c.centroid=function(){var u=(+n.apply(this,arguments)+ +e.apply(this,arguments))/2,f=(+i.apply(this,arguments)+ +s.apply(this,arguments))/2-vn/2;return[xt(f)*u,ut(f)*u]},c.innerRadius=function(u){return arguments.length?(n=typeof u=="function"?u:Me(+u),c):n},c.outerRadius=function(u){return arguments.length?(e=typeof u=="function"?u:Me(+u),c):e},c.cornerRadius=function(u){return arguments.length?(t=typeof u=="function"?u:Me(+u),c):t},c.padRadius=function(u){return arguments.length?(r=u==null?null:typeof u=="function"?u:Me(+u),c):r},c.startAngle=function(u){return arguments.length?(i=typeof u=="function"?u:Me(+u),c):i},c.endAngle=function(u){return arguments.length?(s=typeof u=="function"?u:Me(+u),c):s},c.padAngle=function(u){return arguments.length?(a=typeof u=="function"?u:Me(+u),c):a},c.context=function(u){return arguments.length?(o=u??null,c):o},c}function Ch(n){return typeof n=="object"&&"length"in n?n:Array.from(n)}function $h(n,e){return e<n?-1:e>n?1:e>=n?0:NaN}function Th(n){return n}function Sh(){var n=Th,e=$h,t=null,r=Me(0),i=Me(Un),s=Me(0);function a(o){var l,c=(o=Ch(o)).length,u,f,d=0,g=new Array(c),v=new Array(c),x=+r.apply(this,arguments),D=Math.min(Un,Math.max(-Un,i.apply(this,arguments)-x)),E,S=Math.min(Math.abs(D)/c,s.apply(this,arguments)),F=S*(D<0?-1:1),$;for(l=0;l<c;++l)($=v[g[l]=l]=+n(o[l],l,o))>0&&(d+=$);for(e!=null?g.sort(function(T,P){return e(v[T],v[P])}):t!=null&&g.sort(function(T,P){return t(o[T],o[P])}),l=0,f=d?(D-c*F)/d:0;l<c;++l,x=E)u=g[l],$=v[u],E=x+($>0?$*f:0)+F,v[u]={data:o[u],index:l,value:$,startAngle:x,endAngle:E,padAngle:S};return v}return a.value=function(o){return arguments.length?(n=typeof o=="function"?o:Me(+o),a):n},a.sortValues=function(o){return arguments.length?(e=o,t=null,a):e},a.sort=function(o){return arguments.length?(t=o,e=null,a):t},a.startAngle=function(o){return arguments.length?(r=typeof o=="function"?o:Me(+o),a):r},a.endAngle=function(o){return arguments.length?(i=typeof o=="function"?o:Me(+o),a):i},a.padAngle=function(o){return arguments.length?(s=typeof o=="function"?o:Me(+o),a):s},a}function ln(n,e,t){this.k=n,this.x=e,this.y=t}ln.prototype={constructor:ln,scale:function(n){return n===1?this:new ln(this.k*n,this.x,this.y)},translate:function(n,e){return n===0&e===0?this:new ln(this.k,this.x+this.k*n,this.y+this.k*e)},apply:function(n){return[n[0]*this.k+this.x,n[1]*this.k+this.y]},applyX:function(n){return n*this.k+this.x},applyY:function(n){return n*this.k+this.y},invert:function(n){return[(n[0]-this.x)/this.k,(n[1]-this.y)/this.k]},invertX:function(n){return(n-this.x)/this.k},invertY:function(n){return(n-this.y)/this.k},rescaleX:function(n){return n.copy().domain(n.range().map(this.invertX,this).map(n.invert,n))},rescaleY:function(n){return n.copy().domain(n.range().map(this.invertY,this).map(n.invert,n))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};ln.prototype;function Zr(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}let It=Zr();function Zs(n){It=n}const Ws=/[&<>"']/,Fh=new RegExp(Ws.source,"g"),Xs=/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,Rh=new RegExp(Xs.source,"g"),Ih={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},zi=n=>Ih[n];function Ge(n,e){if(e){if(Ws.test(n))return n.replace(Fh,zi)}else if(Xs.test(n))return n.replace(Rh,zi);return n}const Oh=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig;function Ph(n){return n.replace(Oh,(e,t)=>(t=t.toLowerCase(),t==="colon"?":":t.charAt(0)==="#"?t.charAt(1)==="x"?String.fromCharCode(parseInt(t.substring(2),16)):String.fromCharCode(+t.substring(1)):""))}const Bh=/(^|[^\[])\^/g;function pe(n,e){n=typeof n=="string"?n:n.source,e=e||"";const t={replace:(r,i)=>(i=typeof i=="object"&&"source"in i?i.source:i,i=i.replace(Bh,"$1"),n=n.replace(r,i),t),getRegex:()=>new RegExp(n,e)};return t}function Li(n){try{n=encodeURI(n).replace(/%25/g,"%")}catch{return null}return n}const Wn={exec:()=>null};function Ni(n,e){const t=n.replace(/\|/g,(s,a,o)=>{let l=!1,c=a;for(;--c>=0&&o[c]==="\\";)l=!l;return l?"|":" |"}),r=t.split(/ \|/);let i=0;if(r[0].trim()||r.shift(),r.length>0&&!r[r.length-1].trim()&&r.pop(),e)if(r.length>e)r.splice(e);else for(;r.length<e;)r.push("");for(;i<r.length;i++)r[i]=r[i].trim().replace(/\\\|/g,"|");return r}function jn(n,e,t){const r=n.length;if(r===0)return"";let i=0;for(;i<r;){const s=n.charAt(r-i-1);if(s===e&&!t)i++;else if(s!==e&&t)i++;else break}return n.slice(0,r-i)}function jh(n,e){if(n.indexOf(e[1])===-1)return-1;let t=0;for(let r=0;r<n.length;r++)if(n[r]==="\\")r++;else if(n[r]===e[0])t++;else if(n[r]===e[1]&&(t--,t<0))return r;return-1}function Ui(n,e,t,r){const i=e.href,s=e.title?Ge(e.title):null,a=n[1].replace(/\\([\[\]])/g,"$1");if(n[0].charAt(0)!=="!"){r.state.inLink=!0;const o={type:"link",raw:t,href:i,title:s,text:a,tokens:r.inlineTokens(a)};return r.state.inLink=!1,o}return{type:"image",raw:t,href:i,title:s,text:Ge(a)}}function zh(n,e){const t=n.match(/^(\s+)(?:```)/);if(t===null)return e;const r=t[1];return e.split(`
`).map(i=>{const s=i.match(/^\s+/);if(s===null)return i;const[a]=s;return a.length>=r.length?i.slice(r.length):i}).join(`
`)}class Xn{constructor(e){_e(this,"options");_e(this,"rules");_e(this,"lexer");this.options=e||It}space(e){const t=this.rules.block.newline.exec(e);if(t&&t[0].length>0)return{type:"space",raw:t[0]}}code(e){const t=this.rules.block.code.exec(e);if(t){const r=t[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:t[0],codeBlockStyle:"indented",text:this.options.pedantic?r:jn(r,`
`)}}}fences(e){const t=this.rules.block.fences.exec(e);if(t){const r=t[0],i=zh(r,t[3]||"");return{type:"code",raw:r,lang:t[2]?t[2].trim().replace(this.rules.inline._escapes,"$1"):t[2],text:i}}}heading(e){const t=this.rules.block.heading.exec(e);if(t){let r=t[2].trim();if(/#$/.test(r)){const i=jn(r,"#");(this.options.pedantic||!i||/ $/.test(i))&&(r=i.trim())}return{type:"heading",raw:t[0],depth:t[1].length,text:r,tokens:this.lexer.inline(r)}}}hr(e){const t=this.rules.block.hr.exec(e);if(t)return{type:"hr",raw:t[0]}}blockquote(e){const t=this.rules.block.blockquote.exec(e);if(t){const r=jn(t[0].replace(/^ *>[ \t]?/gm,""),`
`),i=this.lexer.state.top;this.lexer.state.top=!0;const s=this.lexer.blockTokens(r);return this.lexer.state.top=i,{type:"blockquote",raw:t[0],tokens:s,text:r}}}list(e){let t=this.rules.block.list.exec(e);if(t){let r=t[1].trim();const i=r.length>1,s={type:"list",raw:"",ordered:i,start:i?+r.slice(0,-1):"",loose:!1,items:[]};r=i?`\\d{1,9}\\${r.slice(-1)}`:`\\${r}`,this.options.pedantic&&(r=i?r:"[*+-]");const a=new RegExp(`^( {0,3}${r})((?:[	 ][^\\n]*)?(?:\\n|$))`);let o="",l="",c=!1;for(;e;){let u=!1;if(!(t=a.exec(e))||this.rules.block.hr.test(e))break;o=t[0],e=e.substring(o.length);let f=t[2].split(`
`,1)[0].replace(/^\t+/,E=>" ".repeat(3*E.length)),d=e.split(`
`,1)[0],g=0;this.options.pedantic?(g=2,l=f.trimStart()):(g=t[2].search(/[^ ]/),g=g>4?1:g,l=f.slice(g),g+=t[1].length);let v=!1;if(!f&&/^ *$/.test(d)&&(o+=d+`
`,e=e.substring(d.length+1),u=!0),!u){const E=new RegExp(`^ {0,${Math.min(3,g-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),S=new RegExp(`^ {0,${Math.min(3,g-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),F=new RegExp(`^ {0,${Math.min(3,g-1)}}(?:\`\`\`|~~~)`),$=new RegExp(`^ {0,${Math.min(3,g-1)}}#`);for(;e;){const T=e.split(`
`,1)[0];if(d=T,this.options.pedantic&&(d=d.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),F.test(d)||$.test(d)||E.test(d)||S.test(e))break;if(d.search(/[^ ]/)>=g||!d.trim())l+=`
`+d.slice(g);else{if(v||f.search(/[^ ]/)>=4||F.test(f)||$.test(f)||S.test(f))break;l+=`
`+d}!v&&!d.trim()&&(v=!0),o+=T+`
`,e=e.substring(T.length+1),f=d.slice(g)}}s.loose||(c?s.loose=!0:/\n *\n *$/.test(o)&&(c=!0));let x=null,D;this.options.gfm&&(x=/^\[[ xX]\] /.exec(l),x&&(D=x[0]!=="[ ] ",l=l.replace(/^\[[ xX]\] +/,""))),s.items.push({type:"list_item",raw:o,task:!!x,checked:D,loose:!1,text:l,tokens:[]}),s.raw+=o}s.items[s.items.length-1].raw=o.trimEnd(),s.items[s.items.length-1].text=l.trimEnd(),s.raw=s.raw.trimEnd();for(let u=0;u<s.items.length;u++)if(this.lexer.state.top=!1,s.items[u].tokens=this.lexer.blockTokens(s.items[u].text,[]),!s.loose){const f=s.items[u].tokens.filter(g=>g.type==="space"),d=f.length>0&&f.some(g=>/\n.*\n/.test(g.raw));s.loose=d}if(s.loose)for(let u=0;u<s.items.length;u++)s.items[u].loose=!0;return s}}html(e){const t=this.rules.block.html.exec(e);if(t)return{type:"html",block:!0,raw:t[0],pre:t[1]==="pre"||t[1]==="script"||t[1]==="style",text:t[0]}}def(e){const t=this.rules.block.def.exec(e);if(t){const r=t[1].toLowerCase().replace(/\s+/g," "),i=t[2]?t[2].replace(/^<(.*)>$/,"$1").replace(this.rules.inline._escapes,"$1"):"",s=t[3]?t[3].substring(1,t[3].length-1).replace(this.rules.inline._escapes,"$1"):t[3];return{type:"def",tag:r,raw:t[0],href:i,title:s}}}table(e){const t=this.rules.block.table.exec(e);if(t){if(!/[:|]/.test(t[2]))return;const r={type:"table",raw:t[0],header:Ni(t[1]).map(i=>({text:i,tokens:[]})),align:t[2].replace(/^\||\| *$/g,"").split("|"),rows:t[3]&&t[3].trim()?t[3].replace(/\n[ \t]*$/,"").split(`
`):[]};if(r.header.length===r.align.length){let i=r.align.length,s,a,o,l;for(s=0;s<i;s++){const c=r.align[s];c&&(/^ *-+: *$/.test(c)?r.align[s]="right":/^ *:-+: *$/.test(c)?r.align[s]="center":/^ *:-+ *$/.test(c)?r.align[s]="left":r.align[s]=null)}for(i=r.rows.length,s=0;s<i;s++)r.rows[s]=Ni(r.rows[s],r.header.length).map(c=>({text:c,tokens:[]}));for(i=r.header.length,a=0;a<i;a++)r.header[a].tokens=this.lexer.inline(r.header[a].text);for(i=r.rows.length,a=0;a<i;a++)for(l=r.rows[a],o=0;o<l.length;o++)l[o].tokens=this.lexer.inline(l[o].text);return r}}}lheading(e){const t=this.rules.block.lheading.exec(e);if(t)return{type:"heading",raw:t[0],depth:t[2].charAt(0)==="="?1:2,text:t[1],tokens:this.lexer.inline(t[1])}}paragraph(e){const t=this.rules.block.paragraph.exec(e);if(t){const r=t[1].charAt(t[1].length-1)===`
`?t[1].slice(0,-1):t[1];return{type:"paragraph",raw:t[0],text:r,tokens:this.lexer.inline(r)}}}text(e){const t=this.rules.block.text.exec(e);if(t)return{type:"text",raw:t[0],text:t[0],tokens:this.lexer.inline(t[0])}}escape(e){const t=this.rules.inline.escape.exec(e);if(t)return{type:"escape",raw:t[0],text:Ge(t[1])}}tag(e){const t=this.rules.inline.tag.exec(e);if(t)return!this.lexer.state.inLink&&/^<a /i.test(t[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(t[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(t[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(t[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:t[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:t[0]}}link(e){const t=this.rules.inline.link.exec(e);if(t){const r=t[2].trim();if(!this.options.pedantic&&/^</.test(r)){if(!/>$/.test(r))return;const a=jn(r.slice(0,-1),"\\");if((r.length-a.length)%2===0)return}else{const a=jh(t[2],"()");if(a>-1){const l=(t[0].indexOf("!")===0?5:4)+t[1].length+a;t[2]=t[2].substring(0,a),t[0]=t[0].substring(0,l).trim(),t[3]=""}}let i=t[2],s="";if(this.options.pedantic){const a=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(i);a&&(i=a[1],s=a[3])}else s=t[3]?t[3].slice(1,-1):"";return i=i.trim(),/^</.test(i)&&(this.options.pedantic&&!/>$/.test(r)?i=i.slice(1):i=i.slice(1,-1)),Ui(t,{href:i&&i.replace(this.rules.inline._escapes,"$1"),title:s&&s.replace(this.rules.inline._escapes,"$1")},t[0],this.lexer)}}reflink(e,t){let r;if((r=this.rules.inline.reflink.exec(e))||(r=this.rules.inline.nolink.exec(e))){let i=(r[2]||r[1]).replace(/\s+/g," ");if(i=t[i.toLowerCase()],!i){const s=r[0].charAt(0);return{type:"text",raw:s,text:s}}return Ui(r,i,r[0],this.lexer)}}emStrong(e,t,r=""){let i=this.rules.inline.emStrong.lDelim.exec(e);if(!i||i[3]&&r.match(/[\p{L}\p{N}]/u))return;if(!(i[1]||i[2]||"")||!r||this.rules.inline.punctuation.exec(r)){const a=[...i[0]].length-1;let o,l,c=a,u=0;const f=i[0][0]==="*"?this.rules.inline.emStrong.rDelimAst:this.rules.inline.emStrong.rDelimUnd;for(f.lastIndex=0,t=t.slice(-1*e.length+i[0].length-1);(i=f.exec(t))!=null;){if(o=i[1]||i[2]||i[3]||i[4]||i[5]||i[6],!o)continue;if(l=[...o].length,i[3]||i[4]){c+=l;continue}else if((i[5]||i[6])&&a%3&&!((a+l)%3)){u+=l;continue}if(c-=l,c>0)continue;l=Math.min(l,l+c+u);const d=[...e].slice(0,a+i.index+l+1).join("");if(Math.min(a,l)%2){const v=d.slice(1,-1);return{type:"em",raw:d,text:v,tokens:this.lexer.inlineTokens(v)}}const g=d.slice(2,-2);return{type:"strong",raw:d,text:g,tokens:this.lexer.inlineTokens(g)}}}}codespan(e){const t=this.rules.inline.code.exec(e);if(t){let r=t[2].replace(/\n/g," ");const i=/[^ ]/.test(r),s=/^ /.test(r)&&/ $/.test(r);return i&&s&&(r=r.substring(1,r.length-1)),r=Ge(r,!0),{type:"codespan",raw:t[0],text:r}}}br(e){const t=this.rules.inline.br.exec(e);if(t)return{type:"br",raw:t[0]}}del(e){const t=this.rules.inline.del.exec(e);if(t)return{type:"del",raw:t[0],text:t[2],tokens:this.lexer.inlineTokens(t[2])}}autolink(e){const t=this.rules.inline.autolink.exec(e);if(t){let r,i;return t[2]==="@"?(r=Ge(t[1]),i="mailto:"+r):(r=Ge(t[1]),i=r),{type:"link",raw:t[0],text:r,href:i,tokens:[{type:"text",raw:r,text:r}]}}}url(e){let t;if(t=this.rules.inline.url.exec(e)){let r,i;if(t[2]==="@")r=Ge(t[0]),i="mailto:"+r;else{let s;do s=t[0],t[0]=this.rules.inline._backpedal.exec(t[0])[0];while(s!==t[0]);r=Ge(t[0]),t[1]==="www."?i="http://"+t[0]:i=t[0]}return{type:"link",raw:t[0],text:r,href:i,tokens:[{type:"text",raw:r,text:r}]}}}inlineText(e){const t=this.rules.inline.text.exec(e);if(t){let r;return this.lexer.state.inRawBlock?r=t[0]:r=Ge(t[0]),{type:"text",raw:t[0],text:r}}}}const W={newline:/^(?: *(?:\n|$))+/,code:/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,fences:/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,hr:/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/,html:"^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))",def:/^ {0,3}\[(label)\]: *(?:\n *)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/,table:Wn,lheading:/^(?!bull )((?:.|\n(?!\s*?\n|bull ))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,_paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,text:/^[^\n]+/};W._label=/(?!\s*\])(?:\\.|[^\[\]\\])+/;W._title=/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/;W.def=pe(W.def).replace("label",W._label).replace("title",W._title).getRegex();W.bullet=/(?:[*+-]|\d{1,9}[.)])/;W.listItemStart=pe(/^( *)(bull) */).replace("bull",W.bullet).getRegex();W.list=pe(W.list).replace(/bull/g,W.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+W.def.source+")").getRegex();W._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul";W._comment=/<!--(?!-?>)[\s\S]*?(?:-->|$)/;W.html=pe(W.html,"i").replace("comment",W._comment).replace("tag",W._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex();W.lheading=pe(W.lheading).replace(/bull/g,W.bullet).getRegex();W.paragraph=pe(W._paragraph).replace("hr",W.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",W._tag).getRegex();W.blockquote=pe(W.blockquote).replace("paragraph",W.paragraph).getRegex();W.normal={...W};W.gfm={...W.normal,table:"^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)"};W.gfm.table=pe(W.gfm.table).replace("hr",W.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",W._tag).getRegex();W.gfm.paragraph=pe(W._paragraph).replace("hr",W.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("table",W.gfm.table).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",W._tag).getRegex();W.pedantic={...W.normal,html:pe(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",W._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:Wn,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:pe(W.normal._paragraph).replace("hr",W.hr).replace("heading",` *#{1,6} *[^
]`).replace("lheading",W.lheading).replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").getRegex()};const L={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:Wn,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(ref)\]/,nolink:/^!?\[(ref)\](?:\[\])?/,reflinkSearch:"reflink|nolink(?!\\()",emStrong:{lDelim:/^(?:\*+(?:((?!\*)[punct])|[^\s*]))|^_+(?:((?!_)[punct])|([^\s_]))/,rDelimAst:/^[^_*]*?__[^_*]*?\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\*)[punct](\*+)(?=[\s]|$)|[^punct\s](\*+)(?!\*)(?=[punct\s]|$)|(?!\*)[punct\s](\*+)(?=[^punct\s])|[\s](\*+)(?!\*)(?=[punct])|(?!\*)[punct](\*+)(?!\*)(?=[punct])|[^punct\s](\*+)(?=[^punct\s])/,rDelimUnd:/^[^_*]*?\*\*[^_*]*?_[^_*]*?(?=\*\*)|[^_]+(?=[^_])|(?!_)[punct](_+)(?=[\s]|$)|[^punct\s](_+)(?!_)(?=[punct\s]|$)|(?!_)[punct\s](_+)(?=[^punct\s])|[\s](_+)(?!_)(?=[punct])|(?!_)[punct](_+)(?!_)(?=[punct])/},code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:Wn,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,punctuation:/^((?![*_])[\spunctuation])/};L._punctuation="\\p{P}$+<=>`^|~";L.punctuation=pe(L.punctuation,"u").replace(/punctuation/g,L._punctuation).getRegex();L.blockSkip=/\[[^[\]]*?\]\([^\(\)]*?\)|`[^`]*?`|<[^<>]*?>/g;L.anyPunctuation=/\\[punct]/g;L._escapes=/\\([punct])/g;L._comment=pe(W._comment).replace("(?:-->|$)","-->").getRegex();L.emStrong.lDelim=pe(L.emStrong.lDelim,"u").replace(/punct/g,L._punctuation).getRegex();L.emStrong.rDelimAst=pe(L.emStrong.rDelimAst,"gu").replace(/punct/g,L._punctuation).getRegex();L.emStrong.rDelimUnd=pe(L.emStrong.rDelimUnd,"gu").replace(/punct/g,L._punctuation).getRegex();L.anyPunctuation=pe(L.anyPunctuation,"gu").replace(/punct/g,L._punctuation).getRegex();L._escapes=pe(L._escapes,"gu").replace(/punct/g,L._punctuation).getRegex();L._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/;L._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/;L.autolink=pe(L.autolink).replace("scheme",L._scheme).replace("email",L._email).getRegex();L._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/;L.tag=pe(L.tag).replace("comment",L._comment).replace("attribute",L._attribute).getRegex();L._label=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/;L._href=/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/;L._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/;L.link=pe(L.link).replace("label",L._label).replace("href",L._href).replace("title",L._title).getRegex();L.reflink=pe(L.reflink).replace("label",L._label).replace("ref",W._label).getRegex();L.nolink=pe(L.nolink).replace("ref",W._label).getRegex();L.reflinkSearch=pe(L.reflinkSearch,"g").replace("reflink",L.reflink).replace("nolink",L.nolink).getRegex();L.normal={...L};L.pedantic={...L.normal,strong:{start:/^__|\*\*/,middle:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,endAst:/\*\*(?!\*)/g,endUnd:/__(?!_)/g},em:{start:/^_|\*/,middle:/^()\*(?=\S)([\s\S]*?\S)\*(?!\*)|^_(?=\S)([\s\S]*?\S)_(?!_)/,endAst:/\*(?!\*)/g,endUnd:/_(?!_)/g},link:pe(/^!?\[(label)\]\((.*?)\)/).replace("label",L._label).getRegex(),reflink:pe(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",L._label).getRegex()};L.gfm={...L.normal,escape:pe(L.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/};L.gfm.url=pe(L.gfm.url,"i").replace("email",L.gfm._extended_email).getRegex();L.breaks={...L.gfm,br:pe(L.br).replace("{2,}","*").getRegex(),text:pe(L.gfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()};class ct{constructor(e){_e(this,"tokens");_e(this,"options");_e(this,"state");_e(this,"tokenizer");_e(this,"inlineQueue");this.tokens=[],this.tokens.links=Object.create(null),this.options=e||It,this.options.tokenizer=this.options.tokenizer||new Xn,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const t={block:W.normal,inline:L.normal};this.options.pedantic?(t.block=W.pedantic,t.inline=L.pedantic):this.options.gfm&&(t.block=W.gfm,this.options.breaks?t.inline=L.breaks:t.inline=L.gfm),this.tokenizer.rules=t}static get rules(){return{block:W,inline:L}}static lex(e,t){return new ct(t).lex(e)}static lexInline(e,t){return new ct(t).inlineTokens(e)}lex(e){e=e.replace(/\r\n|\r/g,`
`),this.blockTokens(e,this.tokens);let t;for(;t=this.inlineQueue.shift();)this.inlineTokens(t.src,t.tokens);return this.tokens}blockTokens(e,t=[]){this.options.pedantic?e=e.replace(/\t/g,"    ").replace(/^ +$/gm,""):e=e.replace(/^( *)(\t+)/gm,(o,l,c)=>l+"    ".repeat(c.length));let r,i,s,a;for(;e;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(o=>(r=o.call({lexer:this},e,t))?(e=e.substring(r.raw.length),t.push(r),!0):!1))){if(r=this.tokenizer.space(e)){e=e.substring(r.raw.length),r.raw.length===1&&t.length>0?t[t.length-1].raw+=`
`:t.push(r);continue}if(r=this.tokenizer.code(e)){e=e.substring(r.raw.length),i=t[t.length-1],i&&(i.type==="paragraph"||i.type==="text")?(i.raw+=`
`+r.raw,i.text+=`
`+r.text,this.inlineQueue[this.inlineQueue.length-1].src=i.text):t.push(r);continue}if(r=this.tokenizer.fences(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.heading(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.hr(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.blockquote(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.list(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.html(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.def(e)){e=e.substring(r.raw.length),i=t[t.length-1],i&&(i.type==="paragraph"||i.type==="text")?(i.raw+=`
`+r.raw,i.text+=`
`+r.raw,this.inlineQueue[this.inlineQueue.length-1].src=i.text):this.tokens.links[r.tag]||(this.tokens.links[r.tag]={href:r.href,title:r.title});continue}if(r=this.tokenizer.table(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.lheading(e)){e=e.substring(r.raw.length),t.push(r);continue}if(s=e,this.options.extensions&&this.options.extensions.startBlock){let o=1/0;const l=e.slice(1);let c;this.options.extensions.startBlock.forEach(u=>{c=u.call({lexer:this},l),typeof c=="number"&&c>=0&&(o=Math.min(o,c))}),o<1/0&&o>=0&&(s=e.substring(0,o+1))}if(this.state.top&&(r=this.tokenizer.paragraph(s))){i=t[t.length-1],a&&i.type==="paragraph"?(i.raw+=`
`+r.raw,i.text+=`
`+r.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=i.text):t.push(r),a=s.length!==e.length,e=e.substring(r.raw.length);continue}if(r=this.tokenizer.text(e)){e=e.substring(r.raw.length),i=t[t.length-1],i&&i.type==="text"?(i.raw+=`
`+r.raw,i.text+=`
`+r.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=i.text):t.push(r);continue}if(e){const o="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(o);break}else throw new Error(o)}}return this.state.top=!0,t}inline(e,t=[]){return this.inlineQueue.push({src:e,tokens:t}),t}inlineTokens(e,t=[]){let r,i,s,a=e,o,l,c;if(this.tokens.links){const u=Object.keys(this.tokens.links);if(u.length>0)for(;(o=this.tokenizer.rules.inline.reflinkSearch.exec(a))!=null;)u.includes(o[0].slice(o[0].lastIndexOf("[")+1,-1))&&(a=a.slice(0,o.index)+"["+"a".repeat(o[0].length-2)+"]"+a.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(o=this.tokenizer.rules.inline.blockSkip.exec(a))!=null;)a=a.slice(0,o.index)+"["+"a".repeat(o[0].length-2)+"]"+a.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;(o=this.tokenizer.rules.inline.anyPunctuation.exec(a))!=null;)a=a.slice(0,o.index)+"++"+a.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;e;)if(l||(c=""),l=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(u=>(r=u.call({lexer:this},e,t))?(e=e.substring(r.raw.length),t.push(r),!0):!1))){if(r=this.tokenizer.escape(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.tag(e)){e=e.substring(r.raw.length),i=t[t.length-1],i&&r.type==="text"&&i.type==="text"?(i.raw+=r.raw,i.text+=r.text):t.push(r);continue}if(r=this.tokenizer.link(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.reflink(e,this.tokens.links)){e=e.substring(r.raw.length),i=t[t.length-1],i&&r.type==="text"&&i.type==="text"?(i.raw+=r.raw,i.text+=r.text):t.push(r);continue}if(r=this.tokenizer.emStrong(e,a,c)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.codespan(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.br(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.del(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.autolink(e)){e=e.substring(r.raw.length),t.push(r);continue}if(!this.state.inLink&&(r=this.tokenizer.url(e))){e=e.substring(r.raw.length),t.push(r);continue}if(s=e,this.options.extensions&&this.options.extensions.startInline){let u=1/0;const f=e.slice(1);let d;this.options.extensions.startInline.forEach(g=>{d=g.call({lexer:this},f),typeof d=="number"&&d>=0&&(u=Math.min(u,d))}),u<1/0&&u>=0&&(s=e.substring(0,u+1))}if(r=this.tokenizer.inlineText(s)){e=e.substring(r.raw.length),r.raw.slice(-1)!=="_"&&(c=r.raw.slice(-1)),l=!0,i=t[t.length-1],i&&i.type==="text"?(i.raw+=r.raw,i.text+=r.text):t.push(r);continue}if(e){const u="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(u);break}else throw new Error(u)}}return t}}class Qn{constructor(e){_e(this,"options");this.options=e||It}code(e,t,r){var s;const i=(s=(t||"").match(/^\S*/))==null?void 0:s[0];return e=e.replace(/\n$/,"")+`
`,i?'<pre><code class="language-'+Ge(i)+'">'+(r?e:Ge(e,!0))+`</code></pre>
`:"<pre><code>"+(r?e:Ge(e,!0))+`</code></pre>
`}blockquote(e){return`<blockquote>
${e}</blockquote>
`}html(e,t){return e}heading(e,t,r){return`<h${t}>${e}</h${t}>
`}hr(){return`<hr>
`}list(e,t,r){const i=t?"ol":"ul",s=t&&r!==1?' start="'+r+'"':"";return"<"+i+s+`>
`+e+"</"+i+`>
`}listitem(e,t,r){return`<li>${e}</li>
`}checkbox(e){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph(e){return`<p>${e}</p>
`}table(e,t){return t&&(t=`<tbody>${t}</tbody>`),`<table>
<thead>
`+e+`</thead>
`+t+`</table>
`}tablerow(e){return`<tr>
${e}</tr>
`}tablecell(e,t){const r=t.header?"th":"td";return(t.align?`<${r} align="${t.align}">`:`<${r}>`)+e+`</${r}>
`}strong(e){return`<strong>${e}</strong>`}em(e){return`<em>${e}</em>`}codespan(e){return`<code>${e}</code>`}br(){return"<br>"}del(e){return`<del>${e}</del>`}link(e,t,r){const i=Li(e);if(i===null)return r;e=i;let s='<a href="'+e+'"';return t&&(s+=' title="'+t+'"'),s+=">"+r+"</a>",s}image(e,t,r){const i=Li(e);if(i===null)return r;e=i;let s=`<img src="${e}" alt="${r}"`;return t&&(s+=` title="${t}"`),s+=">",s}text(e){return e}}class Wr{strong(e){return e}em(e){return e}codespan(e){return e}del(e){return e}html(e){return e}text(e){return e}link(e,t,r){return""+r}image(e,t,r){return""+r}br(){return""}}class ht{constructor(e){_e(this,"options");_e(this,"renderer");_e(this,"textRenderer");this.options=e||It,this.options.renderer=this.options.renderer||new Qn,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new Wr}static parse(e,t){return new ht(t).parse(e)}static parseInline(e,t){return new ht(t).parseInline(e)}parse(e,t=!0){let r="";for(let i=0;i<e.length;i++){const s=e[i];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[s.type]){const a=s,o=this.options.extensions.renderers[a.type].call({parser:this},a);if(o!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(a.type)){r+=o||"";continue}}switch(s.type){case"space":continue;case"hr":{r+=this.renderer.hr();continue}case"heading":{const a=s;r+=this.renderer.heading(this.parseInline(a.tokens),a.depth,Ph(this.parseInline(a.tokens,this.textRenderer)));continue}case"code":{const a=s;r+=this.renderer.code(a.text,a.lang,!!a.escaped);continue}case"table":{const a=s;let o="",l="";for(let u=0;u<a.header.length;u++)l+=this.renderer.tablecell(this.parseInline(a.header[u].tokens),{header:!0,align:a.align[u]});o+=this.renderer.tablerow(l);let c="";for(let u=0;u<a.rows.length;u++){const f=a.rows[u];l="";for(let d=0;d<f.length;d++)l+=this.renderer.tablecell(this.parseInline(f[d].tokens),{header:!1,align:a.align[d]});c+=this.renderer.tablerow(l)}r+=this.renderer.table(o,c);continue}case"blockquote":{const a=s,o=this.parse(a.tokens);r+=this.renderer.blockquote(o);continue}case"list":{const a=s,o=a.ordered,l=a.start,c=a.loose;let u="";for(let f=0;f<a.items.length;f++){const d=a.items[f],g=d.checked,v=d.task;let x="";if(d.task){const D=this.renderer.checkbox(!!g);c?d.tokens.length>0&&d.tokens[0].type==="paragraph"?(d.tokens[0].text=D+" "+d.tokens[0].text,d.tokens[0].tokens&&d.tokens[0].tokens.length>0&&d.tokens[0].tokens[0].type==="text"&&(d.tokens[0].tokens[0].text=D+" "+d.tokens[0].tokens[0].text)):d.tokens.unshift({type:"text",text:D+" "}):x+=D+" "}x+=this.parse(d.tokens,c),u+=this.renderer.listitem(x,v,!!g)}r+=this.renderer.list(u,o,l);continue}case"html":{const a=s;r+=this.renderer.html(a.text,a.block);continue}case"paragraph":{const a=s;r+=this.renderer.paragraph(this.parseInline(a.tokens));continue}case"text":{let a=s,o=a.tokens?this.parseInline(a.tokens):a.text;for(;i+1<e.length&&e[i+1].type==="text";)a=e[++i],o+=`
`+(a.tokens?this.parseInline(a.tokens):a.text);r+=t?this.renderer.paragraph(o):o;continue}default:{const a='Token with "'+s.type+'" type was not found.';if(this.options.silent)return console.error(a),"";throw new Error(a)}}}return r}parseInline(e,t){t=t||this.renderer;let r="";for(let i=0;i<e.length;i++){const s=e[i];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[s.type]){const a=this.options.extensions.renderers[s.type].call({parser:this},s);if(a!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(s.type)){r+=a||"";continue}}switch(s.type){case"escape":{const a=s;r+=t.text(a.text);break}case"html":{const a=s;r+=t.html(a.text);break}case"link":{const a=s;r+=t.link(a.href,a.title,this.parseInline(a.tokens,t));break}case"image":{const a=s;r+=t.image(a.href,a.title,a.text);break}case"strong":{const a=s;r+=t.strong(this.parseInline(a.tokens,t));break}case"em":{const a=s;r+=t.em(this.parseInline(a.tokens,t));break}case"codespan":{const a=s;r+=t.codespan(a.text);break}case"br":{r+=t.br();break}case"del":{const a=s;r+=t.del(this.parseInline(a.tokens,t));break}case"text":{const a=s;r+=t.text(a.text);break}default:{const a='Token with "'+s.type+'" type was not found.';if(this.options.silent)return console.error(a),"";throw new Error(a)}}}return r}}class hn{constructor(e){_e(this,"options");this.options=e||It}preprocess(e){return e}postprocess(e){return e}}_e(hn,"passThroughHooks",new Set(["preprocess","postprocess"]));var wn,Pr,Yn,Qs;class Lh{constructor(...e){ur(this,wn);ur(this,Yn);_e(this,"defaults",Zr());_e(this,"options",this.setOptions);_e(this,"parse",Tn(this,wn,Pr).call(this,ct.lex,ht.parse));_e(this,"parseInline",Tn(this,wn,Pr).call(this,ct.lexInline,ht.parseInline));_e(this,"Parser",ht);_e(this,"parser",ht.parse);_e(this,"Renderer",Qn);_e(this,"TextRenderer",Wr);_e(this,"Lexer",ct);_e(this,"lexer",ct.lex);_e(this,"Tokenizer",Xn);_e(this,"Hooks",hn);this.use(...e)}walkTokens(e,t){var i,s;let r=[];for(const a of e)switch(r=r.concat(t.call(this,a)),a.type){case"table":{const o=a;for(const l of o.header)r=r.concat(this.walkTokens(l.tokens,t));for(const l of o.rows)for(const c of l)r=r.concat(this.walkTokens(c.tokens,t));break}case"list":{const o=a;r=r.concat(this.walkTokens(o.items,t));break}default:{const o=a;(s=(i=this.defaults.extensions)==null?void 0:i.childTokens)!=null&&s[o.type]?this.defaults.extensions.childTokens[o.type].forEach(l=>{r=r.concat(this.walkTokens(o[l],t))}):o.tokens&&(r=r.concat(this.walkTokens(o.tokens,t)))}}return r}use(...e){const t=this.defaults.extensions||{renderers:{},childTokens:{}};return e.forEach(r=>{const i={...r};if(i.async=this.defaults.async||i.async||!1,r.extensions&&(r.extensions.forEach(s=>{if(!s.name)throw new Error("extension name required");if("renderer"in s){const a=t.renderers[s.name];a?t.renderers[s.name]=function(...o){let l=s.renderer.apply(this,o);return l===!1&&(l=a.apply(this,o)),l}:t.renderers[s.name]=s.renderer}if("tokenizer"in s){if(!s.level||s.level!=="block"&&s.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");const a=t[s.level];a?a.unshift(s.tokenizer):t[s.level]=[s.tokenizer],s.start&&(s.level==="block"?t.startBlock?t.startBlock.push(s.start):t.startBlock=[s.start]:s.level==="inline"&&(t.startInline?t.startInline.push(s.start):t.startInline=[s.start]))}"childTokens"in s&&s.childTokens&&(t.childTokens[s.name]=s.childTokens)}),i.extensions=t),r.renderer){const s=this.defaults.renderer||new Qn(this.defaults);for(const a in r.renderer){const o=r.renderer[a],l=a,c=s[l];s[l]=(...u)=>{let f=o.apply(s,u);return f===!1&&(f=c.apply(s,u)),f||""}}i.renderer=s}if(r.tokenizer){const s=this.defaults.tokenizer||new Xn(this.defaults);for(const a in r.tokenizer){const o=r.tokenizer[a],l=a,c=s[l];s[l]=(...u)=>{let f=o.apply(s,u);return f===!1&&(f=c.apply(s,u)),f}}i.tokenizer=s}if(r.hooks){const s=this.defaults.hooks||new hn;for(const a in r.hooks){const o=r.hooks[a],l=a,c=s[l];hn.passThroughHooks.has(a)?s[l]=u=>{if(this.defaults.async)return Promise.resolve(o.call(s,u)).then(d=>c.call(s,d));const f=o.call(s,u);return c.call(s,f)}:s[l]=(...u)=>{let f=o.apply(s,u);return f===!1&&(f=c.apply(s,u)),f}}i.hooks=s}if(r.walkTokens){const s=this.defaults.walkTokens,a=r.walkTokens;i.walkTokens=function(o){let l=[];return l.push(a.call(this,o)),s&&(l=l.concat(s.call(this,o))),l}}this.defaults={...this.defaults,...i}}),this}setOptions(e){return this.defaults={...this.defaults,...e},this}}wn=new WeakSet,Pr=function(e,t){return(r,i)=>{const s={...i},a={...this.defaults,...s};this.defaults.async===!0&&s.async===!1&&(a.silent||console.warn("marked(): The async option was set to true by an extension. The async: false option sent to parse will be ignored."),a.async=!0);const o=Tn(this,Yn,Qs).call(this,!!a.silent,!!a.async);if(typeof r>"u"||r===null)return o(new Error("marked(): input parameter is undefined or null"));if(typeof r!="string")return o(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(r)+", string expected"));if(a.hooks&&(a.hooks.options=a),a.async)return Promise.resolve(a.hooks?a.hooks.preprocess(r):r).then(l=>e(l,a)).then(l=>a.walkTokens?Promise.all(this.walkTokens(l,a.walkTokens)).then(()=>l):l).then(l=>t(l,a)).then(l=>a.hooks?a.hooks.postprocess(l):l).catch(o);try{a.hooks&&(r=a.hooks.preprocess(r));const l=e(r,a);a.walkTokens&&this.walkTokens(l,a.walkTokens);let c=t(l,a);return a.hooks&&(c=a.hooks.postprocess(c)),c}catch(l){return o(l)}}},Yn=new WeakSet,Qs=function(e,t){return r=>{if(r.message+=`
Please report this to https://github.com/markedjs/marked.`,e){const i="<p>An error occurred:</p><pre>"+Ge(r.message+"",!0)+"</pre>";return t?Promise.resolve(i):i}if(t)return Promise.reject(r);throw r}};const Ft=new Lh;function de(n,e){return Ft.parse(n,e)}de.options=de.setOptions=function(n){return Ft.setOptions(n),de.defaults=Ft.defaults,Zs(de.defaults),de};de.getDefaults=Zr;de.defaults=It;de.use=function(...n){return Ft.use(...n),de.defaults=Ft.defaults,Zs(de.defaults),de};de.walkTokens=function(n,e){return Ft.walkTokens(n,e)};de.parseInline=Ft.parseInline;de.Parser=ht;de.parser=ht.parse;de.Renderer=Qn;de.TextRenderer=Wr;de.Lexer=ct;de.lexer=ct.lex;de.Tokenizer=Xn;de.Hooks=hn;de.parse=de;de.options;de.setOptions;de.use;de.walkTokens;de.parseInline;ht.parse;ct.lex;function Nh(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Ys={};(function(n){function e(b,k){for(var y=0;y<k.length;y++){var h=k[y];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(b,l(h.key),h)}}function t(b,k,y){return k&&e(b.prototype,k),y&&e(b,y),Object.defineProperty(b,"prototype",{writable:!1}),b}function r(){return r=Object.assign?Object.assign.bind():function(b){for(var k=1;k<arguments.length;k++){var y=arguments[k];for(var h in y)Object.prototype.hasOwnProperty.call(y,h)&&(b[h]=y[h])}return b},r.apply(this,arguments)}function i(b,k){if(b){if(typeof b=="string")return s(b,k);var y=Object.prototype.toString.call(b).slice(8,-1);if(y==="Object"&&b.constructor&&(y=b.constructor.name),y==="Map"||y==="Set")return Array.from(b);if(y==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(y))return s(b,k)}}function s(b,k){(k==null||k>b.length)&&(k=b.length);for(var y=0,h=new Array(k);y<k;y++)h[y]=b[y];return h}function a(b,k){var y=typeof Symbol<"u"&&b[Symbol.iterator]||b["@@iterator"];if(y)return(y=y.call(b)).next.bind(y);if(Array.isArray(b)||(y=i(b))||k&&b&&typeof b.length=="number"){y&&(b=y);var h=0;return function(){return h>=b.length?{done:!0}:{done:!1,value:b[h++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function o(b,k){if(typeof b!="object"||b===null)return b;var y=b[Symbol.toPrimitive];if(y!==void 0){var h=y.call(b,k||"default");if(typeof h!="object")return h;throw new TypeError("@@toPrimitive must return a primitive value.")}return(k==="string"?String:Number)(b)}function l(b){var k=o(b,"string");return typeof k=="symbol"?k:String(k)}function c(){return{async:!1,baseUrl:null,breaks:!1,extensions:null,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,hooks:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1}}n.defaults=c();function u(b){n.defaults=b}var f=/[&<>"']/,d=new RegExp(f.source,"g"),g=/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,v=new RegExp(g.source,"g"),x={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},D=function(k){return x[k]};function E(b,k){if(k){if(f.test(b))return b.replace(d,D)}else if(g.test(b))return b.replace(v,D);return b}var S=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig;function F(b){return b.replace(S,function(k,y){return y=y.toLowerCase(),y==="colon"?":":y.charAt(0)==="#"?y.charAt(1)==="x"?String.fromCharCode(parseInt(y.substring(2),16)):String.fromCharCode(+y.substring(1)):""})}var $=/(^|[^\[])\^/g;function T(b,k){b=typeof b=="string"?b:b.source,k=k||"";var y={replace:function(p,_){return _=_.source||_,_=_.replace($,"$1"),b=b.replace(p,_),y},getRegex:function(){return new RegExp(b,k)}};return y}var P=/[^\w:]/g,R=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;function z(b,k,y){if(b){var h;try{h=decodeURIComponent(F(y)).replace(P,"").toLowerCase()}catch{return null}if(h.indexOf("javascript:")===0||h.indexOf("vbscript:")===0||h.indexOf("data:")===0)return null}k&&!R.test(y)&&(y=Z(k,y));try{y=encodeURI(y).replace(/%25/g,"%")}catch{return null}return y}var ee={},ce=/^[^:]+:\/*[^/]*$/,ge=/^([^:]+:)[\s\S]*$/,he=/^([^:]+:\/*[^/]*)[\s\S]*$/;function Z(b,k){ee[" "+b]||(ce.test(b)?ee[" "+b]=b+"/":ee[" "+b]=ye(b,"/",!0)),b=ee[" "+b];var y=b.indexOf(":")===-1;return k.substring(0,2)==="//"?y?k:b.replace(ge,"$1")+k:k.charAt(0)==="/"?y?k:b.replace(he,"$1")+k:b+k}var Q={exec:function(){}};function De(b,k){var y=b.replace(/\|/g,function(_,m,w){for(var j=!1,N=m;--N>=0&&w[N]==="\\";)j=!j;return j?"|":" |"}),h=y.split(/ \|/),p=0;if(h[0].trim()||h.shift(),h.length>0&&!h[h.length-1].trim()&&h.pop(),h.length>k)h.splice(k);else for(;h.length<k;)h.push("");for(;p<h.length;p++)h[p]=h[p].trim().replace(/\\\|/g,"|");return h}function ye(b,k,y){var h=b.length;if(h===0)return"";for(var p=0;p<h;){var _=b.charAt(h-p-1);if(_===k&&!y)p++;else if(_!==k&&y)p++;else break}return b.slice(0,h-p)}function Se(b,k){if(b.indexOf(k[1])===-1)return-1;for(var y=b.length,h=0,p=0;p<y;p++)if(b[p]==="\\")p++;else if(b[p]===k[0])h++;else if(b[p]===k[1]&&(h--,h<0))return p;return-1}function Re(b){b&&b.sanitize&&!b.silent&&console.warn("marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options")}function Ae(b,k){if(k<1)return"";for(var y="";k>1;)k&1&&(y+=b),k>>=1,b+=b;return y+b}function Fe(b,k,y,h){var p=k.href,_=k.title?E(k.title):null,m=b[1].replace(/\\([\[\]])/g,"$1");if(b[0].charAt(0)!=="!"){h.state.inLink=!0;var w={type:"link",raw:y,href:p,title:_,text:m,tokens:h.inlineTokens(m)};return h.state.inLink=!1,w}return{type:"image",raw:y,href:p,title:_,text:E(m)}}function Qe(b,k){var y=b.match(/^(\s+)(?:```)/);if(y===null)return k;var h=y[1];return k.split(`
`).map(function(p){var _=p.match(/^\s+/);if(_===null)return p;var m=_[0];return m.length>=h.length?p.slice(h.length):p}).join(`
`)}var Ce=function(){function b(y){this.options=y||n.defaults}var k=b.prototype;return k.space=function(h){var p=this.rules.block.newline.exec(h);if(p&&p[0].length>0)return{type:"space",raw:p[0]}},k.code=function(h){var p=this.rules.block.code.exec(h);if(p){var _=p[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:p[0],codeBlockStyle:"indented",text:this.options.pedantic?_:ye(_,`
`)}}},k.fences=function(h){var p=this.rules.block.fences.exec(h);if(p){var _=p[0],m=Qe(_,p[3]||"");return{type:"code",raw:_,lang:p[2]?p[2].trim().replace(this.rules.inline._escapes,"$1"):p[2],text:m}}},k.heading=function(h){var p=this.rules.block.heading.exec(h);if(p){var _=p[2].trim();if(/#$/.test(_)){var m=ye(_,"#");(this.options.pedantic||!m||/ $/.test(m))&&(_=m.trim())}return{type:"heading",raw:p[0],depth:p[1].length,text:_,tokens:this.lexer.inline(_)}}},k.hr=function(h){var p=this.rules.block.hr.exec(h);if(p)return{type:"hr",raw:p[0]}},k.blockquote=function(h){var p=this.rules.block.blockquote.exec(h);if(p){var _=p[0].replace(/^ *>[ \t]?/gm,""),m=this.lexer.state.top;this.lexer.state.top=!0;var w=this.lexer.blockTokens(_);return this.lexer.state.top=m,{type:"blockquote",raw:p[0],tokens:w,text:_}}},k.list=function(h){var p=this.rules.block.list.exec(h);if(p){var _,m,w,j,N,V,K,Y,U,X,O,me,Ie=p[1].trim(),lt=Ie.length>1,ke={type:"list",raw:"",ordered:lt,start:lt?+Ie.slice(0,-1):"",loose:!1,items:[]};Ie=lt?"\\d{1,9}\\"+Ie.slice(-1):"\\"+Ie,this.options.pedantic&&(Ie=lt?Ie:"[*+-]");for(var ze=new RegExp("^( {0,3}"+Ie+")((?:[	 ][^\\n]*)?(?:\\n|$))");h&&(me=!1,!(!(p=ze.exec(h))||this.rules.block.hr.test(h)));){if(_=p[0],h=h.substring(_.length),Y=p[2].split(`
`,1)[0].replace(/^\t+/,function(tn){return" ".repeat(3*tn.length)}),U=h.split(`
`,1)[0],this.options.pedantic?(j=2,O=Y.trimLeft()):(j=p[2].search(/[^ ]/),j=j>4?1:j,O=Y.slice(j),j+=p[1].length),V=!1,!Y&&/^ *$/.test(U)&&(_+=U+`
`,h=h.substring(U.length+1),me=!0),!me)for(var Xt=new RegExp("^ {0,"+Math.min(3,j-1)+"}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))"),Qt=new RegExp("^ {0,"+Math.min(3,j-1)+"}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)"),vt=new RegExp("^ {0,"+Math.min(3,j-1)+"}(?:```|~~~)"),Pt=new RegExp("^ {0,"+Math.min(3,j-1)+"}#");h&&(X=h.split(`
`,1)[0],U=X,this.options.pedantic&&(U=U.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),!(vt.test(U)||Pt.test(U)||Xt.test(U)||Qt.test(h)));){if(U.search(/[^ ]/)>=j||!U.trim())O+=`
`+U.slice(j);else{if(V||Y.search(/[^ ]/)>=4||vt.test(Y)||Pt.test(Y)||Qt.test(Y))break;O+=`
`+U}!V&&!U.trim()&&(V=!0),_+=X+`
`,h=h.substring(X.length+1),Y=U.slice(j)}ke.loose||(K?ke.loose=!0:/\n *\n *$/.test(_)&&(K=!0)),this.options.gfm&&(m=/^\[[ xX]\] /.exec(O),m&&(w=m[0]!=="[ ] ",O=O.replace(/^\[[ xX]\] +/,""))),ke.items.push({type:"list_item",raw:_,task:!!m,checked:w,loose:!1,text:O}),ke.raw+=_}ke.items[ke.items.length-1].raw=_.trimRight(),ke.items[ke.items.length-1].text=O.trimRight(),ke.raw=ke.raw.trimRight();var Yt=ke.items.length;for(N=0;N<Yt;N++)if(this.lexer.state.top=!1,ke.items[N].tokens=this.lexer.blockTokens(ke.items[N].text,[]),!ke.loose){var en=ke.items[N].tokens.filter(function(tn){return tn.type==="space"}),ea=en.length>0&&en.some(function(tn){return/\n.*\n/.test(tn.raw)});ke.loose=ea}if(ke.loose)for(N=0;N<Yt;N++)ke.items[N].loose=!0;return ke}},k.html=function(h){var p=this.rules.block.html.exec(h);if(p){var _={type:"html",raw:p[0],pre:!this.options.sanitizer&&(p[1]==="pre"||p[1]==="script"||p[1]==="style"),text:p[0]};if(this.options.sanitize){var m=this.options.sanitizer?this.options.sanitizer(p[0]):E(p[0]);_.type="paragraph",_.text=m,_.tokens=this.lexer.inline(m)}return _}},k.def=function(h){var p=this.rules.block.def.exec(h);if(p){var _=p[1].toLowerCase().replace(/\s+/g," "),m=p[2]?p[2].replace(/^<(.*)>$/,"$1").replace(this.rules.inline._escapes,"$1"):"",w=p[3]?p[3].substring(1,p[3].length-1).replace(this.rules.inline._escapes,"$1"):p[3];return{type:"def",tag:_,raw:p[0],href:m,title:w}}},k.table=function(h){var p=this.rules.block.table.exec(h);if(p){var _={type:"table",header:De(p[1]).map(function(K){return{text:K}}),align:p[2].replace(/^ *|\| *$/g,"").split(/ *\| */),rows:p[3]&&p[3].trim()?p[3].replace(/\n[ \t]*$/,"").split(`
`):[]};if(_.header.length===_.align.length){_.raw=p[0];var m=_.align.length,w,j,N,V;for(w=0;w<m;w++)/^ *-+: *$/.test(_.align[w])?_.align[w]="right":/^ *:-+: *$/.test(_.align[w])?_.align[w]="center":/^ *:-+ *$/.test(_.align[w])?_.align[w]="left":_.align[w]=null;for(m=_.rows.length,w=0;w<m;w++)_.rows[w]=De(_.rows[w],_.header.length).map(function(K){return{text:K}});for(m=_.header.length,j=0;j<m;j++)_.header[j].tokens=this.lexer.inline(_.header[j].text);for(m=_.rows.length,j=0;j<m;j++)for(V=_.rows[j],N=0;N<V.length;N++)V[N].tokens=this.lexer.inline(V[N].text);return _}}},k.lheading=function(h){var p=this.rules.block.lheading.exec(h);if(p)return{type:"heading",raw:p[0],depth:p[2].charAt(0)==="="?1:2,text:p[1],tokens:this.lexer.inline(p[1])}},k.paragraph=function(h){var p=this.rules.block.paragraph.exec(h);if(p){var _=p[1].charAt(p[1].length-1)===`
`?p[1].slice(0,-1):p[1];return{type:"paragraph",raw:p[0],text:_,tokens:this.lexer.inline(_)}}},k.text=function(h){var p=this.rules.block.text.exec(h);if(p)return{type:"text",raw:p[0],text:p[0],tokens:this.lexer.inline(p[0])}},k.escape=function(h){var p=this.rules.inline.escape.exec(h);if(p)return{type:"escape",raw:p[0],text:E(p[1])}},k.tag=function(h){var p=this.rules.inline.tag.exec(h);if(p)return!this.lexer.state.inLink&&/^<a /i.test(p[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(p[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(p[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(p[0])&&(this.lexer.state.inRawBlock=!1),{type:this.options.sanitize?"text":"html",raw:p[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(p[0]):E(p[0]):p[0]}},k.link=function(h){var p=this.rules.inline.link.exec(h);if(p){var _=p[2].trim();if(!this.options.pedantic&&/^</.test(_)){if(!/>$/.test(_))return;var m=ye(_.slice(0,-1),"\\");if((_.length-m.length)%2===0)return}else{var w=Se(p[2],"()");if(w>-1){var j=p[0].indexOf("!")===0?5:4,N=j+p[1].length+w;p[2]=p[2].substring(0,w),p[0]=p[0].substring(0,N).trim(),p[3]=""}}var V=p[2],K="";if(this.options.pedantic){var Y=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(V);Y&&(V=Y[1],K=Y[3])}else K=p[3]?p[3].slice(1,-1):"";return V=V.trim(),/^</.test(V)&&(this.options.pedantic&&!/>$/.test(_)?V=V.slice(1):V=V.slice(1,-1)),Fe(p,{href:V&&V.replace(this.rules.inline._escapes,"$1"),title:K&&K.replace(this.rules.inline._escapes,"$1")},p[0],this.lexer)}},k.reflink=function(h,p){var _;if((_=this.rules.inline.reflink.exec(h))||(_=this.rules.inline.nolink.exec(h))){var m=(_[2]||_[1]).replace(/\s+/g," ");if(m=p[m.toLowerCase()],!m){var w=_[0].charAt(0);return{type:"text",raw:w,text:w}}return Fe(_,m,_[0],this.lexer)}},k.emStrong=function(h,p,_){_===void 0&&(_="");var m=this.rules.inline.emStrong.lDelim.exec(h);if(m&&!(m[3]&&_.match(/(?:[0-9A-Za-z\xAA\xB2\xB3\xB5\xB9\xBA\xBC-\xBE\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u0660-\u0669\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07C0-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0966-\u096F\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09E6-\u09F1\u09F4-\u09F9\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A66-\u0A6F\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AE6-\u0AEF\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B66-\u0B6F\u0B71-\u0B77\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0BE6-\u0BF2\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C66-\u0C6F\u0C78-\u0C7E\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CE6-\u0CEF\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D58-\u0D61\u0D66-\u0D78\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DE6-\u0DEF\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F20-\u0F33\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F-\u1049\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u1090-\u1099\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1369-\u137C\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u17E0-\u17E9\u17F0-\u17F9\u1810-\u1819\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A16\u1A20-\u1A54\u1A80-\u1A89\u1A90-\u1A99\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B50-\u1B59\u1B83-\u1BA0\u1BAE-\u1BE5\u1C00-\u1C23\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2070\u2071\u2074-\u2079\u207F-\u2089\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2150-\u2189\u2460-\u249B\u24EA-\u24FF\u2776-\u2793\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2CFD\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u3192-\u3195\u31A0-\u31BF\u31F0-\u31FF\u3220-\u3229\u3248-\u324F\u3251-\u325F\u3280-\u3289\u32B1-\u32BF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA830-\uA835\uA840-\uA873\uA882-\uA8B3\uA8D0-\uA8D9\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA900-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF-\uA9D9\uA9E0-\uA9E4\uA9E6-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA50-\uAA59\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD07-\uDD33\uDD40-\uDD78\uDD8A\uDD8B\uDE80-\uDE9C\uDEA0-\uDED0\uDEE1-\uDEFB\uDF00-\uDF23\uDF2D-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC58-\uDC76\uDC79-\uDC9E\uDCA7-\uDCAF\uDCE0-\uDCF2\uDCF4\uDCF5\uDCFB-\uDD1B\uDD20-\uDD39\uDD80-\uDDB7\uDDBC-\uDDCF\uDDD2-\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE40-\uDE48\uDE60-\uDE7E\uDE80-\uDE9F\uDEC0-\uDEC7\uDEC9-\uDEE4\uDEEB-\uDEEF\uDF00-\uDF35\uDF40-\uDF55\uDF58-\uDF72\uDF78-\uDF91\uDFA9-\uDFAF]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDCFA-\uDD23\uDD30-\uDD39\uDE60-\uDE7E\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF27\uDF30-\uDF45\uDF51-\uDF54\uDF70-\uDF81\uDFB0-\uDFCB\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC52-\uDC6F\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD03-\uDD26\uDD36-\uDD3F\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDD0-\uDDDA\uDDDC\uDDE1-\uDDF4\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDEF0-\uDEF9\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC50-\uDC59\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE50-\uDE59\uDE80-\uDEAA\uDEB8\uDEC0-\uDEC9\uDF00-\uDF1A\uDF30-\uDF3B\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCF2\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDD50-\uDD59\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC50-\uDC6C\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD50-\uDD59\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDDA0-\uDDA9\uDEE0-\uDEF2\uDFB0\uDFC0-\uDFD4]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDE70-\uDEBE\uDEC0-\uDEC9\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF50-\uDF59\uDF5B-\uDF61\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE96\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD834[\uDEE0-\uDEF3\uDF60-\uDF78]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD837[\uDF00-\uDF1E]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD40-\uDD49\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB\uDEF0-\uDEF9]|\uD839[\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDCC7-\uDCCF\uDD00-\uDD43\uDD4B\uDD50-\uDD59]|\uD83B[\uDC71-\uDCAB\uDCAD-\uDCAF\uDCB1-\uDCB4\uDD01-\uDD2D\uDD2F-\uDD3D\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD83C[\uDD00-\uDD0C]|\uD83E[\uDFF0-\uDFF9]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF38\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])/))){var w=m[1]||m[2]||"";if(!w||w&&(_===""||this.rules.inline.punctuation.exec(_))){var j=m[0].length-1,N,V,K=j,Y=0,U=m[0][0]==="*"?this.rules.inline.emStrong.rDelimAst:this.rules.inline.emStrong.rDelimUnd;for(U.lastIndex=0,p=p.slice(-1*h.length+j);(m=U.exec(p))!=null;)if(N=m[1]||m[2]||m[3]||m[4]||m[5]||m[6],!!N){if(V=N.length,m[3]||m[4]){K+=V;continue}else if((m[5]||m[6])&&j%3&&!((j+V)%3)){Y+=V;continue}if(K-=V,!(K>0)){V=Math.min(V,V+K+Y);var X=h.slice(0,j+m.index+(m[0].length-N.length)+V);if(Math.min(j,V)%2){var O=X.slice(1,-1);return{type:"em",raw:X,text:O,tokens:this.lexer.inlineTokens(O)}}var me=X.slice(2,-2);return{type:"strong",raw:X,text:me,tokens:this.lexer.inlineTokens(me)}}}}}},k.codespan=function(h){var p=this.rules.inline.code.exec(h);if(p){var _=p[2].replace(/\n/g," "),m=/[^ ]/.test(_),w=/^ /.test(_)&&/ $/.test(_);return m&&w&&(_=_.substring(1,_.length-1)),_=E(_,!0),{type:"codespan",raw:p[0],text:_}}},k.br=function(h){var p=this.rules.inline.br.exec(h);if(p)return{type:"br",raw:p[0]}},k.del=function(h){var p=this.rules.inline.del.exec(h);if(p)return{type:"del",raw:p[0],text:p[2],tokens:this.lexer.inlineTokens(p[2])}},k.autolink=function(h,p){var _=this.rules.inline.autolink.exec(h);if(_){var m,w;return _[2]==="@"?(m=E(this.options.mangle?p(_[1]):_[1]),w="mailto:"+m):(m=E(_[1]),w=m),{type:"link",raw:_[0],text:m,href:w,tokens:[{type:"text",raw:m,text:m}]}}},k.url=function(h,p){var _;if(_=this.rules.inline.url.exec(h)){var m,w;if(_[2]==="@")m=E(this.options.mangle?p(_[0]):_[0]),w="mailto:"+m;else{var j;do j=_[0],_[0]=this.rules.inline._backpedal.exec(_[0])[0];while(j!==_[0]);m=E(_[0]),_[1]==="www."?w="http://"+_[0]:w=_[0]}return{type:"link",raw:_[0],text:m,href:w,tokens:[{type:"text",raw:m,text:m}]}}},k.inlineText=function(h,p){var _=this.rules.inline.text.exec(h);if(_){var m;return this.lexer.state.inRawBlock?m=this.options.sanitize?this.options.sanitizer?this.options.sanitizer(_[0]):E(_[0]):_[0]:m=E(this.options.smartypants?p(_[0]):_[0]),{type:"text",raw:_[0],text:m}}},b}(),J={newline:/^(?: *(?:\n|$))+/,code:/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,fences:/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,hr:/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/,html:"^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))",def:/^ {0,3}\[(label)\]: *(?:\n *)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/,table:Q,lheading:/^((?:.|\n(?!\n))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,_paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,text:/^[^\n]+/};J._label=/(?!\s*\])(?:\\.|[^\[\]\\])+/,J._title=/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/,J.def=T(J.def).replace("label",J._label).replace("title",J._title).getRegex(),J.bullet=/(?:[*+-]|\d{1,9}[.)])/,J.listItemStart=T(/^( *)(bull) */).replace("bull",J.bullet).getRegex(),J.list=T(J.list).replace(/bull/g,J.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+J.def.source+")").getRegex(),J._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",J._comment=/<!--(?!-?>)[\s\S]*?(?:-->|$)/,J.html=T(J.html,"i").replace("comment",J._comment).replace("tag",J._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),J.paragraph=T(J._paragraph).replace("hr",J.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",J._tag).getRegex(),J.blockquote=T(J.blockquote).replace("paragraph",J.paragraph).getRegex(),J.normal=r({},J),J.gfm=r({},J.normal,{table:"^ *([^\\n ].*\\|.*)\\n {0,3}(?:\\| *)?(:?-+:? *(?:\\| *:?-+:? *)*)(?:\\| *)?(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)"}),J.gfm.table=T(J.gfm.table).replace("hr",J.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",J._tag).getRegex(),J.gfm.paragraph=T(J._paragraph).replace("hr",J.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("table",J.gfm.table).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",J._tag).getRegex(),J.pedantic=r({},J.normal,{html:T(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",J._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:Q,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:T(J.normal._paragraph).replace("hr",J.hr).replace("heading",` *#{1,6} *[^
]`).replace("lheading",J.lheading).replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").getRegex()});var B={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:Q,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(ref)\]/,nolink:/^!?\[(ref)\](?:\[\])?/,reflinkSearch:"reflink|nolink(?!\\()",emStrong:{lDelim:/^(?:\*+(?:([punct_])|[^\s*]))|^_+(?:([punct*])|([^\s_]))/,rDelimAst:/^(?:[^_*\\]|\\.)*?\_\_(?:[^_*\\]|\\.)*?\*(?:[^_*\\]|\\.)*?(?=\_\_)|(?:[^*\\]|\\.)+(?=[^*])|[punct_](\*+)(?=[\s]|$)|(?:[^punct*_\s\\]|\\.)(\*+)(?=[punct_\s]|$)|[punct_\s](\*+)(?=[^punct*_\s])|[\s](\*+)(?=[punct_])|[punct_](\*+)(?=[punct_])|(?:[^punct*_\s\\]|\\.)(\*+)(?=[^punct*_\s])/,rDelimUnd:/^(?:[^_*\\]|\\.)*?\*\*(?:[^_*\\]|\\.)*?\_(?:[^_*\\]|\\.)*?(?=\*\*)|(?:[^_\\]|\\.)+(?=[^_])|[punct*](\_+)(?=[\s]|$)|(?:[^punct*_\s\\]|\\.)(\_+)(?=[punct*\s]|$)|[punct*\s](\_+)(?=[^punct*_\s])|[\s](\_+)(?=[punct*])|[punct*](\_+)(?=[punct*])/},code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:Q,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,punctuation:/^([\spunctuation])/};B._punctuation="!\"#$%&'()+\\-.,/:;<=>?@\\[\\]`^{|}~",B.punctuation=T(B.punctuation).replace(/punctuation/g,B._punctuation).getRegex(),B.blockSkip=/\[[^\]]*?\]\([^\)]*?\)|`[^`]*?`|<[^>]*?>/g,B.escapedEmSt=/(?:^|[^\\])(?:\\\\)*\\[*_]/g,B._comment=T(J._comment).replace("(?:-->|$)","-->").getRegex(),B.emStrong.lDelim=T(B.emStrong.lDelim).replace(/punct/g,B._punctuation).getRegex(),B.emStrong.rDelimAst=T(B.emStrong.rDelimAst,"g").replace(/punct/g,B._punctuation).getRegex(),B.emStrong.rDelimUnd=T(B.emStrong.rDelimUnd,"g").replace(/punct/g,B._punctuation).getRegex(),B._escapes=/\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/g,B._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/,B._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/,B.autolink=T(B.autolink).replace("scheme",B._scheme).replace("email",B._email).getRegex(),B._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/,B.tag=T(B.tag).replace("comment",B._comment).replace("attribute",B._attribute).getRegex(),B._label=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,B._href=/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/,B._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/,B.link=T(B.link).replace("label",B._label).replace("href",B._href).replace("title",B._title).getRegex(),B.reflink=T(B.reflink).replace("label",B._label).replace("ref",J._label).getRegex(),B.nolink=T(B.nolink).replace("ref",J._label).getRegex(),B.reflinkSearch=T(B.reflinkSearch,"g").replace("reflink",B.reflink).replace("nolink",B.nolink).getRegex(),B.normal=r({},B),B.pedantic=r({},B.normal,{strong:{start:/^__|\*\*/,middle:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,endAst:/\*\*(?!\*)/g,endUnd:/__(?!_)/g},em:{start:/^_|\*/,middle:/^()\*(?=\S)([\s\S]*?\S)\*(?!\*)|^_(?=\S)([\s\S]*?\S)_(?!_)/,endAst:/\*(?!\*)/g,endUnd:/_(?!_)/g},link:T(/^!?\[(label)\]\((.*?)\)/).replace("label",B._label).getRegex(),reflink:T(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",B._label).getRegex()}),B.gfm=r({},B.normal,{escape:T(B.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/}),B.gfm.url=T(B.gfm.url,"i").replace("email",B.gfm._extended_email).getRegex(),B.breaks=r({},B.gfm,{br:T(B.br).replace("{2,}","*").getRegex(),text:T(B.gfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()});function $e(b){return b.replace(/---/g,"").replace(/--/g,"").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1").replace(/'/g,"").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1").replace(/"/g,"").replace(/\.{3}/g,"")}function Ye(b){var k="",y,h,p=b.length;for(y=0;y<p;y++)h=b.charCodeAt(y),Math.random()>.5&&(h="x"+h.toString(16)),k+="&#"+h+";";return k}var qe=function(){function b(y){this.tokens=[],this.tokens.links=Object.create(null),this.options=y||n.defaults,this.options.tokenizer=this.options.tokenizer||new Ce,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};var h={block:J.normal,inline:B.normal};this.options.pedantic?(h.block=J.pedantic,h.inline=B.pedantic):this.options.gfm&&(h.block=J.gfm,this.options.breaks?h.inline=B.breaks:h.inline=B.gfm),this.tokenizer.rules=h}b.lex=function(h,p){var _=new b(p);return _.lex(h)},b.lexInline=function(h,p){var _=new b(p);return _.inlineTokens(h)};var k=b.prototype;return k.lex=function(h){h=h.replace(/\r\n|\r/g,`
`),this.blockTokens(h,this.tokens);for(var p;p=this.inlineQueue.shift();)this.inlineTokens(p.src,p.tokens);return this.tokens},k.blockTokens=function(h,p){var _=this;p===void 0&&(p=[]),this.options.pedantic?h=h.replace(/\t/g,"    ").replace(/^ +$/gm,""):h=h.replace(/^( *)(\t+)/gm,function(K,Y,U){return Y+"    ".repeat(U.length)});for(var m,w,j,N;h;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(function(K){return(m=K.call({lexer:_},h,p))?(h=h.substring(m.raw.length),p.push(m),!0):!1}))){if(m=this.tokenizer.space(h)){h=h.substring(m.raw.length),m.raw.length===1&&p.length>0?p[p.length-1].raw+=`
`:p.push(m);continue}if(m=this.tokenizer.code(h)){h=h.substring(m.raw.length),w=p[p.length-1],w&&(w.type==="paragraph"||w.type==="text")?(w.raw+=`
`+m.raw,w.text+=`
`+m.text,this.inlineQueue[this.inlineQueue.length-1].src=w.text):p.push(m);continue}if(m=this.tokenizer.fences(h)){h=h.substring(m.raw.length),p.push(m);continue}if(m=this.tokenizer.heading(h)){h=h.substring(m.raw.length),p.push(m);continue}if(m=this.tokenizer.hr(h)){h=h.substring(m.raw.length),p.push(m);continue}if(m=this.tokenizer.blockquote(h)){h=h.substring(m.raw.length),p.push(m);continue}if(m=this.tokenizer.list(h)){h=h.substring(m.raw.length),p.push(m);continue}if(m=this.tokenizer.html(h)){h=h.substring(m.raw.length),p.push(m);continue}if(m=this.tokenizer.def(h)){h=h.substring(m.raw.length),w=p[p.length-1],w&&(w.type==="paragraph"||w.type==="text")?(w.raw+=`
`+m.raw,w.text+=`
`+m.raw,this.inlineQueue[this.inlineQueue.length-1].src=w.text):this.tokens.links[m.tag]||(this.tokens.links[m.tag]={href:m.href,title:m.title});continue}if(m=this.tokenizer.table(h)){h=h.substring(m.raw.length),p.push(m);continue}if(m=this.tokenizer.lheading(h)){h=h.substring(m.raw.length),p.push(m);continue}if(j=h,this.options.extensions&&this.options.extensions.startBlock&&function(){var K=1/0,Y=h.slice(1),U=void 0;_.options.extensions.startBlock.forEach(function(X){U=X.call({lexer:this},Y),typeof U=="number"&&U>=0&&(K=Math.min(K,U))}),K<1/0&&K>=0&&(j=h.substring(0,K+1))}(),this.state.top&&(m=this.tokenizer.paragraph(j))){w=p[p.length-1],N&&w.type==="paragraph"?(w.raw+=`
`+m.raw,w.text+=`
`+m.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=w.text):p.push(m),N=j.length!==h.length,h=h.substring(m.raw.length);continue}if(m=this.tokenizer.text(h)){h=h.substring(m.raw.length),w=p[p.length-1],w&&w.type==="text"?(w.raw+=`
`+m.raw,w.text+=`
`+m.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=w.text):p.push(m);continue}if(h){var V="Infinite loop on byte: "+h.charCodeAt(0);if(this.options.silent){console.error(V);break}else throw new Error(V)}}return this.state.top=!0,p},k.inline=function(h,p){return p===void 0&&(p=[]),this.inlineQueue.push({src:h,tokens:p}),p},k.inlineTokens=function(h,p){var _=this;p===void 0&&(p=[]);var m,w,j,N=h,V,K,Y;if(this.tokens.links){var U=Object.keys(this.tokens.links);if(U.length>0)for(;(V=this.tokenizer.rules.inline.reflinkSearch.exec(N))!=null;)U.includes(V[0].slice(V[0].lastIndexOf("[")+1,-1))&&(N=N.slice(0,V.index)+"["+Ae("a",V[0].length-2)+"]"+N.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(V=this.tokenizer.rules.inline.blockSkip.exec(N))!=null;)N=N.slice(0,V.index)+"["+Ae("a",V[0].length-2)+"]"+N.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;(V=this.tokenizer.rules.inline.escapedEmSt.exec(N))!=null;)N=N.slice(0,V.index+V[0].length-2)+"++"+N.slice(this.tokenizer.rules.inline.escapedEmSt.lastIndex),this.tokenizer.rules.inline.escapedEmSt.lastIndex--;for(;h;)if(K||(Y=""),K=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(function(O){return(m=O.call({lexer:_},h,p))?(h=h.substring(m.raw.length),p.push(m),!0):!1}))){if(m=this.tokenizer.escape(h)){h=h.substring(m.raw.length),p.push(m);continue}if(m=this.tokenizer.tag(h)){h=h.substring(m.raw.length),w=p[p.length-1],w&&m.type==="text"&&w.type==="text"?(w.raw+=m.raw,w.text+=m.text):p.push(m);continue}if(m=this.tokenizer.link(h)){h=h.substring(m.raw.length),p.push(m);continue}if(m=this.tokenizer.reflink(h,this.tokens.links)){h=h.substring(m.raw.length),w=p[p.length-1],w&&m.type==="text"&&w.type==="text"?(w.raw+=m.raw,w.text+=m.text):p.push(m);continue}if(m=this.tokenizer.emStrong(h,N,Y)){h=h.substring(m.raw.length),p.push(m);continue}if(m=this.tokenizer.codespan(h)){h=h.substring(m.raw.length),p.push(m);continue}if(m=this.tokenizer.br(h)){h=h.substring(m.raw.length),p.push(m);continue}if(m=this.tokenizer.del(h)){h=h.substring(m.raw.length),p.push(m);continue}if(m=this.tokenizer.autolink(h,Ye)){h=h.substring(m.raw.length),p.push(m);continue}if(!this.state.inLink&&(m=this.tokenizer.url(h,Ye))){h=h.substring(m.raw.length),p.push(m);continue}if(j=h,this.options.extensions&&this.options.extensions.startInline&&function(){var O=1/0,me=h.slice(1),Ie=void 0;_.options.extensions.startInline.forEach(function(lt){Ie=lt.call({lexer:this},me),typeof Ie=="number"&&Ie>=0&&(O=Math.min(O,Ie))}),O<1/0&&O>=0&&(j=h.substring(0,O+1))}(),m=this.tokenizer.inlineText(j,$e)){h=h.substring(m.raw.length),m.raw.slice(-1)!=="_"&&(Y=m.raw.slice(-1)),K=!0,w=p[p.length-1],w&&w.type==="text"?(w.raw+=m.raw,w.text+=m.text):p.push(m);continue}if(h){var X="Infinite loop on byte: "+h.charCodeAt(0);if(this.options.silent){console.error(X);break}else throw new Error(X)}}return p},t(b,null,[{key:"rules",get:function(){return{block:J,inline:B}}}]),b}(),re=function(){function b(y){this.options=y||n.defaults}var k=b.prototype;return k.code=function(h,p,_){var m=(p||"").match(/\S*/)[0];if(this.options.highlight){var w=this.options.highlight(h,m);w!=null&&w!==h&&(_=!0,h=w)}return h=h.replace(/\n$/,"")+`
`,m?'<pre><code class="'+this.options.langPrefix+E(m)+'">'+(_?h:E(h,!0))+`</code></pre>
`:"<pre><code>"+(_?h:E(h,!0))+`</code></pre>
`},k.blockquote=function(h){return`<blockquote>
`+h+`</blockquote>
`},k.html=function(h){return h},k.heading=function(h,p,_,m){if(this.options.headerIds){var w=this.options.headerPrefix+m.slug(_);return"<h"+p+' id="'+w+'">'+h+"</h"+p+`>
`}return"<h"+p+">"+h+"</h"+p+`>
`},k.hr=function(){return this.options.xhtml?`<hr/>
`:`<hr>
`},k.list=function(h,p,_){var m=p?"ol":"ul",w=p&&_!==1?' start="'+_+'"':"";return"<"+m+w+`>
`+h+"</"+m+`>
`},k.listitem=function(h){return"<li>"+h+`</li>
`},k.checkbox=function(h){return"<input "+(h?'checked="" ':"")+'disabled="" type="checkbox"'+(this.options.xhtml?" /":"")+"> "},k.paragraph=function(h){return"<p>"+h+`</p>
`},k.table=function(h,p){return p&&(p="<tbody>"+p+"</tbody>"),`<table>
<thead>
`+h+`</thead>
`+p+`</table>
`},k.tablerow=function(h){return`<tr>
`+h+`</tr>
`},k.tablecell=function(h,p){var _=p.header?"th":"td",m=p.align?"<"+_+' align="'+p.align+'">':"<"+_+">";return m+h+("</"+_+`>
`)},k.strong=function(h){return"<strong>"+h+"</strong>"},k.em=function(h){return"<em>"+h+"</em>"},k.codespan=function(h){return"<code>"+h+"</code>"},k.br=function(){return this.options.xhtml?"<br/>":"<br>"},k.del=function(h){return"<del>"+h+"</del>"},k.link=function(h,p,_){if(h=z(this.options.sanitize,this.options.baseUrl,h),h===null)return _;var m='<a href="'+h+'"';return p&&(m+=' title="'+p+'"'),m+=">"+_+"</a>",m},k.image=function(h,p,_){if(h=z(this.options.sanitize,this.options.baseUrl,h),h===null)return _;var m='<img src="'+h+'" alt="'+_+'"';return p&&(m+=' title="'+p+'"'),m+=this.options.xhtml?"/>":">",m},k.text=function(h){return h},b}(),be=function(){function b(){}var k=b.prototype;return k.strong=function(h){return h},k.em=function(h){return h},k.codespan=function(h){return h},k.del=function(h){return h},k.html=function(h){return h},k.text=function(h){return h},k.link=function(h,p,_){return""+_},k.image=function(h,p,_){return""+_},k.br=function(){return""},b}(),ve=function(){function b(){this.seen={}}var k=b.prototype;return k.serialize=function(h){return h.toLowerCase().trim().replace(/<[!\/a-z].*?>/ig,"").replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,./:;<=>?@[\]^`{|}~]/g,"").replace(/\s/g,"-")},k.getNextSafeSlug=function(h,p){var _=h,m=0;if(this.seen.hasOwnProperty(_)){m=this.seen[h];do m++,_=h+"-"+m;while(this.seen.hasOwnProperty(_))}return p||(this.seen[h]=m,this.seen[_]=0),_},k.slug=function(h,p){p===void 0&&(p={});var _=this.serialize(h);return this.getNextSafeSlug(_,p.dryrun)},b}(),te=function(){function b(y){this.options=y||n.defaults,this.options.renderer=this.options.renderer||new re,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new be,this.slugger=new ve}b.parse=function(h,p){var _=new b(p);return _.parse(h)},b.parseInline=function(h,p){var _=new b(p);return _.parseInline(h)};var k=b.prototype;return k.parse=function(h,p){p===void 0&&(p=!0);var _="",m,w,j,N,V,K,Y,U,X,O,me,Ie,lt,ke,ze,Xt,Qt,vt,Pt,Yt=h.length;for(m=0;m<Yt;m++){if(O=h[m],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[O.type]&&(Pt=this.options.extensions.renderers[O.type].call({parser:this},O),Pt!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(O.type))){_+=Pt||"";continue}switch(O.type){case"space":continue;case"hr":{_+=this.renderer.hr();continue}case"heading":{_+=this.renderer.heading(this.parseInline(O.tokens),O.depth,F(this.parseInline(O.tokens,this.textRenderer)),this.slugger);continue}case"code":{_+=this.renderer.code(O.text,O.lang,O.escaped);continue}case"table":{for(U="",Y="",N=O.header.length,w=0;w<N;w++)Y+=this.renderer.tablecell(this.parseInline(O.header[w].tokens),{header:!0,align:O.align[w]});for(U+=this.renderer.tablerow(Y),X="",N=O.rows.length,w=0;w<N;w++){for(K=O.rows[w],Y="",V=K.length,j=0;j<V;j++)Y+=this.renderer.tablecell(this.parseInline(K[j].tokens),{header:!1,align:O.align[j]});X+=this.renderer.tablerow(Y)}_+=this.renderer.table(U,X);continue}case"blockquote":{X=this.parse(O.tokens),_+=this.renderer.blockquote(X);continue}case"list":{for(me=O.ordered,Ie=O.start,lt=O.loose,N=O.items.length,X="",w=0;w<N;w++)ze=O.items[w],Xt=ze.checked,Qt=ze.task,ke="",ze.task&&(vt=this.renderer.checkbox(Xt),lt?ze.tokens.length>0&&ze.tokens[0].type==="paragraph"?(ze.tokens[0].text=vt+" "+ze.tokens[0].text,ze.tokens[0].tokens&&ze.tokens[0].tokens.length>0&&ze.tokens[0].tokens[0].type==="text"&&(ze.tokens[0].tokens[0].text=vt+" "+ze.tokens[0].tokens[0].text)):ze.tokens.unshift({type:"text",text:vt}):ke+=vt),ke+=this.parse(ze.tokens,lt),X+=this.renderer.listitem(ke,Qt,Xt);_+=this.renderer.list(X,me,Ie);continue}case"html":{_+=this.renderer.html(O.text);continue}case"paragraph":{_+=this.renderer.paragraph(this.parseInline(O.tokens));continue}case"text":{for(X=O.tokens?this.parseInline(O.tokens):O.text;m+1<Yt&&h[m+1].type==="text";)O=h[++m],X+=`
`+(O.tokens?this.parseInline(O.tokens):O.text);_+=p?this.renderer.paragraph(X):X;continue}default:{var en='Token with "'+O.type+'" type was not found.';if(this.options.silent){console.error(en);return}else throw new Error(en)}}}return _},k.parseInline=function(h,p){p=p||this.renderer;var _="",m,w,j,N=h.length;for(m=0;m<N;m++){if(w=h[m],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[w.type]&&(j=this.options.extensions.renderers[w.type].call({parser:this},w),j!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(w.type))){_+=j||"";continue}switch(w.type){case"escape":{_+=p.text(w.text);break}case"html":{_+=p.html(w.text);break}case"link":{_+=p.link(w.href,w.title,this.parseInline(w.tokens,p));break}case"image":{_+=p.image(w.href,w.title,w.text);break}case"strong":{_+=p.strong(this.parseInline(w.tokens,p));break}case"em":{_+=p.em(this.parseInline(w.tokens,p));break}case"codespan":{_+=p.codespan(w.text);break}case"br":{_+=p.br();break}case"del":{_+=p.del(this.parseInline(w.tokens,p));break}case"text":{_+=p.text(w.text);break}default:{var V='Token with "'+w.type+'" type was not found.';if(this.options.silent){console.error(V);return}else throw new Error(V)}}}return _},b}(),le=function(){function b(y){this.options=y||n.defaults}var k=b.prototype;return k.preprocess=function(h){return h},k.postprocess=function(h){return h},b}();le.passThroughHooks=new Set(["preprocess","postprocess"]);function Le(b,k,y){return function(h){if(h.message+=`
Please report this to https://github.com/markedjs/marked.`,b){var p="<p>An error occurred:</p><pre>"+E(h.message+"",!0)+"</pre>";if(k)return Promise.resolve(p);if(y){y(null,p);return}return p}if(k)return Promise.reject(h);if(y){y(h);return}throw h}}function fe(b,k){return function(y,h,p){typeof h=="function"&&(p=h,h=null);var _=r({},h);h=r({},G.defaults,_);var m=Le(h.silent,h.async,p);if(typeof y>"u"||y===null)return m(new Error("marked(): input parameter is undefined or null"));if(typeof y!="string")return m(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(y)+", string expected"));if(Re(h),h.hooks&&(h.hooks.options=h),p){var w=h.highlight,j;try{h.hooks&&(y=h.hooks.preprocess(y)),j=b(y,h)}catch(U){return m(U)}var N=function(X){var O;if(!X)try{h.walkTokens&&G.walkTokens(j,h.walkTokens),O=k(j,h),h.hooks&&(O=h.hooks.postprocess(O))}catch(me){X=me}return h.highlight=w,X?m(X):p(null,O)};if(!w||w.length<3||(delete h.highlight,!j.length))return N();var V=0;G.walkTokens(j,function(U){U.type==="code"&&(V++,setTimeout(function(){w(U.text,U.lang,function(X,O){if(X)return N(X);O!=null&&O!==U.text&&(U.text=O,U.escaped=!0),V--,V===0&&N()})},0))}),V===0&&N();return}if(h.async)return Promise.resolve(h.hooks?h.hooks.preprocess(y):y).then(function(U){return b(U,h)}).then(function(U){return h.walkTokens?Promise.all(G.walkTokens(U,h.walkTokens)).then(function(){return U}):U}).then(function(U){return k(U,h)}).then(function(U){return h.hooks?h.hooks.postprocess(U):U}).catch(m);try{h.hooks&&(y=h.hooks.preprocess(y));var K=b(y,h);h.walkTokens&&G.walkTokens(K,h.walkTokens);var Y=k(K,h);return h.hooks&&(Y=h.hooks.postprocess(Y)),Y}catch(U){return m(U)}}}function G(b,k,y){return fe(qe.lex,te.parse)(b,k,y)}G.options=G.setOptions=function(b){return G.defaults=r({},G.defaults,b),u(G.defaults),G},G.getDefaults=c,G.defaults=n.defaults,G.use=function(){for(var b=G.defaults.extensions||{renderers:{},childTokens:{}},k=arguments.length,y=new Array(k),h=0;h<k;h++)y[h]=arguments[h];y.forEach(function(p){var _=r({},p);if(_.async=G.defaults.async||_.async||!1,p.extensions&&(p.extensions.forEach(function(w){if(!w.name)throw new Error("extension name required");if(w.renderer){var j=b.renderers[w.name];j?b.renderers[w.name]=function(){for(var N=arguments.length,V=new Array(N),K=0;K<N;K++)V[K]=arguments[K];var Y=w.renderer.apply(this,V);return Y===!1&&(Y=j.apply(this,V)),Y}:b.renderers[w.name]=w.renderer}if(w.tokenizer){if(!w.level||w.level!=="block"&&w.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");b[w.level]?b[w.level].unshift(w.tokenizer):b[w.level]=[w.tokenizer],w.start&&(w.level==="block"?b.startBlock?b.startBlock.push(w.start):b.startBlock=[w.start]:w.level==="inline"&&(b.startInline?b.startInline.push(w.start):b.startInline=[w.start]))}w.childTokens&&(b.childTokens[w.name]=w.childTokens)}),_.extensions=b),p.renderer&&function(){var w=G.defaults.renderer||new re,j=function(K){var Y=w[K];w[K]=function(){for(var U=arguments.length,X=new Array(U),O=0;O<U;O++)X[O]=arguments[O];var me=p.renderer[K].apply(w,X);return me===!1&&(me=Y.apply(w,X)),me}};for(var N in p.renderer)j(N);_.renderer=w}(),p.tokenizer&&function(){var w=G.defaults.tokenizer||new Ce,j=function(K){var Y=w[K];w[K]=function(){for(var U=arguments.length,X=new Array(U),O=0;O<U;O++)X[O]=arguments[O];var me=p.tokenizer[K].apply(w,X);return me===!1&&(me=Y.apply(w,X)),me}};for(var N in p.tokenizer)j(N);_.tokenizer=w}(),p.hooks&&function(){var w=G.defaults.hooks||new le,j=function(K){var Y=w[K];le.passThroughHooks.has(K)?w[K]=function(U){if(G.defaults.async)return Promise.resolve(p.hooks[K].call(w,U)).then(function(O){return Y.call(w,O)});var X=p.hooks[K].call(w,U);return Y.call(w,X)}:w[K]=function(){for(var U=arguments.length,X=new Array(U),O=0;O<U;O++)X[O]=arguments[O];var me=p.hooks[K].apply(w,X);return me===!1&&(me=Y.apply(w,X)),me}};for(var N in p.hooks)j(N);_.hooks=w}(),p.walkTokens){var m=G.defaults.walkTokens;_.walkTokens=function(w){var j=[];return j.push(p.walkTokens.call(this,w)),m&&(j=j.concat(m.call(this,w))),j}}G.setOptions(_)})},G.walkTokens=function(b,k){for(var y=[],h=function(){var w=_.value;switch(y=y.concat(k.call(G,w)),w.type){case"table":{for(var j=a(w.header),N;!(N=j()).done;){var V=N.value;y=y.concat(G.walkTokens(V.tokens,k))}for(var K=a(w.rows),Y;!(Y=K()).done;)for(var U=Y.value,X=a(U),O;!(O=X()).done;){var me=O.value;y=y.concat(G.walkTokens(me.tokens,k))}break}case"list":{y=y.concat(G.walkTokens(w.items,k));break}default:G.defaults.extensions&&G.defaults.extensions.childTokens&&G.defaults.extensions.childTokens[w.type]?G.defaults.extensions.childTokens[w.type].forEach(function(Ie){y=y.concat(G.walkTokens(w[Ie],k))}):w.tokens&&(y=y.concat(G.walkTokens(w.tokens,k)))}},p=a(b),_;!(_=p()).done;)h();return y},G.parseInline=fe(qe.lexInline,te.parseInline),G.Parser=te,G.parser=te.parse,G.Renderer=re,G.TextRenderer=be,G.Lexer=qe,G.lexer=qe.lex,G.Tokenizer=Ce,G.Slugger=ve,G.Hooks=le,G.parse=G;var Dn=G.options,et=G.setOptions,xn=G.use,En=G.walkTokens,An=G.parseInline,Cn=G,$n=te.parse,Ot=qe.lex;n.Hooks=le,n.Lexer=qe,n.Parser=te,n.Renderer=re,n.Slugger=ve,n.TextRenderer=be,n.Tokenizer=Ce,n.getDefaults=c,n.lexer=Ot,n.marked=G,n.options=Dn,n.parse=Cn,n.parseInline=An,n.parser=$n,n.setOptions=et,n.use=xn,n.walkTokens=En})(Ys);const{marked:Br}=Ys;Br.setOptions({breaks:!0,smartyPants:!0});class Xr{static md_to_html(e){return Br.parse(e)}static jira_to_html(e){return Br.parse(Xr.to_markdown(e))}static to_markdown(e){return e.replace(/^[ \t]*(\*+)\s+/gm,(t,r)=>`${Array(r.length).join("  ")}* `).replace(/^[ \t]*(#+)\s+/gm,(t,r)=>`${Array(r.length).join("   ")}1. `).replace(/^h([0-6])\.(.*)$/gm,(t,r,i)=>Array(parseInt(r,10)+1).join("#")+i).replace(/\*(\S.*)\*/g,"**$1**").replace(/_(\S.*)_/g,"*$1*").replace(/\{\{([^}]+)\}\}/g,"`$1`").replace(/\+([^+]*)\+/g,"<ins>$1</ins>").replace(/\^([^^]*)\^/g,"<sup>$1</sup>").replace(/~([^~]*)~/g,"<sub>$1</sub>").replace(/(\s+)-(\S+.*?\S)-(\s+)/g,"$1~~$2~~$3").replace(/\{code(:([a-z]+))?([:|]?(title|borderStyle|borderColor|borderWidth|bgColor|titleBGColor)=.+?)*\}([^]*?)\n?\{code\}/gm,"```$2$5\n```").replace(/{noformat}/g,"```").replace(/\[([^|]+?)\]/g,"<$1>").replace(/!(.+)!/g,"![]($1)").replace(/\[(.+?)\|(.+?)\]/g,"[$1]($2)").replace(/^bq\.\s+/gm,"> ").replace(/\{color:[^}]+\}([^]*?)\{color\}/gm,"$1").replace(/\{panel:title=([^}]*)\}\n?([^]*?)\n?\{panel\}/gm,`
| $1 |
| --- |
| $2 |`).replace(/^[ \t]*((?:\|\|.*?)+\|\|)[ \t]*$/gm,(t,r)=>{const i=r.replace(/\|\|/g,"|");return`
${i}
${i.replace(/\|[^|]+/g,"| --- ")}`}).replace(/^[ \t]*\|/gm,"|")}static to_jira(e){const t={del:"-",ins:"+",sup:"^",sub:"~"};return e.replace(/^\n((?:\|.*?)+\|)[ \t]*\n((?:\|\s*?-{3,}\s*?)+\|)[ \t]*\n((?:(?:\|.*?)+\|[ \t]*\n)*)$/gm,(r,i,s,a)=>{const o=i.match(/[^|]+(?=\|)/g),l=s.match(/[^|]+(?=\|)/g);return o.length!==l.length?r:a.split(`
`).length===2&&o.length===1?`{panel:title=${o[0].trim()}}
${a.replace(/^\|(.*)[ \t]*\|/,"$1").trim()}
{panel}
`:`||${o.join("||")}||
${a}`}).replace(/([*_]+)(\S.*?)\1/g,(r,i,s)=>{switch(i.length){case 1:return`_${s}_`;case 2:return`*${s}*`;case 3:return`_*${s}*_`;default:return i+s+i}}).replace(/^([#]+)(.*?)$/gm,(r,i,s)=>`h${i.length}.${s}`).replace(/^(.*?)\n([=-]+)$/gm,(r,i,s)=>`h${s[0]==="="?1:2}. ${i}`).replace(/^([ \t]*)\d+\.\s+/gm,(r,i)=>`${Array(Math.floor(i.length/3)+1).fill("#").join("")} `).replace(/^([ \t]*)\*\s+/gm,(r,i)=>`${Array(Math.floor(i.length/2+1)).fill("*").join("")} `).replace(new RegExp(`<(${Object.keys(t).join("|")})>(.*?)</\\1>`,"g"),(r,i,s)=>{const a=t[i];return a+s+a}).replace(/(\s+)~~(.*?)~~(\s+)/g,"$1-$2-$3").replace(/```(.+\n)?((?:.|\n)*?)```/g,(r,i,s)=>{let a="{code}";return i&&(a=`{code:${i.replace(/\n/g,"")}}
`),`${a}${s}{code}`}).replace(/`([^`]+)`/g,"{{$1}}").replace(/!\[[^\]]*\]\(([^)]+)\)/g,"!$1!").replace(/\[([^\]]+)\]\(([^)]+)\)/g,"[$1|$2]").replace(/<([^>]+)>/g,"[$1]").replace(/^>/gm,"bq.")}}var Uh=Xr;const qi=Nh(Uh);function Mi(n){let e,t=de.parse(qi.to_markdown(n[2])).replace(/\|([^|]+)\|/g,"<div>$1</div>")+"",r;return{c(){e=new ia(!1),r=qn(),this.h()},l(i){e=sa(i,!1),r=qn(),this.h()},h(){e.a=r},m(i,s){e.m(t,i,s),Te(i,r,s)},p(i,s){s&4&&t!==(t=de.parse(qi.to_markdown(i[2])).replace(/\|([^|]+)\|/g,"<div>$1</div>")+"")&&e.p(t)},d(i){i&&I(r),i&&e.d()}}}function qh(n){let e,t,r,i,s,a,o,l,c,u,f,d,g,v,x,D,E,S,F,$,T,P;a=new Ze({props:{icon:oa}}),c=new Ze({props:{icon:la}});let R=n[2]&&Mi(n);return{c(){e=q("div"),t=q("div"),r=q("div"),i=q("div"),s=q("a"),Oe(a.$$.fragment),o=ie(),l=q("a"),Oe(c.$$.fragment),f=ie(),d=q("div"),g=q("div"),v=xe(n[0]),x=ie(),D=q("span"),E=xe(n[1]),S=ie(),F=q("div"),R&&R.c(),this.h()},l(z){e=M(z,"DIV",{class:!0});var ee=H(e);t=M(ee,"DIV",{class:!0,style:!0});var ce=H(t);r=M(ce,"DIV",{class:!0});var ge=H(r);i=M(ge,"DIV",{class:!0});var he=H(i);s=M(he,"A",{href:!0,class:!0});var Z=H(s);Pe(a.$$.fragment,Z),Z.forEach(I),o=se(he),l=M(he,"A",{href:!0,target:!0,class:!0});var Q=H(l);Pe(c.$$.fragment,Q),Q.forEach(I),he.forEach(I),f=se(ge),d=M(ge,"DIV",{class:!0});var De=H(d);g=M(De,"DIV",{class:!0});var ye=H(g);v=Ee(ye,n[0]),x=se(ye),D=M(ye,"SPAN",{class:!0});var Se=H(D);E=Ee(Se,n[1]),Se.forEach(I),ye.forEach(I),S=se(De),F=M(De,"DIV",{class:!0});var Re=H(F);R&&R.l(Re),Re.forEach(I),De.forEach(I),ge.forEach(I),ce.forEach(I),ee.forEach(I),this.h()},h(){C(s,"href","#"),C(s,"class","w-4 h-4 items-center justify-center text-white hover:text-red-500 bg-red-500 rounded-full flex"),C(l,"href",u=`https://alicegarden.atlassian.net/browse/${n[0]}`),C(l,"target","_blank"),C(l,"class","w-4 h-4 items-center justify-center text-white hover:text-green-500 bg-green-500 rounded-full flex"),C(i,"class","absolute top-3 left-5 text-sm flex gap-2 z-[10]"),C(D,"class","font-normal"),C(g,"class","text-xl font-bold pt-2 bg-white text-black pl-20"),C(F,"class","mt-5 leading-5 p-6 overflow-auto"),C(d,"class","rounded-lg relative"),C(r,"class","flex flex-col gap-3 relative bg-[#1D2125] text-white"),C(t,"class","popup-content flex items-center justify-center flex-col !bg-[transparent] max-w-[1000px]"),at(t,"height","unset",1),at(t,"box-shadow","unset"),C(e,"class","winner-popup !z-30 !h-[100%] !items-start")},m(z,ee){Te(z,e,ee),A(e,t),A(t,r),A(r,i),A(i,s),Be(a,s,null),A(i,o),A(i,l),Be(c,l,null),A(r,f),A(r,d),A(d,g),A(g,v),A(g,x),A(g,D),A(D,E),A(d,S),A(d,F),R&&R.m(F,null),$=!0,T||(P=He(s,"click",function(){yr(n[3])&&n[3].apply(this,arguments)}),T=!0)},p(z,[ee]){n=z,(!$||ee&1&&u!==(u=`https://alicegarden.atlassian.net/browse/${n[0]}`))&&C(l,"href",u),(!$||ee&1)&&We(v,n[0]),(!$||ee&2)&&We(E,n[1]),n[2]?R?R.p(n,ee):(R=Mi(n),R.c(),R.m(F,null)):R&&(R.d(1),R=null)},i(z){$||(ne(a.$$.fragment,z),ne(c.$$.fragment,z),$=!0)},o(z){oe(a.$$.fragment,z),oe(c.$$.fragment,z),$=!1},d(z){z&&I(e),je(a),je(c),R&&R.d(),T=!1,P()}}}function Mh(n,e,t){let{currentKey:r}=e,{currentSummary:i}=e,{currentDescription:s}=e,{closeTicket:a}=e;return document.querySelector("body").addEventListener("keydown",o=>{o.key==="Escape"&&a()}),n.$$set=o=>{"currentKey"in o&&t(0,r=o.currentKey),"currentSummary"in o&&t(1,i=o.currentSummary),"currentDescription"in o&&t(2,s=o.currentDescription),"closeTicket"in o&&t(3,a=o.closeTicket)},[r,i,s,a]}class Vh extends er{constructor(e){super(),tr(this,e,Mh,qh,nr,{currentKey:0,currentSummary:1,currentDescription:2,closeTicket:3})}}function Vi(n,e,t){const r=n.slice();return r[6]=e[t],r}function Hi(n,e,t){const r=n.slice();return r[9]=e[t],r}function Ji(n){let e,t=Array(n[6].fields.storyPoints),r=[];for(let i=0;i<t.length;i+=1)r[i]=Ki(Hi(n,t,i));return{c(){for(let i=0;i<r.length;i+=1)r[i].c();e=qn()},l(i){for(let s=0;s<r.length;s+=1)r[s].l(i);e=qn()},m(i,s){for(let a=0;a<r.length;a+=1)r[a]&&r[a].m(i,s);Te(i,e,s)},p(i,s){if(s&10){const a=t.length;t=Array(i[6].fields.storyPoints);let o;for(o=a;o<t.length;o+=1)Hi(i,t,o),r[o]||(r[o]=Ki(),r[o].c(),r[o].m(e.parentNode,e));for(o=t.length;o<a;o+=1)r[o].d(1);r.length=t.length}},d(i){rr(r,i),i&&I(e)}}}function Ki(n){let e;return{c(){e=xe("")},l(t){e=Ee(t,"")},m(t,r){Te(t,e,r)},d(t){t&&I(e)}}}function Gi(n){let e,t,r,i=n[6].key+"",s,a,o,l,c,u,f,d=n[6].fields.summary+"",g,v,x,D,E,S=n[6].fields.storyPoints!="undefined"&&n[6].fields.storyPoints>0&&Ji(n);c=new Ze({props:{icon:cs}});function F(){return n[5](n[6])}return{c(){e=q("div"),t=q("div"),r=q("h5"),s=xe(i),a=ie(),S&&S.c(),o=ie(),l=q("a"),Oe(c.$$.fragment),u=ie(),f=q("p"),g=xe(d),v=ie(),this.h()},l($){e=M($,"DIV",{class:!0});var T=H(e);t=M(T,"DIV",{class:!0});var P=H(t);r=M(P,"H5",{class:!0});var R=H(r);s=Ee(R,i),a=se(R),S&&S.l(R),R.forEach(I),o=se(P),l=M(P,"A",{href:!0,class:!0});var z=H(l);Pe(c.$$.fragment,z),z.forEach(I),P.forEach(I),u=se(T),f=M(T,"P",{class:!0});var ee=H(f);g=Ee(ee,d),ee.forEach(I),v=se(T),T.forEach(I),this.h()},h(){C(r,"class","w-fit mb-2 text-2xl font-bold tracking-tight text-gray-900 "),C(l,"href","#"),C(l,"class","inline-flex ml-auto items-center gap-2 px-3 py-2 text-sm font-medium w-fit text-white bg-blue-700 rounded-lg hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 "),C(t,"class","flex"),C(f,"class","mb-3 font-normal text-gray-700 text-start"),C(e,"class","p-4 bg-white border border-gray-200 rounded-lg shadow ")},m($,T){Te($,e,T),A(e,t),A(t,r),A(r,s),A(r,a),S&&S.m(r,null),A(t,o),A(t,l),Be(c,l,null),A(e,u),A(e,f),A(f,g),A(e,v),x=!0,D||(E=He(l,"click",F),D=!0)},p($,T){n=$,(!x||T&10)&&i!==(i=n[6].key+"")&&We(s,i),n[6].fields.storyPoints!="undefined"&&n[6].fields.storyPoints>0?S?S.p(n,T):(S=Ji(n),S.c(),S.m(r,null)):S&&(S.d(1),S=null),(!x||T&10)&&d!==(d=n[6].fields.summary+"")&&We(g,d)},i($){x||(ne(c.$$.fragment,$),x=!0)},o($){oe(c.$$.fragment,$),x=!1},d($){$&&I(e),S&&S.d(),je(c),D=!1,E()}}}function Hh(n){let e,t,r,i,s,a,o=n[1].filter(n[4]),l=[];for(let u=0;u<o.length;u+=1)l[u]=Gi(Vi(n,o,u));const c=u=>oe(l[u],1,1,()=>{l[u]=null});return{c(){e=q("div"),t=q("div"),r=xe(n[0]),i=ie(),s=q("div");for(let u=0;u<l.length;u+=1)l[u].c();this.h()},l(u){e=M(u,"DIV",{class:!0});var f=H(e);t=M(f,"DIV",{class:!0});var d=H(t);r=Ee(d,n[0]),d.forEach(I),i=se(f),s=M(f,"DIV",{class:!0});var g=H(s);for(let v=0;v<l.length;v+=1)l[v].l(g);g.forEach(I),f.forEach(I),this.h()},h(){C(t,"class","w-full"),tt(t,"bg-blue-300",n[0]==="En cours"),tt(t,"bg-violet-300",n[0]==="Relecture"),tt(t,"bg-green-300",n[0]==="En prprod"),C(s,"class","overflow-auto flex flex-col gap-3 p-4"),C(e,"class","flex-1 border-2"),tt(e,"border-blue-300",n[0]==="En cours"),tt(e,"border-violet-300",n[0]==="Relecture"),tt(e,"border-green-300",n[0]==="En prprod")},m(u,f){Te(u,e,f),A(e,t),A(t,r),A(e,i),A(e,s);for(let d=0;d<l.length;d+=1)l[d]&&l[d].m(s,null);a=!0},p(u,[f]){if((!a||f&1)&&We(r,u[0]),(!a||f&1)&&tt(t,"bg-blue-300",u[0]==="En cours"),(!a||f&1)&&tt(t,"bg-violet-300",u[0]==="Relecture"),(!a||f&1)&&tt(t,"bg-green-300",u[0]==="En prprod"),f&14){o=u[1].filter(u[4]);let d;for(d=0;d<o.length;d+=1){const g=Vi(u,o,d);l[d]?(l[d].p(g,f),ne(l[d],1)):(l[d]=Gi(g),l[d].c(),ne(l[d],1),l[d].m(s,null))}for(gt(),d=o.length;d<l.length;d+=1)c(d);mt()}(!a||f&1)&&tt(e,"border-blue-300",u[0]==="En cours"),(!a||f&1)&&tt(e,"border-violet-300",u[0]==="Relecture"),(!a||f&1)&&tt(e,"border-green-300",u[0]==="En prprod")},i(u){if(!a){for(let f=0;f<o.length;f+=1)ne(l[f]);a=!0}},o(u){l=l.filter(Boolean);for(let f=0;f<l.length;f+=1)oe(l[f]);a=!1},d(u){u&&I(e),rr(l,u)}}}function Jh(n,e,t){let{status:r}=e,{filteredList:i}=e,{openTicket:s}=e,a;const o=c=>a.includes(c.fields.status),l=c=>{s(c)};return n.$$set=c=>{"status"in c&&t(0,r=c.status),"filteredList"in c&&t(1,i=c.filteredList),"openTicket"in c&&t(2,s=c.openTicket)},n.$$.update=()=>{n.$$.dirty&1&&t(3,a=r==="En cours"?["Demande en cours de traitement"]:r==="Relecture"?["En cours de relecture"]:r==="En prprod"?["En Pr-Production","Mis en Release","Test","Non Testable"]:["En cours"])},[r,i,s,a,o,l]}class wr extends er{constructor(e){super(),tr(this,e,Jh,Hh,nr,{status:0,filteredList:1,openTicket:2})}}function Kh(n){let e,t,r;return{c(){e=q("div"),t=q("p"),r=xe(n[2]),this.h()},l(i){e=M(i,"DIV",{class:!0});var s=H(e);t=M(s,"P",{class:!0,style:!0});var a=H(t);r=Ee(a,n[2]),a.forEach(I),s.forEach(I),this.h()},h(){C(t,"class","text-red-700"),at(t,"font-size","70px"),C(e,"class","text-white bg-black px-4")},m(i,s){Te(i,e,s),A(e,t),A(t,r)},p(i,s){s&4&&We(r,i[2])},d(i){i&&I(e)}}}function Gh(n){let e,t,r;return{c(){e=q("div"),t=q("p"),r=xe(n[2]),this.h()},l(i){e=M(i,"DIV",{class:!0});var s=H(e);t=M(s,"P",{class:!0,style:!0});var a=H(t);r=Ee(a,n[2]),a.forEach(I),s.forEach(I),this.h()},h(){C(t,"class","text-red-500"),at(t,"font-size","70px"),C(e,"class","text-white bg-black px-4")},m(i,s){Te(i,e,s),A(e,t),A(t,r)},p(i,s){s&4&&We(r,i[2])},d(i){i&&I(e)}}}function Zh(n){let e,t,r;return{c(){e=q("div"),t=q("p"),r=xe(n[2]),this.h()},l(i){e=M(i,"DIV",{class:!0});var s=H(e);t=M(s,"P",{class:!0,style:!0});var a=H(t);r=Ee(a,n[2]),a.forEach(I),s.forEach(I),this.h()},h(){C(t,"class","text-white"),at(t,"font-size","70px"),C(e,"class","text-white bg-black px-4")},m(i,s){Te(i,e,s),A(e,t),A(t,r)},p(i,s){s&4&&We(r,i[2])},d(i){i&&I(e)}}}function Wh(n){let e,t,r,i,s,a,o,l,c,u,f,d,g,v,x,D,E,S,F,$,T,P,R,z,ee,ce,ge,he,Z,Q,De,ye,Se,Re,Ae,Fe,Qe,Ce,J,B,$e,Ye,qe;function re(te,le){return te[2]>30?Zh:te[2]>10&&te[2]<31?Gh:Kh}let be=re(n),ve=be(n);return v=new Ze({props:{icon:ua,size:"2x"}}),E=new Ze({props:{icon:ca,size:"2x"}}),$=new Ze({props:{icon:ha,size:"2x"}}),R=new Ze({props:{icon:fa,size:"2x"}}),ce=new Ze({props:{icon:da,size:"2x"}}),Fe=new wr({props:{status:"En cours",filteredList:n[3],openTicket:n[4]}}),Ce=new wr({props:{status:"Relecture",filteredList:n[3],openTicket:n[4]}}),B=new wr({props:{status:"En prprod",filteredList:n[3],openTicket:n[4]}}),{c(){e=q("div"),t=q("div"),r=q("div"),i=q("img"),a=ie(),o=q("div"),l=xe(n[1]),c=ie(),u=q("div"),ve.c(),f=ie(),d=q("div"),g=q("a"),Oe(v.$$.fragment),x=ie(),D=q("a"),Oe(E.$$.fragment),S=ie(),F=q("a"),Oe($.$$.fragment),T=ie(),P=q("a"),Oe(R.$$.fragment),z=ie(),ee=q("a"),Oe(ce.$$.fragment),ge=ie(),he=q("div"),Z=q("button"),Q=xe("Pause"),De=ie(),ye=q("button"),Se=xe("Fermer"),Re=ie(),Ae=q("div"),Oe(Fe.$$.fragment),Qe=ie(),Oe(Ce.$$.fragment),J=ie(),Oe(B.$$.fragment),this.h()},l(te){e=M(te,"DIV",{class:!0});var le=H(e);t=M(le,"DIV",{class:!0});var Le=H(t);r=M(Le,"DIV",{class:!0});var fe=H(r);i=M(fe,"IMG",{src:!0,alt:!0,width:!0}),a=se(fe),o=M(fe,"DIV",{class:!0,style:!0});var G=H(o);l=Ee(G,n[1]),G.forEach(I),c=se(fe),u=M(fe,"DIV",{class:!0});var Dn=H(u);ve.l(Dn),Dn.forEach(I),f=se(fe),d=M(fe,"DIV",{class:!0});var et=H(d);g=M(et,"A",{href:!0,"data-emoji":!0,class:!0});var xn=H(g);Pe(v.$$.fragment,xn),xn.forEach(I),x=se(et),D=M(et,"A",{href:!0,"data-emoji":!0,class:!0});var En=H(D);Pe(E.$$.fragment,En),En.forEach(I),S=se(et),F=M(et,"A",{href:!0,"data-emoji":!0,class:!0});var An=H(F);Pe($.$$.fragment,An),An.forEach(I),T=se(et),P=M(et,"A",{href:!0,"data-emoji":!0,class:!0});var Cn=H(P);Pe(R.$$.fragment,Cn),Cn.forEach(I),z=se(et),ee=M(et,"A",{href:!0,"data-emoji":!0,class:!0});var $n=H(ee);Pe(ce.$$.fragment,$n),$n.forEach(I),et.forEach(I),ge=se(fe),he=M(fe,"DIV",{class:!0});var Ot=H(he);Z=M(Ot,"BUTTON",{class:!0});var b=H(Z);Q=Ee(b,"Pause"),b.forEach(I),De=se(Ot),ye=M(Ot,"BUTTON",{class:!0});var k=H(ye);Se=Ee(k,"Fermer"),k.forEach(I),Ot.forEach(I),Re=se(fe),Ae=M(fe,"DIV",{class:!0});var y=H(Ae);Pe(Fe.$$.fragment,y),Qe=se(y),Pe(Ce.$$.fragment,y),J=se(y),Pe(B.$$.fragment,y),y.forEach(I),fe.forEach(I),Le.forEach(I),le.forEach(I),this.h()},h(){fn(i.src,s=n[0][n[1]])||C(i,"src",s),C(i,"alt","avatar"),C(i,"width","50"),C(o,"class","font-bold whitespace-nowrap "),at(o,"font-size","clamp(2rem, -0.875rem + 8.333vw, 100px)"),C(u,"class","scrolltimer mx-auto max-w-xs fixed top-2 right-1 p-2 "),C(g,"href","#"),C(g,"data-emoji","1"),C(g,"class","hover:text-green-400"),C(D,"href","#"),C(D,"data-emoji","0.75"),C(D,"class","hover:text-green-200"),C(F,"href","#"),C(F,"data-emoji","0.50"),C(F,"class","hover:text-orange-300"),C(P,"href","#"),C(P,"data-emoji","0.25"),C(P,"class","hover:text-red-200"),C(ee,"href","#"),C(ee,"data-emoji","0"),C(ee,"class","hover:text-red-400"),C(d,"class","flex justify-center gap-8 mb-4"),C(Z,"class","bg-black mb-4"),C(ye,"class","bg-black mb-4"),C(he,"class",""),C(Ae,"class","flex gap-3 max-md:grid"),C(r,"class","w-full"),C(t,"class","popup-content flex flex-col bg-white !h-[unset] min-h-[100vh]"),C(e,"class","winner-popup !block")},m(te,le){Te(te,e,le),A(e,t),A(t,r),A(r,i),A(r,a),A(r,o),A(o,l),A(r,c),A(r,u),ve.m(u,null),A(r,f),A(r,d),A(d,g),Be(v,g,null),A(d,x),A(d,D),Be(E,D,null),A(d,S),A(d,F),Be($,F,null),A(d,T),A(d,P),Be(R,P,null),A(d,z),A(d,ee),Be(ce,ee,null),A(r,ge),A(r,he),A(he,Z),A(Z,Q),A(he,De),A(he,ye),A(ye,Se),A(r,Re),A(r,Ae),Be(Fe,Ae,null),A(Ae,Qe),Be(Ce,Ae,null),A(Ae,J),Be(B,Ae,null),$e=!0,Ye||(qe=[He(g,"click",n[7]),He(D,"click",n[7]),He(F,"click",n[7]),He(P,"click",n[7]),He(ee,"click",n[7]),He(Z,"click",function(){yr(n[5])&&n[5].apply(this,arguments)}),He(ye,"click",function(){yr(n[6])&&n[6].apply(this,arguments)})],Ye=!0)},p(te,[le]){n=te,(!$e||le&3&&!fn(i.src,s=n[0][n[1]]))&&C(i,"src",s),(!$e||le&2)&&We(l,n[1]),be===(be=re(n))&&ve?ve.p(n,le):(ve.d(1),ve=be(n),ve&&(ve.c(),ve.m(u,null)));const Le={};le&8&&(Le.filteredList=n[3]),le&16&&(Le.openTicket=n[4]),Fe.$set(Le);const fe={};le&8&&(fe.filteredList=n[3]),le&16&&(fe.openTicket=n[4]),Ce.$set(fe);const G={};le&8&&(G.filteredList=n[3]),le&16&&(G.openTicket=n[4]),B.$set(G)},i(te){$e||(ne(v.$$.fragment,te),ne(E.$$.fragment,te),ne($.$$.fragment,te),ne(R.$$.fragment,te),ne(ce.$$.fragment,te),ne(Fe.$$.fragment,te),ne(Ce.$$.fragment,te),ne(B.$$.fragment,te),$e=!0)},o(te){oe(v.$$.fragment,te),oe(E.$$.fragment,te),oe($.$$.fragment,te),oe(R.$$.fragment,te),oe(ce.$$.fragment,te),oe(Fe.$$.fragment,te),oe(Ce.$$.fragment,te),oe(B.$$.fragment,te),$e=!1},d(te){te&&I(e),ve.d(),je(v),je(E),je($),je(R),je(ce),je(Fe),je(Ce),je(B),Ye=!1,ls(qe)}}}function Xh(n,e,t){let{dictionary:r}=e,{winningItem:i}=e,{time:s}=e,{filteredList:a}=e,{openTicket:o}=e,{pause:l}=e,{closeWinnerPopup:c}=e,{supabase:u}=e,{banner:f}=e,{ressenti:d=null}=e;us(()=>{document.querySelector(".winner-popup").addEventListener("scroll",v=>{v.target.scrollTop>50?document.querySelector(".scrolltimer").classList.add("show"):document.querySelector(".scrolltimer").classList.remove("show")})});function g(v){if(d)return;const x=v.target.closest("a").getAttribute("data-emoji");v.target.closest("a").style.color="rgb(74 222 128)",t(9,d=x),u.from("feelings").insert([{feel:x,date:new Date,user_id:i}]).then(()=>{t(8,f=`Le ressenti de ${i} a t enregistr avec succs. Merci !`)}).catch(D=>{console.log(D)})}return n.$$set=v=>{"dictionary"in v&&t(0,r=v.dictionary),"winningItem"in v&&t(1,i=v.winningItem),"time"in v&&t(2,s=v.time),"filteredList"in v&&t(3,a=v.filteredList),"openTicket"in v&&t(4,o=v.openTicket),"pause"in v&&t(5,l=v.pause),"closeWinnerPopup"in v&&t(6,c=v.closeWinnerPopup),"supabase"in v&&t(10,u=v.supabase),"banner"in v&&t(8,f=v.banner),"ressenti"in v&&t(9,d=v.ressenti)},[r,i,s,a,o,l,c,g,f,d,u]}class Qh extends er{constructor(e){super(),tr(this,e,Xh,Wh,nr,{dictionary:0,winningItem:1,time:2,filteredList:3,openTicket:4,pause:5,closeWinnerPopup:6,supabase:10,banner:8,ressenti:9})}}function Zi(n,e,t){const r=n.slice();return r[50]=e[t],r[52]=t,r}function Wi(n,e,t){const r=n.slice();return r[50]=e[t],r}function Xi(n){let e,t,r,i,s;return t=new Ze({props:{icon:hs}}),{c(){e=q("div"),Oe(t.$$.fragment),r=ie(),i=xe(n[0]),this.h()},l(a){e=M(a,"DIV",{class:!0});var o=H(e);Pe(t.$$.fragment,o),r=se(o),i=Ee(o,n[0]),o.forEach(I),this.h()},h(){C(e,"class","z-50 flex gap-3 banner bg-green-300 text-black p-4 font-bold text-3xl max-md:text-3xl fixed w-full top-0 transition-all animate items-center")},m(a,o){Te(a,e,o),Be(t,e,null),A(e,r),A(e,i),s=!0},p(a,o){(!s||o[0]&1)&&We(i,a[0])},i(a){s||(ne(t.$$.fragment,a),s=!0)},o(a){oe(t.$$.fragment,a),s=!1},d(a){a&&I(e),je(t)}}}function Qi(n){let e,t,r,i,s,a=n[17].filter(os),o=[];for(let c=0;c<a.length;c+=1)o[c]=Yi(Wi(n,a,c));const l=c=>oe(o[c],1,1,()=>{o[c]=null});return{c(){e=q("div"),t=q("div"),r=q("div"),i=q("div");for(let c=0;c<o.length;c+=1)o[c].c();this.h()},l(c){e=M(c,"DIV",{class:!0});var u=H(e);t=M(u,"DIV",{class:!0});var f=H(t);r=M(f,"DIV",{class:!0});var d=H(r);i=M(d,"DIV",{class:!0});var g=H(i);for(let v=0;v<o.length;v+=1)o[v].l(g);g.forEach(I),d.forEach(I),f.forEach(I),u.forEach(I),this.h()},h(){C(i,"class","flex flex-wrap border border-black justify-center gap-[20px] "),C(r,"class","flex flex-col gap-3 "),C(t,"class","popup-content flex-col !block min-h-[100vh] !items-start !h-[unset]"),C(e,"class","winner-popup z-[9999] !items-start")},m(c,u){Te(c,e,u),A(e,t),A(t,r),A(r,i);for(let f=0;f<o.length;f+=1)o[f]&&o[f].m(i,null);s=!0},p(c,u){if(u[0]&8519680){a=c[17].filter(os);let f;for(f=0;f<a.length;f+=1){const d=Wi(c,a,f);o[f]?(o[f].p(d,u),ne(o[f],1)):(o[f]=Yi(d),o[f].c(),ne(o[f],1),o[f].m(i,null))}for(gt(),f=a.length;f<o.length;f+=1)l(f);mt()}},i(c){if(!s){for(let u=0;u<a.length;u+=1)ne(o[u]);s=!0}},o(c){o=o.filter(Boolean);for(let u=0;u<o.length;u+=1)oe(o[u]);s=!1},d(c){c&&I(e),rr(o,c)}}}function Yi(n){let e,t,r,i,s,a,o=n[50].key+"",l,c,u,f=n[50].fields.summary+"",d,g,v,x,D,E,S,F,$;D=new Ze({props:{icon:cs}});function T(){return n[25](n[50])}return{c(){e=q("div"),t=q("div"),r=q("img"),s=ie(),a=q("h5"),l=xe(o),c=ie(),u=q("p"),d=xe(f),g=ie(),v=q("a"),x=xe("Voir plus "),Oe(D.$$.fragment),E=ie(),this.h()},l(P){e=M(P,"DIV",{class:!0});var R=H(e);t=M(R,"DIV",{});var z=H(t);r=M(z,"IMG",{src:!0,alt:!0,width:!0}),s=se(z),a=M(z,"H5",{class:!0});var ee=H(a);l=Ee(ee,o),ee.forEach(I),z.forEach(I),c=se(R),u=M(R,"P",{class:!0});var ce=H(u);d=Ee(ce,f),ce.forEach(I),g=se(R),v=M(R,"A",{href:!0,class:!0});var ge=H(v);x=Ee(ge,"Voir plus "),Pe(D.$$.fragment,ge),ge.forEach(I),E=se(R),R.forEach(I),this.h()},h(){fn(r.src,i=n[50].fields.assignee.avatar)||C(r,"src",i),C(r,"alt","avatar"),C(r,"width","50"),C(a,"class","w-fit mb-2 text-2xl font-bold tracking-tight text-gray-900 dark:text-white"),C(u,"class","mb-3 font-normal text-gray-700 dark:text-gray-400 text-start"),C(v,"href","#"),C(v,"class","flex items-center gap-2 px-3 py-2 text-sm font-medium w-fit text-white bg-blue-700 rounded-lg hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800"),C(e,"class","p-6 bg-white border border-gray-200 rounded-lg shadow dark:bg-gray-800 dark:border-gray-700 w-[180px]")},m(P,R){Te(P,e,R),A(e,t),A(t,r),A(t,s),A(t,a),A(a,l),A(e,c),A(e,u),A(u,d),A(e,g),A(e,v),A(v,x),Be(D,v,null),A(e,E),S=!0,F||($=He(v,"click",T),F=!0)},p(P,R){n=P,(!S||R[0]&131072&&!fn(r.src,i=n[50].fields.assignee.avatar))&&C(r,"src",i),(!S||R[0]&131072)&&o!==(o=n[50].key+"")&&We(l,o),(!S||R[0]&131072)&&f!==(f=n[50].fields.summary+"")&&We(d,f)},i(P){S||(ne(D.$$.fragment,P),S=!0)},o(P){oe(D.$$.fragment,P),S=!1},d(P){P&&I(e),je(D),F=!1,$()}}}function es(n){let e,t,r,i,s,a,o,l,c,u,f,d=Object.keys(n[2]),g=[];for(let v=0;v<d.length;v+=1)g[v]=ts(Zi(n,d,v));return o=new Ze({props:{icon:pa}}),{c(){e=q("div"),t=q("div"),r=q("div"),i=q("div");for(let v=0;v<g.length;v+=1)g[v].c();s=ie(),a=q("button"),Oe(o.$$.fragment),l=xe(" Sauvegarder"),this.h()},l(v){e=M(v,"DIV",{class:!0});var x=H(e);t=M(x,"DIV",{class:!0});var D=H(t);r=M(D,"DIV",{class:!0});var E=H(r);i=M(E,"DIV",{class:!0});var S=H(i);for(let $=0;$<g.length;$+=1)g[$].l(S);S.forEach(I),s=se(E),a=M(E,"BUTTON",{class:!0,style:!0});var F=H(a);Pe(o.$$.fragment,F),l=Ee(F," Sauvegarder"),F.forEach(I),E.forEach(I),D.forEach(I),x.forEach(I),this.h()},h(){C(i,"class","flex flex-nowrap flex-col border border-black "),C(a,"class","bg-black text-white text-2xl flex-1 mt-4 flex items-center gap-2 justify-center"),at(a,"border","1px solid black"),C(r,"class","flex flex-col gap-3 "),C(t,"class","popup-content flex items-center justify-center flex-col"),C(e,"class","winner-popup")},m(v,x){Te(v,e,x),A(e,t),A(t,r),A(r,i);for(let D=0;D<g.length;D+=1)g[D]&&g[D].m(i,null);A(r,s),A(r,a),Be(o,a,null),A(a,l),c=!0,u||(f=He(a,"click",n[27]),u=!0)},p(v,x){if(x[0]&262150){d=Object.keys(v[2]);let D;for(D=0;D<d.length;D+=1){const E=Zi(v,d,D);g[D]?g[D].p(E,x):(g[D]=ts(E),g[D].c(),g[D].m(i,null))}for(;D<g.length;D+=1)g[D].d(1);g.length=d.length}},i(v){c||(ne(o.$$.fragment,v),c=!0)},o(v){oe(o.$$.fragment,v),c=!1},d(v){v&&I(e),rr(g,v),je(o),u=!1,f()}}}function ts(n){let e,t,r,i,s,a,o,l=n[50]+"",c,u,f,d,g;function v(...x){return n[26](n[50],...x)}return{c(){e=q("div"),t=q("input"),a=ie(),o=q("label"),c=xe(l),f=ie(),this.h()},l(x){e=M(x,"DIV",{class:!0});var D=H(e);t=M(D,"INPUT",{type:!0,id:!0,name:!0,class:!0}),a=se(D),o=M(D,"LABEL",{class:!0,for:!0});var E=H(o);c=Ee(E,l),E.forEach(I),f=se(D),D.forEach(I),this.h()},h(){C(t,"type","checkbox"),C(t,"id",r=n[50]),C(t,"name",i=n[50]),t.checked=s=n[18][n[52]],C(t,"class","w-5"),C(o,"class","font-bold"),C(o,"for",u=n[50]),C(e,"class","flex-1 flex justify-start gap-2")},m(x,D){Te(x,e,D),A(e,t),A(e,a),A(e,o),A(o,c),A(e,f),d||(g=He(t,"change",v),d=!0)},p(x,D){n=x,D[0]&4&&r!==(r=n[50])&&C(t,"id",r),D[0]&4&&i!==(i=n[50])&&C(t,"name",i),D[0]&262144&&s!==(s=n[18][n[52]])&&(t.checked=s),D[0]&4&&l!==(l=n[50]+"")&&We(c,l),D[0]&4&&u!==(u=n[50])&&C(o,"for",u)},d(x){x&&I(e),d=!1,g()}}}function ns(n){let e,t,r,i,s,a,o,l,c,u,f=n[17].length>0&&rs(n);return{c(){e=q("div"),t=q("div"),r=q("div"),i=q("div"),s=q("img"),o=xe(`
        Daily`),l=ie(),c=q("div"),f&&f.c(),this.h()},l(d){e=M(d,"DIV",{class:!0});var g=H(e);t=M(g,"DIV",{class:!0});var v=H(t);r=M(v,"DIV",{class:!0});var x=H(r);i=M(x,"DIV",{class:!0,style:!0});var D=H(i);s=M(D,"IMG",{class:!0,alt:!0,src:!0}),o=Ee(D,`
        Daily`),D.forEach(I),l=se(x),c=M(x,"DIV",{class:!0});var E=H(c);f&&f.l(E),E.forEach(I),x.forEach(I),v.forEach(I),g.forEach(I),this.h()},h(){C(s,"class","-mb-5 z-[11] w-full max-w-[500px]"),C(s,"alt",""),fn(s.src,a="https://alicegarden.atlassian.net/s/-3o5b4z/b/5/e932d65b444872da6155b2fc89562bb8/_/jira-logo-scaled.png")||C(s,"src",a),C(i,"class","flex flex-col items-center"),C(i,"style","font-size:100px; h-[180px] w-[300px]"),C(c,"class","flex gap-3 w-full absolute -bottom-16"),C(r,"class","flex flex-col gap-3 relative"),C(t,"class","popup-content flex items-center justify-center flex-col z-[99999]"),C(e,"class","winner-popup")},m(d,g){Te(d,e,g),A(e,t),A(t,r),A(r,i),A(i,s),A(i,o),A(r,l),A(r,c),f&&f.m(c,null),u=!0},p(d,g){d[17].length>0?f?(f.p(d,g),g[0]&131072&&ne(f,1)):(f=rs(d),f.c(),ne(f,1),f.m(c,null)):f&&(gt(),oe(f,1,1,()=>{f=null}),mt())},i(d){u||(ne(f),u=!0)},o(d){oe(f),u=!1},d(d){d&&I(e),f&&f.d()}}}function rs(n){let e,t,r,i,s,a,o,l,c,u;return t=new Ze({props:{icon:hs}}),a=new Ze({props:{icon:ga}}),{c(){e=q("button"),Oe(t.$$.fragment),r=xe("C'est parti!"),i=ie(),s=q("button"),Oe(a.$$.fragment),o=xe(" Des absents?"),this.h()},l(f){e=M(f,"BUTTON",{class:!0,style:!0});var d=H(e);Pe(t.$$.fragment,d),r=Ee(d,"C'est parti!"),d.forEach(I),i=se(f),s=M(f,"BUTTON",{class:!0,style:!0});var g=H(s);Pe(a.$$.fragment,g),o=Ee(g," Des absents?"),g.forEach(I),this.h()},h(){C(e,"class","bg-white text-black text-2xl flex-1 mt-4 flex items-center gap-2 justify-center"),at(e,"border","1px solid black"),C(s,"class","bg-black text-white text-2xl flex-1 mt-4 flex items-center gap-2 justify-center"),at(s,"border","1px solid black")},m(f,d){Te(f,e,d),Be(t,e,null),A(e,r),Te(f,i,d),Te(f,s,d),Be(a,s,null),A(s,o),l=!0,c||(u=[He(e,"click",n[28]),He(s,"click",n[29])],c=!0)},p:aa,i(f){l||(ne(t.$$.fragment,f),ne(a.$$.fragment,f),l=!0)},o(f){oe(t.$$.fragment,f),oe(a.$$.fragment,f),l=!1},d(f){f&&I(e),je(t),f&&I(i),f&&I(s),je(a),c=!1,ls(u)}}}function is(n){let e,t;return e=new Vh({props:{currentKey:n[11],currentSummary:n[12],currentDescription:n[13],closeTicket:n[24]}}),{c(){Oe(e.$$.fragment)},l(r){Pe(e.$$.fragment,r)},m(r,i){Be(e,r,i),t=!0},p(r,i){const s={};i[0]&2048&&(s.currentKey=r[11]),i[0]&4096&&(s.currentSummary=r[12]),i[0]&8192&&(s.currentDescription=r[13]),e.$set(s)},i(r){t||(ne(e.$$.fragment,r),t=!0)},o(r){oe(e.$$.fragment,r),t=!1},d(r){je(e,r)}}}function ss(n){let e,t,r,i;function s(l){n[30](l)}function a(l){n[31](l)}let o={supabase:Qo,dictionary:n[1],closeWinnerPopup:n[19],openTicket:n[23],pause:n[22],time:n[10],winningItem:n[16],filteredList:n[9],showWinnerPopup:n[4],showTMAPopup:n[5]};return n[14]!==void 0&&(o.ressenti=n[14]),n[0]!==void 0&&(o.banner=n[0]),e=new Qh({props:o}),ti.push(()=>ni(e,"ressenti",s)),ti.push(()=>ni(e,"banner",a)),{c(){Oe(e.$$.fragment)},l(l){Pe(e.$$.fragment,l)},m(l,c){Be(e,l,c),i=!0},p(l,c){const u={};c[0]&2&&(u.dictionary=l[1]),c[0]&1024&&(u.time=l[10]),c[0]&65536&&(u.winningItem=l[16]),c[0]&512&&(u.filteredList=l[9]),c[0]&16&&(u.showWinnerPopup=l[4]),c[0]&32&&(u.showTMAPopup=l[5]),!t&&c[0]&16384&&(t=!0,u.ressenti=l[14],ri(()=>t=!1)),!r&&c[0]&1&&(r=!0,u.banner=l[0],ri(()=>r=!1)),e.$set(u)},i(l){i||(ne(e.$$.fragment,l),i=!0)},o(l){oe(e.$$.fragment,l),i=!1},d(l){je(e,l)}}}function Yh(n){let e,t,r,i,s,a,o,l,c,u,f,d,g,v,x,D,E=n[0]&&Xi(n),S=n[8]&&Qi(n),F=n[7]&&es(n),$=n[6]&&ns(n),T=n[5]&&is(n),P=n[4]&&ss(n);return{c(){e=q("div"),E&&E.c(),t=ie(),r=q("div"),i=Qr("svg"),s=Qr("path"),c=ie(),u=q("div"),f=ie(),S&&S.c(),d=ie(),F&&F.c(),g=ie(),$&&$.c(),v=ie(),T&&T.c(),x=ie(),P&&P.c(),this.h()},l(R){e=M(R,"DIV",{class:!0,id:!0});var z=H(e);E&&E.l(z),t=se(z),r=M(z,"DIV",{class:!0});var ee=H(r);i=Yr(ee,"svg",{class:!0,style:!0,width:!0,height:!0,viewBox:!0,fill:!0,xmlns:!0});var ce=H(i);s=Yr(ce,"path",{d:!0}),H(s).forEach(I),ce.forEach(I),c=se(ee),u=M(ee,"DIV",{style:!0,class:!0}),H(u).forEach(I),ee.forEach(I),f=se(z),S&&S.l(z),d=se(z),F&&F.l(z),g=se(z),$&&$.l(z),v=se(z),T&&T.l(z),x=se(z),P&&P.l(z),z.forEach(I),this.h()},h(){C(s,"d","M118.5 1.981C80.351 9.662 54.457 31.12 39.438 67.5C28.45 94.114 14.73 144.387 11.191 171C10.642 175.125 8.826 186.375 7.155 196C3.366 217.818 1 235.791 1 242.754C1 247.063 1.465 248.556 3.414 250.505C4.742 251.832 6.879 253.178 8.164 253.494C9.449 253.81 21.75 252.286 35.5 250.105C49.25 247.925 66.575 245.198 74 244.045C118.943 237.067 150.154 229.118 183 216.287C197.737 210.53 207.318 205.258 216.573 197.812C249.727 171.142 263.702 117.822 248.608 75.59C245.075 65.706 237.393 51 235.763 51C235.278 51 235.143 50.578 235.462 50.061C235.781 49.545 235.469 48.758 234.769 48.311C234.069 47.865 232.85 46.246 232.06 44.713C229.183 39.135 215.78 25.98 206.966 20.085C192.396 10.339 178.49 4.498 162.75 1.512C151.733 -0.577997 130.067 -0.347998 118.5 1.981Z"),C(i,"class","pointer"),C(i,"style",a="translate: -50% -"+n[15]/2.2+"px"),C(i,"width",o=n[15]/10),C(i,"height",l=n[15]/10),C(i,"viewBox","0 0 255 254"),C(i,"fill","white"),C(i,"xmlns","http://www.w3.org/2000/svg"),at(u,"rotate",n[3]+"deg"),C(u,"class","wheel"),C(r,"class","wheel-container"),C(e,"class","w-full h-[100vh] bg-white relative flex items-center justify-center"),C(e,"id","scrollToRoulette")},m(R,z){Te(R,e,z),E&&E.m(e,null),A(e,t),A(e,r),A(r,i),A(i,s),A(r,c),A(r,u),A(e,f),S&&S.m(e,null),A(e,d),F&&F.m(e,null),A(e,g),$&&$.m(e,null),A(e,v),T&&T.m(e,null),A(e,x),P&&P.m(e,null),D=!0},p(R,z){R[0]?E?(E.p(R,z),z[0]&1&&ne(E,1)):(E=Xi(R),E.c(),ne(E,1),E.m(e,t)):E&&(gt(),oe(E,1,1,()=>{E=null}),mt()),(!D||z[0]&32768&&a!==(a="translate: -50% -"+R[15]/2.2+"px"))&&C(i,"style",a),(!D||z[0]&32768&&o!==(o=R[15]/10))&&C(i,"width",o),(!D||z[0]&32768&&l!==(l=R[15]/10))&&C(i,"height",l),(!D||z[0]&8)&&at(u,"rotate",R[3]+"deg"),R[8]?S?(S.p(R,z),z[0]&256&&ne(S,1)):(S=Qi(R),S.c(),ne(S,1),S.m(e,d)):S&&(gt(),oe(S,1,1,()=>{S=null}),mt()),R[7]?F?(F.p(R,z),z[0]&128&&ne(F,1)):(F=es(R),F.c(),ne(F,1),F.m(e,g)):F&&(gt(),oe(F,1,1,()=>{F=null}),mt()),R[6]?$?($.p(R,z),z[0]&64&&ne($,1)):($=ns(R),$.c(),ne($,1),$.m(e,v)):$&&(gt(),oe($,1,1,()=>{$=null}),mt()),R[5]?T?(T.p(R,z),z[0]&32&&ne(T,1)):(T=is(R),T.c(),ne(T,1),T.m(e,x)):T&&(gt(),oe(T,1,1,()=>{T=null}),mt()),R[4]?P?(P.p(R,z),z[0]&16&&ne(P,1)):(P=ss(R),P.c(),ne(P,1),P.m(e,null)):P&&(gt(),oe(P,1,1,()=>{P=null}),mt())},i(R){D||(ne(E),ne(S),ne(F),ne($),ne(T),ne(P),D=!0)},o(R){oe(E),oe(S),oe(F),oe($),oe(T),oe(P),D=!1},d(R){R&&I(e),E&&E.d(),S&&S.d(),F&&F.d(),$&&$.d(),T&&T.d(),P&&P.d()}}}let as=60;async function ef(){try{const n=await fetch("https://qwcqxepot0.execute-api.eu-west-3.amazonaws.com/jira/",{method:"GET",headers:{"Content-Type":"application/json"}});if(n.ok)return await n.json();throw new Error("Network response was not ok: "+n.statusText)}catch(n){throw console.error("Error:",n),n}}const os=n=>n.fields.status==="En cours de relecture";function tf(n,e,t){let r="",i=0,s=!1,a=!1,o=!0,l=!1,c=!1,u=!1,f,d=[],g=as,v={},x={},D="",E="",S="",F=null;const $=()=>{f&&clearInterval(f),f=setInterval(()=>{if(F==null&&g==1&&t(0,r="Le temps est coul, veuillez donner votre ressenti."),g<1){if(F==null)return;z(),t(14,F=null)}else t(10,g--,g)},1e3)};let T=[],P=700,R=null;const z=()=>{f&&clearInterval(f),t(4,s=!1),t(6,o=!1),clearInterval(f),delete v[R],t(1,v={...v}),t(10,g=as)},ee=()=>{t(4,s=!1),t(6,o=!1),t(7,l=!0)},ce=()=>{t(4,s=!1),t(6,o=!0),t(7,l=!1)},ge=re=>{re.target.innerText=="Pause"?(re.target.innerText="Resume",clearInterval(f)):($(),re.target.innerText="Pause")},he=()=>{const re=(360-i%360)%360,be=360/Object.keys(v).length,ve=Math.floor(re/be),te=Object.keys(v)[ve];t(16,R=te),t(14,F=null),t(9,d=Se.filter(le=>{var Le;return((Le=le.fields.assignee)==null?void 0:Le.displayName)==R})),Object.keys(v).length>0&&setTimeout(()=>{t(4,s=!0),$(),u=!1},1e3)},Z=re=>{if(!u&&!(l||s||o||a||c)&&(console.log(re),re!=null?re.stopPropagation():console.log("Starting Daily"),!u&&Object.keys(v).length>0)){u=!0;const be=Math.random()*720+1080;t(3,i+=be)}};let Q=[...T];const De=()=>{T.length!==Object.keys(v).length&&(Q=Array.from({length:Object.keys(v).length},(re,be)=>T[be%T.length])),Q[0]==Q[Q.length-1]&&(Q[Q.length-1]=Q.at(1))},ye=()=>{bi(".wheel svg").remove(),De();const re=bi(".wheel").append("svg").attr("width",P).attr("height",P).append("g").attr("transform",`translate(${P/2}, ${P/2})`),ve=Sh().value(1)(Object.keys(v)),te=Ah().innerRadius(0).outerRadius(P/2);re.selectAll("mySlices").data(ve).enter().append("path").attr("d",te).attr("fill",(le,Le)=>Q[Le]),re.append("defs").append("clipPath").attr("id","clip-circle").append("circle").attr("cx",P/26).attr("cy",P/26).attr("r",P/26),re.selectAll("mySlices").data(ve).enter().append("image").attr("xlink:href",(le,Le)=>v[Object.keys(v)[Le]]).attr("transform",le=>`translate(${te.centroid(le)[0]-P/13/2}, ${te.centroid(le)[1]-P/13/2})`).style("rotate",le=>"${d}deg").style("clip-path","url(#clip-circle)").attr("width",P/13).attr("height",P/13)};ei(ye);let Se=[];us(async()=>{t(15,P=window.innerWidth>600?600:window.innerWidth);function re(){t(15,P=window.innerWidth>600?600:window.innerWidth),ye()}window.addEventListener("resize",re);const be=await ef();t(17,Se=be);let ve=[...new Set(be.map(fe=>{if(fe.fields.assignee!=null)return fe.fields.assignee.avatar}))],te=[...new Set(be.map(fe=>{if(fe.fields.assignee!=null)return fe.fields.assignee.displayName}))];t(1,v={});for(var le=0;le<ve.length;le++)t(1,v[te[le]]=ve[le],v);delete v[null],t(2,x={...v}),document.querySelector(".wheel").addEventListener("transitionend",()=>{he()}),document.querySelector(".wheel").addEventListener("click",fe=>{Z(fe)}),document.querySelector("body").addEventListener("keydown",fe=>{fe.code==="Space"&&Z(fe)})});function Re(re){t(11,D=re.key),t(12,E=re.fields.summary),t(13,S=re.fields.description),t(5,a=!0)}function Ae(){t(5,a=!1)}let Fe=[];ei(()=>{Object.keys(v).length>=1&&t(8,c=!1)});const Qe=re=>{Re(re)},Ce=(re,be)=>{be.target.checked?t(1,v[re]=x[re],v):delete v[re],t(1,v={...v})},J=()=>{ce()},B=()=>{z()},$e=()=>{ee()};function Ye(re){F=re,t(14,F)}function qe(re){r=re,t(0,r)}return n.$$.update=()=>{n.$$.dirty[0]&2&&console.log(Object.keys(v).length),n.$$.dirty[0]&2&&Object.keys(v).length<1&&t(8,c=!0),n.$$.dirty[0]&6&&t(18,Fe=Object.keys(x).map(re=>v[re]!=null)),n.$$.dirty[0]&1&&r&&setTimeout(()=>{String(document.querySelector(".banner").classList).includes("slideout")||(document.querySelector(".banner").classList.add("slideout"),document.querySelector(".slideout").addEventListener("animationend",()=>{document.querySelector(".slideout").remove("slideout"),t(0,r="")}))},3e3)},[r,v,x,i,s,a,o,l,c,d,g,D,E,S,F,P,R,Se,Fe,z,ee,ce,ge,Re,Ae,Qe,Ce,J,B,$e,Ye,qe]}class lf extends er{constructor(e){super(),tr(this,e,tf,Yh,nr,{},null,[-1,-1])}}export{lf as P,Nh as g};
